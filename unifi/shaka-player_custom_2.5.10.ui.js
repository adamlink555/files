!function(){var e="undefined"!=typeof window?window:global,t={};if(function(e,t,n){var i,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},a=void 0!==e&&e===this?this:void 0!==t&&null!=t?t:this;function o(){o=function(){},a.Symbol||(a.Symbol=u)}var s,u=(s=0,function(e){return"jscomp_symbol_"+(e||"")+s++});function c(){o();var e=a.Symbol.iterator;e||(e=a.Symbol.iterator=a.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&r(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return l(this)}}),c=function(){}}function l(e){var t=0;return d((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))}function d(e){return c(),(e={next:e})[a.Symbol.iterator]=function(){return this},e}function h(e){c();var t=e[Symbol.iterator];return t?t.call(e):l(e)}function f(e,t){if(t){for(var n=a,i=e.split("."),o=0;o<i.length-1;o++){var s=i[o];s in n||(n[s]={}),n=n[s]}(s=t(o=n[i=i[i.length-1]]))!=o&&null!=s&&r(n,i,{configurable:!0,writable:!0,value:s})}}function p(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){!function e(a){a.done?i(a.value):Promise.resolve(a.value).then(t,n).then(e,r)}(e.next())}))}(e())}f("Promise",(function(e){function t(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},n.prototype.f=function(){var e=this;this.c((function(){e.j()}))};var r=a.setTimeout;n.prototype.c=function(e){r(e,0)},n.prototype.j=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.g(e)}}}this.a=null},n.prototype.g=function(e){this.c((function(){throw e}))},t.prototype.c=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.w),reject:e(this.f)}},t.prototype.w=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.B(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.j(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(e){return void this.f(e)}"function"==typeof t?this.G(t,e):this.j(e)},t.prototype.f=function(e){this.l(2,e)},t.prototype.j=function(e){this.l(1,e)},t.prototype.l=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.s()},t.prototype.s=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)o.b(this.a[e]);this.a=null}};var o=new n;return t.prototype.B=function(e){var t=this.c();e.Ic(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,o=new t((function(e,t){r=e,a=t}));return this.Ic(i(e,r),i(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ic=function(e,t){function n(){switch(i.b){case 1:e(i.g);break;case 2:t(i.g);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?o.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=h(e),a=r.next();!a.done;a=r.next())i(a.value).Ic(t,n)}))},t.all=function(e){var n=h(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).Ic(a(o.length-1),t),r=n.next()}while(!r.done)}))},t})),f("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));var m,g="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)m=Object.setPrototypeOf;else{var v;e:{var y={};try{y.__proto__={Gf:!0},v=y.Gf;break e}catch(s){}v=!1}m=v?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var b=m;function E(e,t){if(e.prototype=g(t.prototype),e.prototype.constructor=e,b)b(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Dh=t.prototype}function w(){this.g=!1,this.c=null,this.A=void 0,this.o=1,this.b=this.f=0,this.l=this.a=null}function T(e){if(e.g)throw new TypeError("Generator is already running");e.g=!0}function S(e,t){e.a={Fe:t,Re:!0},e.o=e.f||e.b}function A(e,t,n){return e.o=n,{value:t}}function I(e){e.o=0}function k(e,t,n){e.f=t,null!=n&&(e.b=n)}function x(e,t){e.f=0,e.b=t||0}function C(e,t){e.o=t,e.f=0}function N(e){e.f=0;var t=e.a.Fe;return e.a=null,t}function P(e){e.l=[e.a],e.f=0,e.b=0}function M(e,t){var n=e.l.splice(0)[0];(n=e.a=e.a||n)?n.Re?e.o=e.f||e.b:null!=n.C&&e.b<n.C?(e.o=n.C,e.a=null):e.o=e.b:e.o=t}function R(e){this.a=new w,this.b=e}function L(e,t,n,i){try{var r=t.call(e.a.c,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.a.g=!1,r;var a=r.value}catch(t){return e.a.c=null,S(e.a,t),U(e)}return e.a.c=null,i.call(e.a,a),U(e)}function U(e){for(;e.a.o;)try{var t=e.b(e.a);if(t)return e.a.g=!1,{value:t.value,done:!1}}catch(t){e.a.A=void 0,S(e.a,t)}if(e.a.g=!1,e.a.a){if(t=e.a.a,e.a.a=null,t.Re)throw t.Fe;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function _(e){this.next=function(t){return T(e.a),e.a.c?t=L(e,e.a.c.next,t,e.a.j):(e.a.j(t),t=U(e)),t},this.throw=function(t){return T(e.a),e.a.c?t=L(e,e.a.c.throw,t,e.a.j):(S(e.a,t),t=U(e)),t},this.return=function(t){return function(e,t){T(e.a);var n=e.a.c;return n?L(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),U(e))}(e,t)},c(),this[Symbol.iterator]=function(){return this}}function O(e,t){return _.prototype=e.prototype,new _(new R(t))}function D(e){if(!(e instanceof Array)){e=h(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function j(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Oe:r,Af:a}}return{Oe:-1,Af:void 0}}function K(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}w.prototype.j=function(e){this.A=e},w.prototype.return=function(e){this.a={return:e},this.o=this.b},w.prototype.C=function(e){this.o=e},f("WeakMap",(function(e){function t(e){if(this.a=(s+=Math.random()+1).toString(),e){o(),c(),e=h(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(e){F(e,a)||r(e,a,{value:{}})}function i(e){var t=Object[e];t&&(Object[e]=function(e){return n(e),t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var a="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var s=0;return t.prototype.set=function(e,t){if(n(e),!F(e,a))throw Error("WeakMap key fail: "+e);return e[a][this.a]=t,this},t.prototype.get=function(e){return F(e,a)?e[a][this.a]:void 0},t.prototype.has=function(e){return F(e,a)&&F(e[a],this.a)},t.prototype.delete=function(e){return!(!F(e,a)||!F(e[a],this.a))&&delete e[a][this.a]},t})),f("Map",(function(e){function t(){var e={};return e.fb=e.next=e.head=e}function n(e,t){var n=e.a;return d((function(){if(n){for(;n.head!=e.a;)n=n.fb;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++s,a.set(t,n)):n="p_"+t;var i=e.b[n];if(i&&F(e.b,n))for(var r=0;r<i.length;r++){var o=i[r];if(t!=t&&o.key!=o.key||t===o.key)return{id:n,list:i,index:r,qa:o}}return{id:n,list:i,index:-1,qa:void 0}}function r(e){if(this.b={},this.a=t(),this.size=0,e){e=h(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(h([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(e){return!1}}())return e;o(),c();var a=new WeakMap;r.prototype.set=function(e,t){var n=i(this,e);return n.list||(n.list=this.b[n.id]=[]),n.qa?n.qa.value=t:(n.qa={next:this.a,fb:this.a.fb,head:this.a,key:e,value:t},n.list.push(n.qa),this.a.fb.next=n.qa,this.a.fb=n.qa,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).qa||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.qa.fb.next=e.qa.next,e.qa.next.fb=e.qa.fb,e.qa.head=null,this.size--,0))},r.prototype.clear=function(){this.b={},this.a=this.a.fb=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).qa},r.prototype.get=function(e){return(e=i(this,e).qa)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r})),f("Set",(function(e){function t(e){if(this.a=new Map,e){e=h(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(h([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&!(r=i.next()).done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done}catch(e){return!1}}()?e:(o(),c(),t.prototype.add=function(e){return this.a.set(e,e),this.size=this.a.size,this},t.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach((function(i){return e.call(t,i,i,n)}))},t)})),f("Array.prototype.keys",(function(e){return e||function(){return function(e,t){c(),e instanceof String&&(e+="");var n=0,i={next:function(){if(n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e){return e}))}})),f("Array.from",(function(e){return e||function(e,t,n){c(),t=null!=t?t:function(e){return e};var i=[],r=e[Symbol.iterator];if("function"==typeof r)for(e=r.call(e);!(r=e.next()).done;)i.push(t.call(n,r.value));else{r=e.length;for(var a=0;a<r;a++)i.push(t.call(n,e[a]))}return i}})),f("Array.prototype.findIndex",(function(e){return e||function(e,t){return j(this,e,t).Oe}})),f("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),f("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length,r=t||0;for(0>r&&(r=Math.max(r+i,0));r<i;r++){var a=n[r];if(a===e||Object.is(a,e))return!0}return!1}})),f("String.prototype.includes",(function(e){return e||function(e,t){return-1!==K(this,e,"includes").indexOf(e,t||0)}})),f("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=K(this,e,"startsWith"),i=n.length,r=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<r&&a<i;)if(n[a++]!=e[o++])return!1;return o>=r}})),f("Array.prototype.find",(function(e){return e||function(e,t){return j(this,e,t).Af}}));var B="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)F(i,r)&&(e[r]=i[r])}return e};f("Object.assign",(function(e){return e||B}));var G=this;function V(e,t){var n,i=e.split("."),r=G;i[0]in r||!r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]?r[n]:r[n]={}:r[n]=t}function z(e,t){function n(){}n.prototype=t.prototype,e.Dh=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,i){return t.prototype[n].apply(e,Array.prototype.slice.call(arguments,2))}}function H(t,n){for(var i in n=void 0===n?{}:n)this[i]=n[i];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}G.a=!0,H.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},H.prototype.stopImmediatePropagation=function(){this.a=!0},H.prototype.stopPropagation=function(){};var W={Kb:0,Gc:function(){},ba:function(){},error:function(){},v:function(){},info:function(){},debug:function(){},I:function(){},N:function(){}};function q(){this.a={}}function X(){this.Bd=new q,this.Dc=this}function Y(e,t){for(var n=[],i=h(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}function $(e,t){for(var n=h(e),i=n.next();!i.done;i=n.next())if(!t(i.value))return!1;return!0}function J(e,t){for(var n=[],i=h(e),r=i.next();!r.done;r=i.next())t(r=r.value)&&n.push(r);return n}function Z(e,t){return e=ee(e),t=ee(t),e.split("-")[0]==t.split("-")[0]}function Q(e,t){e=ee(e),t=ee(t);var n=e.split("-"),i=t.split("-");return n[0]==i[0]&&1==n.length&&2==i.length}function ee(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=re.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function te(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),re.get(e)||e}function ne(e){return e.language?ee(e.language):e.audio&&e.audio.language?ee(e.audio.language):e.video&&e.video.language?ee(e.video.language):"und"}function ie(e,t){for(var n=ee(e),i=new Set,r=h(t),a=r.next();!a.done;a=r.next())i.add(ee(a.value));for(a=(r=h(i)).next();!a.done;a=r.next())if((a=a.value)==n)return a;for(a=(r=h(i)).next();!a.done;a=r.next())if(Q(a=a.value,n))return a;for(a=(r=h(i)).next();!a.done;a=r.next()){var o=a=a.value,s=n;if(o=ee(o),s=ee(s),o=o.split("-"),s=s.split("-"),2==o.length&&2==s.length&&o[0]==s[0])return a}for(a=(i=h(i)).next();!a.done;a=i.next())if(Q(n,r=a.value))return r;return null}e.console&&e.console.log.bind&&(W.ba=console.warn.bind(console),W.Gc=console.error.bind(console),1<=W.Kb&&(W.error=console.error.bind(console)),2<=W.Kb&&(W.v=console.warn.bind(console)),3<=W.Kb&&(W.info=console.info.bind(console)),4<=W.Kb&&(W.debug=console.log.bind(console)),5<=W.Kb&&(W.I=console.debug.bind(console)),6<=W.Kb&&(W.N=console.debug.bind(console))),(i=q.prototype).push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},i.get=function(e){return(e=this.a[e])?e.slice():null},i.getAll=function(){var e,t=[];for(e in this.a)t.push.apply(t,this.a[e]);return t},i.remove=function(e,t){var n=this.a[e];if(n)for(var i=0;i<n.length;++i)n[i]==t&&(n.splice(i,1),--i)},i.forEach=function(e){for(var t in this.a)e(t,this.a[t])},X.prototype.addEventListener=function(e,t){this.Bd.push(e,t)},X.prototype.removeEventListener=function(e,t){this.Bd.remove(e,t)},X.prototype.dispatchEvent=function(e){for(var t=this.Bd.get(e.type)||[],n=0;n<t.length;++n){e.target=this.Dc,e.currentTarget=this.Dc;var i=t[n];try{i.handleEvent?i.handleEvent(e):i.call(this,e)}catch(e){W.error("Uncaught exception in event handler",e,e?e.message:null,e?e.stack:null)}if(e.a)break}return e.defaultPrevented};var re=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function ae(e){this.g=ee(e),this.f=new Map,this.b=new Set,this.c=new Map,this.a=new X}function oe(e){for(var t=e.c,n=e.g,i=e.b,r=new Set,a={},o=h(i),s=o.next();!s.done;a={locale:a.locale},s=o.next()){a.locale=s.value,r.add(a.locale),r.add(te(a.locale)),s=J(t.keys(),function(e){return function(t){var n=e.locale,i=te(t),r=te(n);return t!=i&&n!=r&&i==r}}(a)),s.sort();var u=h(s);for(s=u.next();!s.done;s=u.next())r.add(s.value);for(s=J(t.keys(),function(e){return function(t){return te(t)==e.locale}}(a)),s.sort(),s=(u=h(s)).next();!s.done;s=u.next())r.add(s.value)}for(r.add(n),n=[],s=(r=h(r)).next();!s.done;s=r.next())(s=t.get(s.value))&&n.push(s);for(n.reverse(),e.f.clear(),s=(t=h(n)).next();!s.done;s=t.next())s.value.forEach((function(t,n){e.f.set(n,t)}));for(t=e.f.keys(),r=new Set,s=(n=h(e.b)).next();!s.done;s=n.next())se(s=e.c.get(s.value)||new Map,t,r);0<r.size&&(i={locales:Array.from(i),missing:Array.from(r)},e.a.dispatchEvent(new H("missing-localizations",i)))}function se(e,t,n){for(var i=(t=h(t)).next();!i.done;i=t.next())i=i.value,e.get(i)||n.add(i)}V("shaka.ui.Localization",ae),ae.prototype.addEventListener=function(e,t,n){this.a.addEventListener(e,t,n)},ae.prototype.addEventListener=ae.prototype.addEventListener,ae.prototype.removeEventListener=function(e,t,n){this.a.removeEventListener(e,t,n||void 0)},ae.prototype.removeEventListener=ae.prototype.removeEventListener,ae.prototype.dispatchEvent=function(e){return this.a.dispatchEvent(e)},ae.prototype.dispatchEvent=ae.prototype.dispatchEvent,ae.prototype.Ae=function(e){var t=this;this.b.clear();for(var n=(e=h(e)).next();!n.done;n=e.next())this.b.add(ee(n.value));oe(this),this.a.dispatchEvent(new H("locale-changed")),(e=J(this.b,(function(e){return!t.c.has(e)}))).length&&this.a.dispatchEvent(new H("unknown-locales",{locales:e}))},ae.prototype.changeLocale=ae.prototype.Ae,ae.prototype.aa=function(e,t,n){var i=ue;e=ee(e),void 0===n&&(n=i.Ff);var r=this.c.get(e)||new Map;return t.forEach((function(e,t){r.has(t)&&n!=i.Ff||r.set(t,e)})),this.c.set(e,r),oe(this),this.a.dispatchEvent(new H("locale-updated")),this},ae.prototype.insert=ae.prototype.aa,ae.prototype.mh=function(e){for(var t=h(e.keys()),n=t.next();!n.done;n=t.next())n=n.value,e.set(n,this.resolve(n))},ae.prototype.resolveDictionary=ae.prototype.mh,ae.prototype.resolve=function(e){return this.f.get(e)||(e={locales:Array.from(this.b),missing:e},this.a.dispatchEvent(new H("unknown-localization",e)),"")},ae.prototype.resolve=ae.prototype.resolve;var ue={USE_OLD:0,USE_NEW:1};function ce(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function le(e,t,n){var i=Math.pow(e.c,t);n=n*(1-i)+i*e.a,isNaN(n)||(e.a=n,e.b+=t)}function de(e){return e.a/(1-Math.pow(e.c,e.b))}function he(){this.b=new ce(2),this.c=new ce(5),this.a=0}ae.ConflictResolution=ue,ae.UNKNOWN_LOCALES="unknown-locales",ae.UNKNOWN_LOCALIZATION="unknown-localization",ae.MISSING_LOCALIZATIONS="missing-localizations",ae.LOCALE_CHANGED="locale-changed",ae.LOCALE_UPDATED="locale-updated",he.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(de(this.b),de(this.c))};var fe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function pe(e){var t;e instanceof pe?(me(this,e.Pa),this.Hb=e.Hb,this.Oa=e.Oa,ge(this,e.bc),this.Ca=e.Ca,ve(this,e.a.clone()),this.wb=e.wb):e&&(t=String(e).match(fe))?(me(this,t[1]||"",!0),this.Hb=ye(t[2]||""),this.Oa=ye(t[3]||"",!0),ge(this,t[4]),this.Ca=ye(t[5]||"",!0),ve(this,t[6]||"",!0),this.wb=ye(t[7]||"")):this.a=new ke(null)}function me(e,t,n){e.Pa=n?ye(t,!0):t,e.Pa&&(e.Pa=e.Pa.replace(/:$/,""))}function ge(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.bc=t}else e.bc=null}function ve(e,t,n){t instanceof ke?e.a=t:(n||(t=be(t,Ae)),e.a=new ke(t))}function ye(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function be(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ee),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ee(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=pe.prototype).Pa="",i.Hb="",i.Oa="",i.bc=null,i.Ca="",i.wb="",i.toString=function(){var e=[],t=this.Pa;if(t&&e.push(be(t,we,!0),":"),t=this.Oa){e.push("//");var n=this.Hb;n&&e.push(be(n,we,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.bc)&&e.push(":",String(t))}return(t=this.Ca)&&(this.Oa&&"/"!=t.charAt(0)&&e.push("/"),e.push(be(t,"/"==t.charAt(0)?Se:Te,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.wb)&&e.push("#",be(t,Ie)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.Pa&&(t=new pe);var n=!!e.Pa;n?me(t,e.Pa):n=!!e.Hb,n?t.Hb=e.Hb:n=!!e.Oa,n?t.Oa=e.Oa:n=null!=e.bc;var i=e.Ca;if(n)ge(t,e.bc);else if(n=!!e.Ca){if("/"!=i.charAt(0))if(this.Oa&&!this.Ca)i="/"+i;else{var r=t.Ca.lastIndexOf("/");-1!=r&&(i=t.Ca.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}return n?t.Ca=i:n=""!==e.a.toString(),n?ve(t,e.a.clone()):n=!!e.wb,n&&(t.wb=e.wb),t},i.clone=function(){return new pe(this)};var we=/[#\/\?@]/g,Te=/[#\?:]/g,Se=/[#\?]/g,Ae=/[#\?@]/g,Ie=/#/g;function ke(e){this.a=e||null}function xe(e){this.b=e,this.a=null}function Ce(e){this.b=e,this.a=null}function Ne(e,t){var n=2,i=1e3,r=2,a=.5;this.l=null==e.maxAttempts?n:e.maxAttempts,this.f=null==e.baseDelay?i:e.baseDelay,this.j=null==e.fuzzFactor?a:e.fuzzFactor,this.g=null==e.backoffFactor?r:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function Pe(e){return p((function t(){var n,i;return O(t,(function(t){switch(t.o){case 1:if(e.a>=e.l){if(!e.c)return t.return(Promise.reject());e.a=1,e.b=e.f}return n=e.a,e.a++,0==n?t.return():(i=e.b*(1+(2*Math.random()-1)*e.j),A(t,new Promise((function(e){new Ce(e).T(i/1e3)})),2));case 2:e.b*=e.g,I(t)}}))}))}function Me(e,t,n,i){for(var r=[],a=3;a<arguments.length;++a)r[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}function Re(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function Le(e,t){this.promise=e,this.Ve=t,this.a=!1}function Ue(e){return new Le(Promise.reject(e),(function(){return Promise.resolve()}))}function _e(){var e=Promise.reject(new Me(2,7,7001));return e.catch((function(){})),new Le(e,(function(){return Promise.resolve()}))}function Oe(e){return new Le(Promise.resolve(e),(function(){return Promise.resolve()}))}function De(e){return new Le(e,(function(){return e.catch((function(){}))}))}function Fe(e){return new Le(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function je(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){})).catch((function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}function Ke(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r,a=i?[]:{};for(r in n)a[r]=e(n[r]);return i&&(a.length=n.length),a}}(e)}function Be(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Ge(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function Ve(e,t,n){if(n||(n=Be),e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=h(e)).next();!r.done;i={item:i.item},r=e.next()){if(i.item=r.value,r=t.findIndex(function(e){return function(t){return n(e.item,t)}}(i)),-1==r)return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function ze(){this.a=[]}function He(e,t){e.a.push(t.finally((function(){Ge(e.a,t)})))}function We(e){X.call(this),this.f=!1,this.g=new ze,this.a=new Set,this.b=new Set,this.c=e||null}(i=ke.prototype).Aa=null,i.Lc=null,i.add=function(e,t){if(!this.Aa&&(this.Aa={},this.Lc=0,this.a))for(var n=this.a.split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("="),a=null;if(0<=r){var o=n[i].substring(0,r);a=n[i].substring(r+1)}else o=n[i];o=decodeURIComponent(o.replace(/\+/g," ")),a=a||"",this.add(o,decodeURIComponent(a.replace(/\+/g," ")))}return this.a=null,(n=this.Aa.hasOwnProperty(e)&&this.Aa[e])||(this.Aa[e]=n=[]),n.push(t),this.Lc++,this},i.toString=function(){if(this.a)return this.a;if(!this.Aa)return"";var e,t=[];for(e in this.Aa)for(var n=encodeURIComponent(e),i=this.Aa[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.a=t.join("&")},i.clone=function(){var e=new ke;if(e.a=this.a,this.Aa){var t,n={};for(t in this.Aa)n[t]=this.Aa[t].concat();e.Aa=n,e.Lc=this.Lc}return e},xe.prototype.T=function(t){var n=this;this.stop();var i=!0,r=null;return this.a=function(){e.clearTimeout(r),i=!1},r=e.setTimeout((function(){i&&n.b()}),1e3*t),this},xe.prototype.stop=function(){this.a&&(this.a(),this.a=null)},V("shaka.util.Timer",Ce),Ce.prototype.gb=function(){return this.stop(),this.b(),this},Ce.prototype.tickNow=Ce.prototype.gb,Ce.prototype.T=function(e){var t=this;return this.stop(),this.a=new xe((function(){t.b()})).T(e),this},Ce.prototype.tickAfter=Ce.prototype.T,Ce.prototype.Ua=function(e){var t=this;return this.stop(),this.a=new xe((function(){t.a.T(e),t.b()})).T(e),this},Ce.prototype.tickEvery=Ce.prototype.Ua,Ce.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},Ce.prototype.stop=Ce.prototype.stop,V("shaka.util.Error",Me),Me.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},Me.Severity={RECOVERABLE:1,CRITICAL:2},Me.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},Me.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},Re.prototype.resolve=function(){},Re.prototype.reject=function(){},V("shaka.util.AbortableOperation",Le),Le.failed=Ue,Le.aborted=_e,Le.completed=Oe,Le.notAbortable=De,Le.prototype.abort=function(){return this.a=!0,this.Ve()},Le.prototype.abort=Le.prototype.abort,Le.all=Fe,Le.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},Le.prototype.finally=Le.prototype.finally,Le.prototype.ma=function(e,t){function n(){return r.reject(new Me(2,7,7001)),i.abort()}var i=this,r=new Re;return this.promise.then((function(t){i.a?r.reject(new Me(2,7,7001)):e?n=je(e,t,r):r.resolve(t)}),(function(e){t?n=je(t,e,r):r.reject(e)})),new Le(r,(function(){return n()}))},Le.prototype.chain=Le.prototype.ma,ze.prototype.destroy=function(){var e=[];return this.a.forEach((function(t){t.promise.catch((function(){})),e.push(t.abort())})),this.a=[],Promise.all(e)},z(We,X),V("shaka.net.NetworkingEngine",We),We.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4},We.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var qe={};function Xe(e,t,n){n=n||3;var i=qe[e];(!i||n>=i.priority)&&(qe[e]={priority:n,bh:t})}function Ye(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function $e(e,t,n,i,r,a,o){var s=new pe(n.uris[r]),u=s.Pa,c=!1;u||(me(s,u=(u=location.protocol).slice(0,-1)),n.uris[r]=s.toString()),u=u.toLowerCase();var l,d=(u=qe[u])?u.bh:null;return d?De(Pe(i)).ma((function(){return e.f?_e():(l=Date.now(),d(n.uris[r],n,t,(function(n,i,r){e.c&&1==t&&(e.c(n,i),c=!0,o.a=r)})))})).ma((function(e){return null==e.timeMs&&(e.timeMs=Date.now()-l),{response:e,zg:c}}),(function(s){if(s&&7001==s.code)throw s;if(e.f)return _e();if(s&&1==s.severity)return e.dispatchEvent(new H("retry",{error:s instanceof Me?s:null})),r=(r+1)%n.uris.length,$e(e,t,n,i,r,s,o);throw s||a})):Ue(new Me(2,1,1e3,s))}function Je(){this.a=0}function Ze(e,t,n){Le.call(this,e,t),this.b=n}function Qe(){}function et(){this.a=new q}function tt(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=nt;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}nt=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.a)}We.registerScheme=Xe,We.unregisterScheme=function(e){delete qe[e]},We.prototype.eh=function(e){this.a.add(e)},We.prototype.registerRequestFilter=We.prototype.eh,We.prototype.Eh=function(e){this.a.delete(e)},We.prototype.unregisterRequestFilter=We.prototype.Eh,We.prototype.Mf=function(){this.a.clear()},We.prototype.clearAllRequestFilters=We.prototype.Mf,We.prototype.fh=function(e){this.b.add(e)},We.prototype.registerResponseFilter=We.prototype.fh,We.prototype.Fh=function(e){this.b.delete(e)},We.prototype.unregisterResponseFilter=We.prototype.Fh,We.prototype.Nf=function(){this.b.clear()},We.prototype.clearAllResponseFilters=We.prototype.Nf,We.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}},We.makeRequest=Ye,We.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},We.prototype.destroy=We.prototype.destroy,We.prototype.request=function(e,t){var n=this,i=new Je;if(this.f){var r=Promise.reject(new Me(2,7,7001));return r.catch((function(){})),new Ze(r,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ke(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},t.uris=Ke(t.uris),r=function(e,t,n){for(var i=Oe(void 0),r={},a=(e=h(e.a)).next();!a.done;r={Xd:r.Xd},a=e.next())r.Xd=a.value,i=i.ma(function(e){return function(){return e.Xd(t,n)}}(r));return i.ma(void 0,(function(e){if(e&&7001==e.code)throw e;throw new Me(2,1,1006,e)}))}(this,e,t);var a=r.ma((function(){return $e(n,e,t,new Ne(t.retryParameters,!1),0,null,i)})),o=a.ma((function(t){return function(e,t,n){for(var i=Oe(void 0),r=(e=h(e.b)).next();!r.done;r=e.next())i=i.ma(r.value.bind(null,t,n.response));return i.ma((function(){return n}),(function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof Me&&(t=e.severity),new Me(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),u=0;r.promise.then((function(){u=Date.now()-s}),(function(){}));var c=0;return a.promise.then((function(){c=Date.now()}),(function(){})),r=o.ma((function(t){var i=Date.now()-c,r=t.response;return r.timeMs+=u,r.timeMs+=i,t.zg||!n.c||r.fromCache||1!=e||n.c(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e})),r=new Ze(r.promise,r.Ve,i),He(this.g,r),r},We.prototype.request=We.prototype.request,We.NumBytesRemainingClass=Je,E(Ze,Le),We.PendingRequest=Ze,Ze.all=Fe,Ze.notAbortable=De,Ze.completed=Oe,Ze.aborted=_e,Ze.failed=Ue,V("shaka.util.IReleasable",Qe),Qe.prototype.release=function(){},V("shaka.util.EventManager",et),et.prototype.release=function(){this.Fb(),this.a=null},et.prototype.release=et.prototype.release,et.prototype.m=function(e,t,n,i){this.a&&(e=new tt(e,t,n,i),this.a.push(t,e))},et.prototype.listen=et.prototype.m,et.prototype.Ha=function(e,t,n,i){var r=this;this.m(e,t,(function i(a){r.xa(e,t,i),n(a)}),i)},et.prototype.listenOnce=et.prototype.Ha,et.prototype.xa=function(e,t,n){if(this.a)for(var i=this.a.get(t)||[],r=(i=h(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.xa(),this.a.remove(t,r))},et.prototype.unlisten=et.prototype.xa,et.prototype.Fb=function(){if(this.a){for(var e=this.a.getAll(),t=(e=h(e)).next();!t.done;t=e.next())t.value.xa();this.a.a={}}},et.prototype.removeAll=et.prototype.Fb,tt.prototype.xa=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1},tt.prototype.unlisten=tt.prototype.xa;var nt=void 0;function it(e){return new pe(e=Et(e)).Oa}function rt(e,t,n){function i(e){new DataView(r.buffer).setUint32(a,e.byteLength,!0),a+=4,r.set(e,a),a+=e.byteLength}if(!n||!n.byteLength)throw new Me(2,6,6015);t="string"==typeof t?new Uint8Array(Tt(t,!0)):new Uint8Array(t),e=Tt(e=Et(e),!0);var r=new Uint8Array(12+e.byteLength+t.byteLength+n.byteLength),a=0;return i(new Uint8Array(e)),i(t),i(new Uint8Array(n)),r}function at(e){var t=new Map;return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t}function ot(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function st(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function ut(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}V("shaka.util.FairPlayUtils.defaultGetContentId",it),V("shaka.util.FairPlayUtils.initDataTransform",rt);var ct=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function lt(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function dt(e){return""!=mt().canPlayType(e)}function ht(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!pt("Tizen")}function ft(){if(!ht())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function pt(e){return(navigator.userAgent||"").includes(e)}function mt(){return vt||(gt||(gt=new Ce((function(){vt=null}))),(vt=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(vt=document.createElement("video")),gt.T(1),vt)}var gt=null,vt=null;function yt(e){if(!e)return"";239==(e=new Uint8Array(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=St(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new Me(2,2,2004)}}function bt(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw W.error("Data has an incorrect length, must be even."),new Me(2,2,2004);if(e instanceof ArrayBuffer)var i=e;else(n=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),i=n.buffer;e=Math.floor(e.byteLength/2),n=new Uint16Array(e),i=new DataView(i);for(var r=0;r<e;r++)n[r]=i.getUint16(2*r,t);return St(n)}function Et(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return yt(t);if(254==t[0]&&255==t[1])return bt(t.subarray(2),!1);if(255==t[0]&&254==t[1])return bt(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(W.debug("Unable to find byte-order-mark, making an educated guess."),0==t[0]&&0==t[2])return bt(e,!1);if(0==t[1]&&0==t[3])return bt(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return yt(e);throw new Me(2,2,2003)}function wt(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function Tt(e,t){for(var n=new Uint8Array(2*e.length),i=new DataView(n.buffer),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n.buffer}function St(e){if(!At)for(var t=function(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}},n={size:65536};0<n.size;(n={size:n.size}).size/=2)if(t(n.size)){At=function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.size)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.size));return n}}(n);break}return At(e)}V("shaka.util.StringUtils.fromUTF8",yt),V("shaka.util.StringUtils.fromUTF16",bt),V("shaka.util.StringUtils.fromBytesAutoDetect",Et),V("shaka.util.StringUtils.toUTF8",wt),V("shaka.util.StringUtils.toUTF16",Tt);var At=null;V("shaka.util.StringUtils.resetFromCharCode",(function(){At=null}));var It={fd:function(t,n){var i=St(t);return n=null==n||n,i=e.btoa(i).replace(/\+/g,"-").replace(/\//g,"_"),n?i:i.replace(/=*$/,"")}};function kt(e,t){var n=this;t=void 0===t?1:t,this.G=e,this.B=new Set,this.j=this.s=null,this.O=!1,this.K=0,this.a=null,this.l=new et,this.b=new Map,this.w=[],this.u=new Re,this.f=null,this.g=function(t){n.u.reject(t),e.onError(t)},this.na=new Map,this.X=new Map,this.L=new Ce((function(){return function(e){var t=e.na,n=e.X;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.g(new Me(2,6,6014)),e.G.Vc(ot(n))}(n)})),this.c=!1,this.ia=new Re,this.H=!1,this.J=[],this.ka=!1,this.Z=new Ce((function(){!function(e){e.b.forEach((function(t,n){var i=t.Pd,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.G.onExpirationUpdated(n.sessionId,r),t.Pd=r)}))}(n)})).Ua(t),this.u.catch((function(){}))}function xt(e,t,n){return e.w=n,e.H=0<n.length,Ct(e,t)}function Ct(t,n){var i=function(t){if(0==(t=at(t.f.clearKeys)).size)return null;var n=[],i=[];t.forEach((function(e,t){var r=It.ud(t),a=It.ud(e);r={kty:"oct",kid:It.fd(r,!1),k:It.fd(a,!1)},n.push(r),i.push(r.kid)})),t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:new Uint8Array(wt(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:[]}}(t);if(i)for(var r=h(n),a=r.next();!a.done;a=r.next())a.value.drmInfos=[i];for(i=n.some((function(e){return 0<e.drmInfos.length})),i||function(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})}));for(var i=h(e),r=i.next();!r.done;r=i.next())r.value.drmInfos=n}(n,a=at(t.f.servers)),a=(r=h(n)).next();!a.done;a=r.next())for(var o=(a=h(a.value.drmInfos)).next();!o.done;o=a.next())zt(o.value,at(t.f.servers),at(t.f.advanced||{}));return a=function(e,t){for(var n=new Set,i=h(t),r=i.next();!r.done;r=i.next()){var a=h(r.value.drmInfos);for(r=a.next();!r.done;r=a.next())n.add(r.value)}for(r=(i=h(n)).next();!r.done;r=i.next())zt(r.value,at(e.f.servers),at(e.f.advanced||{}));a=e.H?"required":"optional";var o=e.H?["persistent-license"]:["temporary"];for(i=new Map,r=(n=h(n)).next();!r.done;r=n.next())r=r.value,i.set(r.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:o,label:r.keySystem,drmInfos:[]});for(r=(n=h(t)).next();!r.done;r=n.next()){a=(r=r.value).audio,o=r.video;var s=a?st(a.mimeType,a.codecs):"",u=o?st(o.mimeType,o.codecs):"",c=h(r.drmInfos);for(r=c.next();!r.done;r=c.next()){r=r.value;var l=i.get(r.keySystem);l.drmInfos.push(r),r.distinctiveIdentifierRequired&&(l.distinctiveIdentifier="required"),r.persistentStateRequired&&(l.persistentState="required"),a&&l.audioCapabilities.push({robustness:r.audioRobustness||"",contentType:s}),o&&l.videoCapabilities.push({robustness:r.videoRobustness||"",contentType:u})}}return i}(t,n),a.size?(a=_t(t,a),i?a:a.catch((function(){}))):(t.O=!0,Promise.resolve())}function Nt(e){return p((function t(){var n;return O(t,(function(t){switch(t.o){case 1:if(!(e.s&&e.a&&e.a.serverCertificate&&e.a.serverCertificate.length)){t.C(0);break}return k(t,3),A(t,e.s.setServerCertificate(e.a.serverCertificate),5);case 5:t.A||W.v("Server certificates are not supported by the key system.  The server certificate has been ignored."),C(t,0);break;case 3:return n=N(t),t.return(Promise.reject(new Me(2,6,6004,n.message)))}}))}))}function Pt(e){var t=e.a?e.a.initData:[];return t.forEach((function(t){return Dt(e,t.initDataType,t.initData)})),e.w.forEach((function(t){return Ot(e,t)})),t.length||e.w.length||e.u.resolve(),e.u}function Mt(e,t,n){for(var i=e.b.values(),r=(i=h(i)).next();!r.done;r=i.next())if(It.Xa(n,r.value.initData)&&!pt("Tizen 2"))return void W.debug("Ignoring duplicate init data.");Dt(e,t,n)}function Rt(e){return e?e.keySystem:""}function Lt(e,t){return!!pt("Edge/")||e.B.has(t)}function Ut(e){return e=Y(e=e.b.keys(),(function(e){return e.sessionId})),Array.from(e)}function _t(e,t){if(1==t.size&&t.has(""))return Promise.reject(new Me(2,6,6e3));for(var n=h(t.values()),i=n.next();!i.done;i=n.next())0==(i=i.value).audioCapabilities.length&&delete i.audioCapabilities,0==i.videoCapabilities.length&&delete i.videoCapabilities;var r=n=new Re;return[!0,!1].forEach(function(e){var n=this;t.forEach((function(t,i){t.drmInfos.some((function(e){return!!e.licenseServerUri}))==e&&(r=r.catch(function(){if(!this.c)return navigator.requestMediaKeySystemAccess(i,[t])}.bind(n)))}))}.bind(e)),r=(r=r.catch((function(){return Promise.reject(new Me(2,6,6001))}))).then(function(e){if(this.c)return Promise.reject();this.B.clear();var n=e.getConfiguration(),i=n.videoCapabilities||[],r=h(n.audioCapabilities||[]);for(n=r.next();!n.done;n=r.next())this.B.add(n.value.contentType);for(n=(i=h(i)).next();!n.done;n=i.next())this.B.add(n.value.contentType);i=e.keySystem,r=[];var a=[],o=[],s=[];return function(e,t,n,i,r){e.forEach((function(e){if(t.includes(e.licenseServerUri)||t.push(e.licenseServerUri),e.serverCertificate&&(n.some((function(t){return It.Xa(t,e.serverCertificate)}))||n.push(e.serverCertificate)),e.initData&&e.initData.forEach((function(e){i.some((function(t){return!(!t.keyId||t.keyId!=e.keyId)||t.initDataType==e.initDataType&&It.Xa(t.initData,e.initData)}))||i.push(e)})),e.keyIds)for(var a=0;a<e.keyIds.length;++a)r.includes(e.keyIds[a])||r.push(e.keyIds[a])}))}((n=t.get(e.keySystem)).drmInfos,r,a,o,s),1<a.length&&W.v("Multiple unique server certificates found! Only the first will be used."),1<r.length&&W.v("Multiple unique license server URIs found! Only the first will be used."),this.a={keySystem:i,licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:(n.audioCapabilities?n.audioCapabilities[0].robustness:"")||"",videoRobustness:(n.videoCapabilities?n.videoCapabilities[0].robustness:"")||"",serverCertificate:a[0],initData:o,keyIds:s},this.a.licenseServerUri?e.createMediaKeys():Promise.reject(new Me(2,6,6012,this.a.keySystem))}.bind(e)).then(function(e){if(this.c)return Promise.reject();W.info("Created MediaKeys object for key system",this.a.keySystem),this.s=e,this.O=!0}.bind(e)).catch(function(e){if(!this.c)return this.a=null,this.B.clear(),e instanceof Me?Promise.reject(e):Promise.reject(new Me(2,6,6002,e.message))}.bind(e)),n.reject(),r}function Ot(e,t){try{W.I("Attempting to load an offline session",t);var n=e.s.createSession("persistent-license")}catch(t){var i=new Me(2,6,6005,t.message);return e.g(i),Promise.reject(i)}e.l.m(n,"message",e.bf.bind(e)),e.l.m(n,"keystatuseschange",e.Ze.bind(e));var r={initData:null,loaded:!1,Pd:1/0,Va:null};return e.b.set(n,r),n.load(t).then(function(e){return this.c?Promise.reject():(W.N("Loaded offline session",t,e),e?(r.loaded=!0,Vt(this)&&this.u.resolve(),n):(this.b.delete(n),void this.g(new Me(2,6,6013))))}.bind(e),function(e){this.c||(this.b.delete(n),this.g(new Me(2,6,6005,e.message)))}.bind(e))}function Dt(e,t,n){try{if(e.H){W.I("Creating new persistent session");var i=e.s.createSession("persistent-license")}else W.I("Creating new temporary session"),i=e.s.createSession()}catch(t){return void e.g(new Me(2,6,6005,t.message))}e.l.m(i,"message",e.bf.bind(e)),e.l.m(i,"keystatuseschange",e.Ze.bind(e)),e.b.set(i,{initData:n,loaded:!1,Pd:1/0,Va:null});try{n=e.f.initDataTransform(n,e.a)}catch(n){return t=n,n instanceof Me||(t=new Me(2,6,6016,n)),void e.g(t)}i.generateRequest(t,n.buffer).catch((function(t){if(!e.c){if(e.b.delete(i),t.errorCode&&t.errorCode.systemCode){var n=t.errorCode.systemCode;0>n&&(n+=Math.pow(2,32)),n="0x"+n.toString(16)}e.g(new Me(2,6,6006,t.message,t,n))}}))}function Ft(e,t){if(Rt(t).startsWith("com.apple.fps")){var n=t.serverCertificate;e=rt(e,it(e),n)}return e}function jt(e,t){var n=t.target;W.I("Sending license request for session",n.sessionId,"of type",t.messageType);var i=e.b.get(n),r=e.a.licenseServerUri,a=e.f.advanced[e.a.keySystem];"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),(r=Ye([r],e.f.retryParameters)).body=t.message,r.method="POST",r.licenseRequestType=t.messageType,r.sessionId=n.sessionId,"com.microsoft.playready"!=e.a.keySystem&&"com.chromecast.playready"!=e.a.keySystem||function(e){var t=bt(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){W.debug("Unwrapping PlayReady request.");for(var n=(t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader"),i=0;i<n.length;++i)e.headers[n[i].getElementsByTagName("name")[0].textContent]=n[i].getElementsByTagName("value")[0].textContent;e.body=It.Za(t.getElementsByTagName("Challenge")[0].textContent).buffer}else W.debug("PlayReady request is already unwrapped."),e.headers["Content-Type"]="text/xml; charset=utf-8"}(r),e.a.keySystem.startsWith("com.apple.fps")&&e.f.fairPlayTransform&&function(e){var t=new Uint8Array(e.body);t="spc="+It.fd(t),e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=wt(t)}(r);var o=Date.now();e.G.Wb.request(2,r).promise.then(function(e){return this.c?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&this.f.fairPlayTransform&&function(e){try{var t=yt(e.data)}catch(e){return}"<ckc>"===(t=t.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(e){}e.data=It.Za(t).buffer}(e),this.K+=(Date.now()-o)/1e3,W.I("Updating session",n.sessionId),n.update(e.data).then(function(){var e=this;this.G.onEvent(new H("drmsessionupdate")),i&&(i.Va&&i.Va.resolve(),new Ce((function(){i.loaded=!0,Vt(e)&&e.u.resolve()})).T(Ht))}.bind(this)))}.bind(e),function(e){this.c||(e=new Me(2,6,6007,e),this.g(e),i&&i.Va&&i.Va.reject(e))}.bind(e)).catch(function(e){this.c||(e=new Me(2,6,6008,e.message),this.g(e),i&&i.Va&&i.Va.reject(e))}.bind(e))}function Kt(e,t){var n=t.audio,i=t.video;if(n&&n.encrypted&&!Lt(e,st(n.mimeType,n.codecs))||i&&i.encrypted&&!Lt(e,st(i.mimeType,i.codecs)))return!1;var r=Rt(e.a);return 0==t.drmInfos.length||t.drmInfos.some((function(e){return e.keySystem==r}))}function Bt(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=0;i<e.length;i++)for(var r=0;r<t.length;r++)if(e[i].keySystem==t[r].keySystem){var a=e[i];r=t[r];var o=[];o=(o=o.concat(a.initData||[])).concat(r.initData||[]);var s=[];s=(s=s.concat(a.keyIds)).concat(r.keyIds),n.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||r.persistentStateRequired,videoRobustness:a.videoRobustness||r.videoRobustness,audioRobustness:a.audioRobustness||r.audioRobustness,serverCertificate:a.serverCertificate||r.serverCertificate,initData:o,keyIds:s});break}return n}function Gt(e){return p((function t(){var n;return O(t,(function(t){if(1===t.o)return n=Array.from(e.b.keys()),e.b.clear(),A(t,Promise.all(n.map((function(e){return p((function t(){return O(t,(function(t){switch(t.o){case 1:return W.I("Closing session",e.sessionId),k(t,2),A(t,Promise.all([e.close(),e.closed]),4);case 4:C(t,0);break;case 2:N(t),I(t)}}))}))}))),0)}))}))}function Vt(e){return $(e=e.b.values(),(function(e){return e.loaded}))}function zt(t,n,i){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=[]),(i=i.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}V("shaka.util.Uint8ArrayUtils.toBase64",It.fd),It.Za=function(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n},V("shaka.util.Uint8ArrayUtils.fromBase64",It.Za),It.ud=function(t){for(var n=new Uint8Array(t.length/2),i=0;i<t.length;i+=2)n[i/2]=e.parseInt(t.substr(i,2),16);return n},V("shaka.util.Uint8ArrayUtils.fromHex",It.ud),It.gd=function(e){for(var t="",n=0;n<e.length;++n){var i=e[n].toString(16);1==i.length&&(i="0"+i),t+=i}return t},V("shaka.util.Uint8ArrayUtils.toHex",It.gd),It.Xa=function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0},V("shaka.util.Uint8ArrayUtils.equal",It.Xa),It.concat=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var i=n=0;i<t.length;++i)n+=t[i].length;n=new Uint8Array(n);for(var r=i=0;r<t.length;++r)n.set(t[r],i),i+=t[r].length;return n},V("shaka.util.Uint8ArrayUtils.concat",It.concat),(i=kt.prototype).destroy=function(){var e=this;return p((function t(){return O(t,(function(t){switch(t.o){case 1:return e.c?A(t,e.ia,0):(e.c=!0,A(t,function(e){return p((function t(){return O(t,(function(t){switch(t.o){case 1:return e.l.release(),e.l=null,e.u.reject(),e.Z.stop(),e.Z=null,e.L.stop(),e.L=null,A(t,Gt(e),2);case 2:if(!e.j){t.C(3);break}return k(t,4),A(t,e.j.setMediaKeys(null),6);case 6:C(t,5);break;case 4:N(t);case 5:e.j=null;case 3:e.a=null,e.B.clear(),e.s=null,e.w=[],e.f=null,e.g=null,e.G=null,I(t)}}))}))}(e),4));case 4:e.ia.resolve(),t.C(0)}}))}))},i.configure=function(e){this.f=e},i.ic=function(e){var t=this;if(!this.s)return this.l.Ha(e,"encrypted",(function(){t.g(new Me(2,6,6010))})),Promise.resolve();this.j=e,this.l.Ha(this.j,"play",(function(){for(var e=0;e<t.J.length;e++)jt(t,t.J[e]);t.ka=!0,t.J=[]})),"webkitCurrentPlaybackTargetIsWireless"in this.j&&this.l.m(this.j,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Gt(t)})),e=(e=this.j.setMediaKeys(this.s)).catch((function(e){return Promise.reject(new Me(2,6,6003,e.message))}));var n=Nt(this);return Promise.all([e,n]).then((function(){if(t.c)return Promise.reject();Pt(t),t.a.initData.length||t.w.length||t.l.m(t.j,"encrypted",(function(e){return Mt(t,e.initDataType,new Uint8Array(e.initData))}))})).catch((function(e){if(!t.c)return Promise.reject(e)}))},i.lc=function(){for(var e=1/0,t=this.b.keys(),n=(t=h(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.bf=function(e){this.j&&this.f.delayLicenseRequestUntilPlayed&&this.j.paused&&!this.ka?this.J.push(e):jt(this,e)},i.Ze=function(e){e=e.target,W.N("Key status changed for session",e.sessionId);var t=this.b.get(e),n=!1;e.keyStatuses.forEach(function(e,i){if("string"==typeof i){var r=i;i=e,e=r}if(!("com.microsoft.playready"!=this.a.keySystem||16!=i.byteLength||pt("Tizen")||pt("VITIS")||pt("Web0S")||pt("TiVo"))){var a=(r=new DataView(i)).getUint32(0,!0),o=r.getUint16(4,!0),s=r.getUint16(6,!0);r.setUint32(0,a,!1),r.setUint16(4,o,!1),r.setUint16(6,s,!1)}"com.microsoft.playready"==this.a.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(t.loaded=!0),"expired"==e&&(n=!0),r=It.gd(new Uint8Array(i)),this.na.set(r,e)}.bind(this));var i=e.expiration-Date.now();(0>i||n&&1e3>i)&&t&&!t.Va&&(W.debug("Session has expired",e.sessionId),this.b.delete(e),e.close().catch((function(){}))),Vt(this)&&(this.u.resolve(),this.L.T(Wt))};var Ht=5,Wt=.5;function qt(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function Xt(){}function Yt(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function $t(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function Jt(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=e.length-1;0<=i&&e.end(i)>t;--i)n+=e.end(i)-Math.max(e.start(i),t);return n}function Zt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}qt.prototype.init=function(e){var t=muxjs.mp4.probe;e=new Uint8Array(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},qt.prototype.b=function(e,t){var n=new Uint8Array(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},qt.prototype.c=function(){this.a.resetCaptionStream()},Xt.prototype.init=function(){},Xt.prototype.b=function(){},Xt.prototype.c=function(){};var Qt={Of:function(e,t){return e.reduce(function(e,t,n){return t.catch(e.bind(null,n))}.bind(null,t),Promise.reject())},md:function(e,t){return e.concat(t)},Tc:function(){},jb:function(e){return null!=e}};function en(e,t){if(0==t.length)return e;var n=t.map((function(e){return new pe(e)}));return e.map((function(e){return new pe(e)})).map((function(e){return n.map(e.resolve.bind(e))})).reduce(Qt.md,[]).map((function(e){return e.toString()}))}function tn(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}var nn={tb:"video",hc:"audio",Na:"text",Lh:"image",Jh:"application"},rn=1/15;function an(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.l.bind(this)),this.a.on("done",this.j.bind(this))}function on(t,n){return!(!e.muxjs||"mp2t"!=t.toLowerCase().split(";")[0].split("/")[1])&&(n?MediaSource.isTypeSupported(sn(n,t)):MediaSource.isTypeSupported(sn("audio",t))||MediaSource.isTypeSupported(sn("video",t)))}function sn(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var i=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(i){var r="avc1.",a=i[1],o=Number(i[2]);r=("66"==a?r+"4200":"77"==a?r+"4d00":r+"6400")+(o>>4).toString(16),r+=(15&o).toString(16),n=n.replace(i[0],r)}return n}function un(e,t,n){this.startTime=e,this.direction=pn,this.endTime=t,this.payload=n,this.region=new Tn,this.position=null,this.positionAlign=cn,this.size=0,this.textAlign=ln,this.writingMode=mn,this.lineInterpretation=gn,this.line=null,this.lineHeight="",this.lineAlign=vn,this.displayAlign=hn,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=bn,this.fontStyle=En,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1}an.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},an.prototype.l=function(e){this.c=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.g.push(t)},an.prototype.j=function(){var e={data:It.concat.apply(null,this.g),captions:this.c};this.b.resolve(e),this.f=!1},V("shaka.text.Cue",un);var cn="auto";un.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:cn};var ln="center",dn={LEFT:"left",RIGHT:"right",CENTER:ln,START:"start",END:"end"};un.textAlign=dn;var hn="after",fn={BEFORE:"before",CENTER:"center",AFTER:hn};un.displayAlign=fn;var pn="ltr";un.direction={HORIZONTAL_LEFT_TO_RIGHT:pn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var mn="horizontal-tb";un.writingMode={HORIZONTAL_TOP_TO_BOTTOM:mn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var gn=0;un.lineInterpretation={LINE_NUMBER:gn,PERCENTAGE:1};var vn="start",yn={CENTER:"center",START:vn,END:"end"};un.lineAlign=yn;var bn=400;un.fontWeight={NORMAL:bn,BOLD:700};var En="normal",wn={NORMAL:En,ITALIC:"italic",OBLIQUE:"oblique"};function Tn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Sn,this.scroll=An}un.fontStyle=wn,un.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},V("shaka.text.CueRegion",Tn);var Sn=1;Tn.units={PX:0,PERCENTAGE:Sn,LINES:2};var An="";function In(e){this.g=null,this.c=e,this.f=this.u=0,this.j=1/0,this.b=this.a=null,this.s="",this.l=new Map}Tn.scrollMode={NONE:An,UP:"up"};var kn={};function xn(t){return!!(kn[t]||e.muxjs&&"application/cea-608"==t)}function Cn(e,t){"application/cea-608"!=t&&(e.g=new kn[t])}function Nn(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=h(t)).next();!s.done;s=t.next()){var u=s.value;s=u.stream,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),u.startTime+=r,u.endTime+=r,u.startTime>=e.f&&u.startTime<e.j&&(u=new un(u.startTime,u.endTime,u.text),o.get(s).get(a).push(u),s==e.s&&e.c.append([u]))}for(a=(r=h(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.l.has(a)||e.l.set(a,new Map),s=(t=h(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.l.get(a).set(s,u);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(i,e.j))}function Pn(e,t,n){this.f=e,this.g=n,this.b={},this.a=null,this.c={},this.l=new et,this.B=!1,this.s={},this.u=t,e=this.w=new Re,t=new MediaSource,this.l.Ha(t,"sourceopen",e.resolve),this.f.src=Mn(t),this.j=t}V("shaka.text.TextEngine.registerParser",(function(e,t){kn[e]=t})),V("shaka.text.TextEngine.unregisterParser",(function(e){delete kn[e]})),In.prototype.destroy=function(){return this.c=this.g=null,this.l.clear(),Promise.resolve()},In.prototype.Qc=function(e){try{return this.g.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new Me(2,2,2009,e)}},In.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))};var Mn=e.URL.createObjectURL;function Rn(e){var t=st(e.mimeType,e.codecs),n=function(e){var t=[e.mimeType];return ct.forEach((function(n,i){var r=e[i];r&&t.push(n+'="'+r+'"')})),t.join(";")}(e);return xn(t)||MediaSource.isTypeSupported(n)||on(t,e.type)}function Ln(e,t){e.a||(e.a=new In(e.g)),Cn(e.a,t)}function Un(e){return!e.j||"ended"==e.j.readyState}function _n(e,t){if("text"==t)var n=e.a.a;else n=!(n=Dn(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function On(e,t){return"text"==t?e.a.b:Yt(Dn(e,t))}function Dn(e,t){try{return e.b[t].buffered}catch(n){return t in e.b&&W.error("failed to get buffered range for "+t,n),null}}function Fn(t,n,i,r,a,o){return"text"==n?function(e,t,n,i){return Promise.resolve().then(function(){if(this.g&&this.c)if(null==n||null==i)this.g.parseInit(new Uint8Array(t));else{var e={periodStart:this.u,segmentStart:n,segmentEnd:i};e=this.g.parseMedia(new Uint8Array(t),e).filter(function(e){return e.startTime>=this.f&&e.startTime<this.j}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(n,this.f)),this.b=Math.min(i,this.j)}}.bind(e))}(t.a,i,r,a):t.s[n]?function(e,t){e.f=!0,e.b=new Re,e.g=[],e.c=[];var n=new Uint8Array(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new Me(2,3,3018)),e.b}(t.s[n],i).then(function(e){return this.a||Ln(this,"text/vtt"),e.captions&&e.captions.length&&Nn(this.a,e.captions,r,a,this.b.video.timestampOffset),Kn(this,n,this.vf.bind(this,n,e.data.buffer))}.bind(t)):(o&&e.muxjs&&(t.a||Ln(t,"text/vtt"),null==r&&null==a?t.u.init(i):t.u.b(i,(function(e){e.length&&Nn(t.a,e,r,a,t.b.video.timestampOffset)}))),Kn(t,n,t.vf.bind(t,n,i)))}function jn(e,t){return"text"==t?e.a?(e.u.c(),e.a.remove(0,1/0)):Promise.resolve():Kn(e,t,e.wf.bind(e,t,0,e.j.duration))}function Kn(e,t,n){if(e.B)return Promise.reject();if(n={start:n,p:new Re},e.c[t].push(n),1==e.c[t].length)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new Me(2,3,3017,t)):n.p.reject(new Me(2,3,3015,i)),Gn(e,t)}return n.p}function Bn(e,t){if(e.B)return Promise.reject();var n,i=[];for(n in e.b){var r=new Re,a={start:function(e){e.resolve()}.bind(null,r),p:r};e.c[n].push(a),i.push(r),1==e.c[n].length&&a.start()}return Promise.all(i).then(function(){try{t()}catch(t){var e=Promise.reject(new Me(2,3,3015,t))}for(var n in this.b)Gn(this,n);return e}.bind(e),function(e){throw e}.bind(e))}function Gn(e,t){e.c[t].shift();var n=e.c[t][0];if(n)try{n.start()}catch(i){n.p.reject(new Me(2,3,3015,i)),Gn(e,t)}}(i=Pn.prototype).destroy=function(){var e=this;this.B=!0;var t,n=[];for(t in this.c){var i=this.c[t],r=i[0];for(this.c[t]=i.slice(0,1),r&&n.push(r.p.catch(Qt.Tc)),r=1;r<i.length;++r)i[r].p.reject()}for(var a in this.a&&n.push(this.a.destroy()),this.g&&n.push(this.g.destroy()),this.s)n.push(this.s[a].destroy());return Promise.all(n).then((function(){e.l&&(e.l.release(),e.l=null),e.f&&(e.f.removeAttribute("src"),e.f.load(),e.f=null),e.j=null,e.a=null,e.g=null,e.b={},e.s={},e.u=null,e.c={}}))},i.init=function(e,t){var n=this;return p((function i(){var r;return O(i,(function(i){switch(i.o){case 1:return r=nn,A(i,n.w,2);case 2:e.forEach((function(e,i){var a=st(e.mimeType,e.codecs);i==r.Na?Ln(n,a):(!t&&MediaSource.isTypeSupported(a)||!on(a,i)||(n.s[i]=new an,a=sn(i,a)),a=n.j.addSourceBuffer(a),n.l.m(a,"error",n.vh.bind(n,i)),n.l.m(a,"updateend",n.Zb.bind(n,i)),n.b[i]=a,n.c[i]=[])})),I(i)}}))}))},i.vd=function(e){if(e.total=Zt(this.f.buffered),e.audio=Zt(Dn(this,"audio")),e.video=Zt(Dn(this,"video")),e.text=[],this.a){var t=this.a.a,n=this.a.b;null!=t&&null!=n&&e.text.push({start:t,end:n})}},i.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):Kn(this,e,this.wf.bind(this,e,t,n))},i.flush=function(e){return"text"==e?Promise.resolve():Kn(this,e,this.Tf.bind(this,e))},i.endOfStream=function(e){return Bn(this,function(){Un(this)||(e?this.j.endOfStream(e):this.j.endOfStream())}.bind(this))},i.Ta=function(e){return Bn(this,function(){this.j.duration=e}.bind(this))},i.ra=function(){return this.j.duration},i.vf=function(e,t){this.b[e].appendBuffer(t)},i.wf=function(e,t,n){n<=t?this.Zb(e):this.b[e].remove(t,n)},i.Hf=function(e){var t=this.b[e].appendWindowStart,n=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=n,this.Zb(e)},i.Tf=function(e){this.f.currentTime-=.001,this.Zb(e)},i.uh=function(e,t){0>t&&(t+=.001),this.b[e].timestampOffset=t,this.Zb(e)},i.qh=function(e,t,n){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=n,this.b[e].appendWindowStart=t,this.Zb(e)},i.vh=function(e){this.c[e][0].p.reject(new Me(2,3,3014,this.f.error?this.f.error.code:0))},i.Zb=function(e){var t=this.c[e][0];t&&(t.p.resolve(),Gn(this,e))};var Vn={Ce:function(e,t){function n(e){var t="";e.video&&(t=ut(e.video.codecs)[0]);var n="";return e.audio&&(n=ut(e.audio.codecs)[0]),t+"-"+n}var i=e.periods.reduce((function(e,t){return e.concat(t.variants)}),[]);i=Vn.He(i,t);for(var r=new q,a=(i=h(i)).next();!a.done;a=i.next()){var o=n(a=a.value);r.push(o,a)}var s=null,u=1/0;for(r.forEach((function(e,t){for(var n=0,i=0,r=h(t),a=r.next();!a.done;a=r.next())n+=a.value.bandwidth||0,++i;n/=i,W.debug("codecs",e,"avg bandwidth",n),n<u&&(s=e,u=n)})),i=(r=h(e.periods)).next();!i.done;i=r.next())(i=i.value).variants=i.variants.filter((function(e){return n(e)==s||(W.debug("Dropping Variant (better codec available)",e),!1)}))},Id:function(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))},ve:function(e,t,n){var i=!1;return e.forEach((function(e){var r=e.allowedByApplication;e.allowedByApplication=Vn.Id(e,t,n),r!=e.allowedByApplication&&(i=!0)})),i},filterNewPeriod:function(e,t,n,i){i.variants=i.variants.filter((function(i){if(e&&e.O&&!Kt(e,i))return W.debug("Dropping variant - not compatible with key system",i),!1;var r=i.audio;return i=i.video,r&&!Rn(r)?(W.debug("Dropping variant - audio not compatible with platform",Vn.Qb(r)),!1):i&&!Rn(i)?(W.debug("Dropping variant - video not compatible with platform",Vn.Qb(i)),!1):r&&t&&!Vn.we(r,t)?(W.debug("Droping variant - not compatible with active audio","active audio",Vn.Qb(t),"variant.audio",Vn.Qb(r)),!1):!(i&&n&&!Vn.we(i,n)&&(W.debug("Droping variant - not compatible with active video","active video",Vn.Qb(n),"variant.video",Vn.Qb(i)),1))})),i.textStreams=i.textStreams.filter((function(e){var t=xn(st(e.mimeType,e.codecs));return t||W.debug("Dropping text stream. Is not supported by the platform.",e),t}))},we:function(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]},se:function(e){var t=e.audio,n=e.video,i=t?t.codecs:null,r=n?n.codecs:null,a=[];r&&a.push(r),i&&a.push(i);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var u=new Set;return t&&t.roles.forEach((function(e){return u.add(e)})),n&&n.roles.forEach((function(e){return u.add(e)})),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:o,codecs:a.join(", "),audioCodec:i,videoCodec:r,primary:e.primary,roles:Array.from(u),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e},ed:function(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}},Ad:function(e){return e.__shaka_id||(e.__shaka_id=Vn.Jg++),e.__shaka_id},Jg:0,Ag:function(e){var t=Vn.Ne(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),t},Me:function(e){var t=Vn.Ne(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind]),t},Ne:function(e){return{id:Vn.Ad(e),active:!1,type:"",bandwidth:0,language:ee(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}},Ub:function(e){return e.allowedByApplication&&e.allowedByKeySystem},pg:function(e){return e.filter((function(e){return Vn.Ub(e)}))},He:function(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map,r=(n=h(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(r=n.filter((function(e){return e<=t})),r.length?i.get(Math.max.apply(null,r)):i.get(Math.min.apply(null,n)))},kc:function(e,t,n){var i=e,r=e.filter((function(e){return e.primary}));r.length&&(i=r);var a=i.length?i[0].language:"";if(i=i.filter((function(e){return e.language==a})),t){var o=ie(ee(t),e.map((function(e){return e.language})));o&&(i=e.filter((function(e){return ee(e.language)==o})))}if(n){if((e=Vn.Ge(i,n)).length)return e;W.v("No exact match for the text role could be found.")}else if((e=i.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=i.map((function(e){return e.roles})).reduce(Qt.md,[])).length?Vn.Ge(i,e[0]):i},Ge:function(e,t){return e.filter((function(e){return e.roles.includes(t)}))},Le:function(e,t,n){for(var i=0;i<n.length;i++)if(n[i].audio==e&&n[i].video==t)return n[i];return null},Bg:function(e){return"audio"==e.type},Fg:function(e){return"video"==e.type},xg:function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t},Qb:function(e){return Vn.Bg(e)?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:Vn.Fg(e)?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}};function zn(){this.j=null,this.f=!1,this.b=new he,this.g=[],this.l=!1,this.a=this.c=null}function Hn(e,t){return e&&(t=t.filter((function(t){return Vn.Id(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function Wn(e,t){this.a=e,this.b=t}function qn(e,t){var n=new Wn(2,6),i=$n,r=i.a,a=n.b-r.b;(0<(n.a-r.a||a)?i.c:i.b)(i.a,n,e,t)}function Xn(e,t,n,i){W.ba([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Yn(e,t,n,i){W.Gc([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}V("shaka.abr.SimpleAbrManager",zn),zn.prototype.stop=function(){this.j=null,this.f=!1,this.g=[],this.c=null},zn.prototype.stop=zn.prototype.stop,zn.prototype.init=function(e){this.j=e},zn.prototype.init=zn.prototype.init,zn.prototype.chooseVariant=function(){var e=Hn(this.a.restrictions,this.g),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.g.length&&!e.length&&(W.v("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),e=[(e=Hn(null,this.g))[0]]);for(var n=e[0]||null,i=0;i<e.length;++i){var r=e[i],a=r.bandwidth/this.a.bandwidthDowngradeTarget,o=(e[i+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;W.N("Bandwidth ranges:",(r.bandwidth/1e6).toFixed(3),(a/1e6).toFixed(3),(o/1e6).toFixed(3)),t>=a&&t<=o&&(n=r)}return this.c=Date.now(),n},zn.prototype.chooseVariant=zn.prototype.chooseVariant,zn.prototype.enable=function(){this.f=!0},zn.prototype.enable=zn.prototype.enable,zn.prototype.disable=function(){this.f=!1},zn.prototype.disable=zn.prototype.disable,zn.prototype.segmentDownloaded=function(e,t){W.N("Segment downloaded:","deltaTimeMs="+e,"numBytes="+t,"lastTimeChosenMs="+this.c,"enabled="+this.f);var n=this.b;if(!(16e3>t)){var i=8e3*t/e,r=e/1e3;n.a+=t,le(n.b,r,i),le(n.c,r,i)}if(null!=this.c&&this.f)e:{if(W.N("Suggesting Streams..."),this.l){if(Date.now()-this.c<1e3*this.a.switchInterval){W.N("Still within switch interval...");break e}}else{if(!(128e3<=this.b.a)){W.N("Still waiting for a good estimate...");break e}this.l=!0}n=this.chooseVariant(),i=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),W.debug("Calling switch_(), bandwidth="+Math.round(i/1e3)+" kbps"),this.j(n)}},zn.prototype.segmentDownloaded=zn.prototype.segmentDownloaded,zn.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},zn.prototype.getBandwidthEstimate=zn.prototype.getBandwidthEstimate,zn.prototype.setVariants=function(e){this.g=e},zn.prototype.setVariants=zn.prototype.setVariants,zn.prototype.configure=function(e){this.a=e},zn.prototype.configure=zn.prototype.configure,Wn.prototype.toString=function(){return"v"+this.a+"."+this.b};var $n=null,Jn="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Zn="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Qn=["loop","playbackRate"],ei=["pause","play"],ti="abrstatuschanged adaptation buffering drmsessionupdate emsg error expirationupdated largegap loading manifestparsed onstatechange onstateidle streaming textchanged texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged".split(" "),ni={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},ii={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},ri=[["getConfiguration","configure"]],ai=[["isTextTrackVisible","setTextTrackVisibility"]],oi="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),si=["attach","detach","load","unload"];function ui(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof H){var n={};for(r in t){var i=t[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(n=(i=h(Object.getOwnPropertyNames(t))).next();!n.done;n=i.next())r.add(n.value);for(i={},n=(r=h(r)).next();!n.done;n=r.next())i[n=n.value]=t[n];r={__type__:"Error",contents:i}}else if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)r.start.push(t.start(n)),r.end.push(t.end(n));else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return r}}))}function ci(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var i,r=Error(n.message);for(i in n)r[i]=n[i];n=r}else n=t;return n}))}function li(e,t,n,i,r,a){this.L=e,this.f=new Ce(t),this.O=n,this.s=!1,this.B=i,this.K=r,this.H=a,this.b=this.j=!1,this.J="",this.l=null,this.u=this.Qd.bind(this),this.w=this.Qg.bind(this),this.a={video:{},player:{}},this.G=0,this.c={},this.g=null,bi.add(this)}var di=!1,hi=null;function fi(e){for(var t=h(bi),n=t.next();!n.done;n=t.next())pi(n.value,e)}function pi(e,t){W.debug("CastSender: onExistingSessionJoined");var n=e.H();e.g=new Re,e.s=!0,e.Sd(n,t)}function mi(e){for(var t=h(bi),n=t.next();!n.done;n=t.next()){n=n.value;var i=e;W.debug("CastSender: receiver status",i),di="available"==i,n.f.gb()}}function gi(e){var t=hi;t.removeUpdateListener(e.u),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.w)}function vi(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new Me(1,7,7e3))}}function yi(e,t){var n=ui(t),i=hi;try{i.sendMessage("urn:x-cast:com.google.shaka.v2",n,(function(){}),W.error)}catch(t){throw W.error("Cast session sendMessage threw",t),n=new Me(2,8,8005,t),e.B("player",new H("error",{detail:n})),e.Nb(),n}}(i=li.prototype).destroy=function(){return bi.delete(this),vi(this),hi&&gi(this),this.f&&(this.f.stop(),this.f=null),this.K=this.B=null,this.b=this.j=!1,this.w=this.u=this.g=this.c=this.a=this.l=null,Promise.resolve()},i.ha=function(){return this.b},i.ad=function(){return this.J},i.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable&&this.L.length){this.j=!0,this.f.gb();var t=new chrome.cast.SessionRequest(this.L);t=new chrome.cast.ApiConfig(t,fi.bind(this),mi.bind(this),"origin_scoped"),chrome.cast.initialize(t,(function(){W.debug("CastSender: init")}),(function(e){W.error("CastSender: init error",e)})),di&&this.f.T(.02),(t=hi)&&t.status!=chrome.cast.SessionStatus.STOPPED?(W.debug("CastSender: re-using existing connection"),pi(this,t)):hi=null}},i.ae=function(e){this.l=e,this.b&&yi(this,{type:"appData",appData:this.l})},i.cast=function(e){return this.j?di?this.b?Promise.reject(new Me(1,8,8002)):(this.g=new Re,chrome.cast.requestSession(this.Sd.bind(this,e),this.Ye.bind(this)),this.g):Promise.reject(new Me(1,8,8001)):Promise.reject(new Me(1,8,8e3))},i.Nb=function(){if(this.b){if(vi(this),hi){gi(this);try{hi.stop((function(){}),(function(){}))}catch(e){}hi=null}this.Qd()}},i.get=function(e,t){if("video"==e){if(ei.includes(t))return this.lf.bind(this,e,t)}else if("player"==e){if(ii[t]&&!this.get("player","isLive")())return function(){};if(oi.includes(t))return this.lf.bind(this,e,t);if(si.includes(t))return this.hh.bind(this,e,t);if(ni[t])return this.ef.bind(this,e,t)}return this.ef(e,t)},i.set=function(e,t,n){this.a[e][t]=n,yi(this,{type:"set",targetName:e,property:t,value:n})},i.Sd=function(e,t){W.debug("CastSender: onSessionInitiated"),hi=t,t.addUpdateListener(this.u),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.w),this.Qd(),yi(this,{type:"init",initState:e,appData:this.l}),this.g.resolve()},i.Ye=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new Me(2,8,t,e))},i.ef=function(e,t){return this.a[e][t]},i.lf=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];yi(this,{type:"call",targetName:e,methodName:t,args:i})},i.hh=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];r=new Re;var a=this.G.toString();this.G++,this.c[a]=r;try{yi(this,{type:"asyncCall",targetName:e,methodName:t,args:i,id:a})}catch(e){r.reject(e)}return r},i.Qd=function(){var e=!!hi&&"connected"==hi.status;if(W.debug("CastSender: connection status",e),this.b&&!e){for(var t in this.K(),this.a)this.a[t]={};vi(this)}this.J=(this.b=e)?hi.receiver.friendlyName:"",this.f.gb()},i.Qg=function(e,t){var n=ci(t);switch(W.N("CastSender: message",n),n.type){case"event":var i=n.event;this.B(n.targetName,new H(i.type,i));break;case"update":for(var r in i=n.update)for(var a in n=this.a[r]||{},i[r])n[a]=i[r][a];this.s&&(this.O(),this.s=!1);break;case"asyncComplete":if(r=n.id,n=n.error,a=this.c[r],delete this.c[r],a)if(n){for(i in r=new Me(n.severity,n.category,n.code),n)r[i]=n[i];a.reject(r)}else a.resolve()}};var bi=new Set;function Ei(e,t,n){var i=this;X.call(this),this.c=e,this.b=t,this.l=this.g=this.f=this.s=this.j=null,this.w=n,this.u=new Map,this.a=new li(n,(function(){return Si(i)}),(function(){return Ai(i)}),(function(e,t){return xi(i,e,t)}),(function(){return Ii(i)}),(function(){return Ti(i)})),function(e){for(var t in e.a.init(),e.l=new et,Jn.forEach(function(e){this.l.m(this.c,e,this.H.bind(this))}.bind(e)),ti.forEach(function(e){this.l.m(this.b,e,this.B.bind(this))}.bind(e)),e.j={},e.c)Object.defineProperty(e.j,t,{configurable:!1,enumerable:!0,get:e.G.bind(e,t),set:e.J.bind(e,t)});e.s={},wi(e,(function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return ki(e,t)}})})),function(e){var t=new Map;wi(e,(function(n,i){if(t.has(i)){var r=t.get(i);n.length<r.length?e.u.set(n,r):e.u.set(r,n)}else t.set(i,n)}))}(e),e.f=new X,e.f.Dc=e.j,e.g=new X,e.g.Dc=e.s}(this)}function wi(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var i=e.b,r=new Set;for(a in i)n(a)&&(r.add(a),t(a,i[a]));for(var a=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});a&&a!=o;){for(var s=h(Object.getOwnPropertyNames(a)),u=s.next();!u.done;u=s.next())n(u=u.value)&&(r.add(u),t(u,i[u]));a=Object.getPrototypeOf(a)}}function Ti(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.b.Nc(),startTime:null};return e.c.pause(),Qn.forEach(function(e){t.video[e]=this.c[e]}.bind(e)),e.c.ended||(t.startTime=e.c.currentTime),ri.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.player[n]=e}.bind(e)),ai.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.playerAfterLoad[n]=e}.bind(e)),t}function Si(e){e.dispatchEvent(new H("caststatuschanged"))}function Ai(e){e.f.dispatchEvent(new H(e.j.paused?"pause":"play"))}function Ii(e){ri.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e));var t=e.a.get("player","getAssetUri")(),n=e.a.get("video","ended"),i=Promise.resolve(),r=e.c.autoplay,a=null;n||(a=e.a.get("video","currentTime")),t&&(e.c.autoplay=!1,i=e.b.load(t,a));var o={};Qn.forEach(function(e){o[e]=this.a.get("video",e)}.bind(e)),i.then((function(){e.c&&(Qn.forEach(function(e){this.c[e]=o[e]}.bind(e)),ai.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e)),e.c.autoplay=r,t&&e.c.play())}),(function(t){e.b.dispatchEvent(new H("error",{detail:t}))}))}function ki(e,t){if(e.u.has(t)&&(t=e.u.get(t)),"addEventListener"==t)return e.g.addEventListener.bind(e.g);if("removeEventListener"==t)return e.g.removeEventListener.bind(e.g);if("getMediaElement"==t)return function(){return this.j}.bind(e);if("getSharedConfiguration"==t)return W.v("Can't share configuration across a network. Returning copy."),e.a.get("player","getConfiguration");if("getNetworkingEngine"==t)return e.a.ha()&&W.v("NOTE: getNetworkingEngine() is always local!"),e.b.mc.bind(e.b);if(e.a.ha()){if("getManifest"==t||"drmInfo"==t)return function(){return W.ba(t+"() does not work while casting!"),null};if("getManifestUri"==t)return qn("getManifestUri",'Please use "getAssetUri" instead.'),ki(e,"getAssetUri");if("attach"==t||"detach"==t)return function(){return W.ba(t+"() does not work while casting!"),Promise.resolve()}}return e.a.ha()&&0==Object.keys(e.a.a.video).length&&ni[t]||!e.a.ha()?e.b[t].bind(e.b):e.a.get("player",t)}function xi(e,t,n){e.a.ha()&&("video"==t?e.f.dispatchEvent(n):"player"==t&&e.g.dispatchEvent(n))}function Ci(e,t,n,i){var r=this;X.call(this),this.a=e,this.b=t,this.c=new et,this.H={video:e,player:t},this.w=n||function(){},this.J=i||function(e){return e},this.B=!1,this.j=!0,this.g=0,this.u=!1,this.s=!0,this.l=this.f=null,this.G=new Ce((function(){Pi(r)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=e.$e.bind(e),t.onSenderDisconnected=e.$e.bind(e),t.onSystemVolumeChanged=e.Sf.bind(e),e.l=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.l.onMessage=e.Lg.bind(e),e.f=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.f.onMessage=e.Vg.bind(e),t.start(),Jn.forEach(function(e){this.c.m(this.a,e,this.gf.bind(this,"video"))}.bind(e)),ti.forEach(function(e){this.c.m(this.b,e,this.gf.bind(this,"player"))}.bind(e)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.b.ce(3840,2160):e.b.ce(1920,1080),e.c.m(e.a,"loadeddata",function(){this.u=!0}.bind(e)),e.c.m(e.b,"loading",function(){this.j=!1,Ni(this)}.bind(e)),e.c.m(e.a,"playing",function(){this.j=!1,Ni(this)}.bind(e)),e.c.m(e.a,"pause",function(){Ni(this)}.bind(e)),e.c.m(e.b,"unloading",function(){this.j=!0,Ni(this)}.bind(e)),e.c.m(e.a,"ended",function(){var e=this;new Ce((function(){e.a&&e.a.ended&&(e.j=!0,Ni(e))})).T(5)}.bind(e))}(this)}function Ni(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new H("caststatuschanged")),Mi(this)||Ui(this,0))}.bind(e))}function Pi(e){e.G.T(.5);var t={video:{},player:{}};if(Zn.forEach(function(e){t.video[e]=this.a[e]}.bind(e)),e.b.Y())for(var n in ii)0==e.g%ii[n]&&(t.player[n]=e.b[n]());for(var i in ni)0==e.g%ni[i]&&(t.player[i]=e.b[i]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.u&&(e.g+=1),Li(e,{type:"update",update:t},e.f),Mi(e)}function Mi(e){return!(!e.s||!e.a.duration&&!e.b.Y()||(Ri(e),e.s=!1,0))}function Ri(e){var t={contentId:e.b.Nc(),streamType:e.b.Y()?"LIVE":"BUFFERED",duration:e.a.duration,contentType:""};Ui(e,0,t)}function Li(e,t,n,i){e.B&&(e=ui(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Ui(e,t,n){var i=e.a.playbackRate,r=_i;i={mediaSessionId:0,playbackRate:i,playerState:r=e.j?r.IDLE:e.b.Tb()?r.Bf:e.a.paused?r.Df:r.Ef,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}},n&&(i.media=n),Li(e,{requestId:t,type:"MEDIA_STATUS",status:[i]},e.l)}e.__onGCastApiAvailable=function(e){if(e)for(var t=(e=h(bi)).next();!t.done;t=e.next())t.value.init()},z(Ei,X),V("shaka.cast.CastProxy",Ei),Ei.prototype.destroy=function(e){return e&&this.a.Nb(),this.l&&(this.l.release(),this.l=null),e=[],this.b&&(e.push(this.b.destroy()),this.b=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.s=this.j=this.c=null,Promise.all(e)},Ei.prototype.destroy=Ei.prototype.destroy,Ei.prototype.qc=function(){return this.j},Ei.prototype.getVideo=Ei.prototype.qc,Ei.prototype.$a=function(){return this.s},Ei.prototype.getPlayer=Ei.prototype.$a,Ei.prototype.xe=function(){return this.a.j&&di},Ei.prototype.canCast=Ei.prototype.xe,Ei.prototype.ha=function(){return this.a.ha()},Ei.prototype.isCasting=Ei.prototype.ha,Ei.prototype.ad=function(){return this.a.ad()},Ei.prototype.receiverName=Ei.prototype.ad,Ei.prototype.cast=function(){var e=Ti(this);return this.a.cast(e).then(function(){if(this.b)return this.b.qe()}.bind(this))},Ei.prototype.cast=Ei.prototype.cast,Ei.prototype.ae=function(e){this.a.ae(e)},Ei.prototype.setAppData=Ei.prototype.ae,Ei.prototype.xf=function(){var e=this.a;if(e.b){var t=e.H();chrome.cast.requestSession(e.Sd.bind(e,t),e.Ye.bind(e))}},Ei.prototype.suggestDisconnect=Ei.prototype.xf,Ei.prototype.Be=function(e){var t=this;return p((function n(){return O(n,(function(n){switch(n.o){case 1:return e==t.w?n.return():(t.w=e,t.a.Nb(),A(n,t.a.destroy(),2));case 2:t.a=null,t.a=new li(e,(function(){return Si(t)}),(function(){return Ai(t)}),(function(e,n){return xi(t,e,n)}),(function(){return Ii(t)}),(function(){return Ti(t)})),t.a.init(),I(n)}}))}))},Ei.prototype.changeReceiverId=Ei.prototype.Be,Ei.prototype.Nb=function(){this.a.Nb()},Ei.prototype.forceDisconnect=Ei.prototype.Nb,Ei.prototype.G=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a.ha()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a.ha()?this.a.get("video",e):("function"==typeof(e=this.c[e])&&(e=e.bind(this.c)),e)},Ei.prototype.J=function(e,t){this.a.ha()?this.a.set("video",e,t):this.c[e]=t},Ei.prototype.H=function(e){this.a.ha()||this.f.dispatchEvent(new H(e.type,e))},Ei.prototype.B=function(e){this.a.ha()||this.g.dispatchEvent(e)},z(Ci,X),V("shaka.cast.CastReceiver",Ci),Ci.prototype.isConnected=function(){return this.B},Ci.prototype.isConnected=Ci.prototype.isConnected,Ci.prototype.Dg=function(){return this.j},Ci.prototype.isIdle=Ci.prototype.Dg,Ci.prototype.destroy=function(){var e=this;return p((function t(){var n;return O(t,(function(t){switch(t.o){case 1:return e.c&&(e.c.release(),e.c=null),n=[],e.b&&(n.push(e.b.destroy()),e.b=null),e.G&&(e.G.stop(),e.G=null),e.a=null,e.H=null,e.w=null,e.B=!1,e.j=!0,e.f=null,e.l=null,A(t,Promise.all(n),2);case 2:cast.receiver.CastReceiverManager.getInstance().stop(),I(t)}}))}))},Ci.prototype.destroy=Ci.prototype.destroy,(i=Ci.prototype).$e=function(){this.g=0,this.s=!0,this.B=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Ni(this)},i.gf=function(e,t){this.b&&(Pi(this),Li(this,{type:"event",targetName:e,event:t},this.f))},i.Sf=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Li(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),Li(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},i.Vg=function(e){var t=ci(e.data);switch(W.debug("CastReceiver: message",t),t.type){case"init":this.g=0,this.u=!1,this.s=!0,function(e,t,n){for(var i in t.player)e.b[i](t.player[i]);e.w(n),n=Promise.resolve();var r=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,n=e.b.load(t.manifest,t.startTime)),n.then((function(){if(e.b){for(var n in t.video)e.a[n]=t.video[n];for(var i in t.playerAfterLoad)e.b[i](t.playerAfterLoad[i]);e.a.autoplay=r,t.manifest&&(e.a.play(),Ui(e,0))}}),(function(t){e.b.dispatchEvent(new H("error",{detail:t}))}))}(this,t.initState,t.appData),Pi(this);break;case"appData":this.w(t.appData);break;case"set":var n=t.targetName,i=t.property;if(t=t.value,"video"==n){var r=cast.receiver.CastReceiverManager.getInstance();if("volume"==i){r.setSystemVolumeLevel(t);break}if("muted"==i){r.setSystemVolumeMuted(t);break}}this.H[n][i]=t;break;case"call":(n=this.H[t.targetName])[t.methodName].apply(n,t.args);break;case"asyncCall":n=t.targetName,i=t.methodName,"player"==n&&"load"==i&&(this.g=0,this.u=!1),r=t.id,e=e.senderId;var a=this.H[n];t=a[i].apply(a,t.args),"player"==n&&"load"==i&&(t=t.then(function(){this.s=!0}.bind(this))),t.then(this.qf.bind(this,e,r,null),this.qf.bind(this,e,r))}},i.Lg=function(e){var t=ci(e.data);switch(W.debug("CastReceiver: message",t),t.type){case"PLAY":this.a.play(),Ui(this,0);break;case"PAUSE":this.a.pause(),Ui(this,0);break;case"SEEK":e=t.currentTime;var n=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),n&&"PLAYBACK_START"==n?(this.a.play(),Ui(this,0)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),Ui(this,0));break;case"STOP":this.b.qe().then(function(){this.b&&Ui(this,0)}.bind(this));break;case"GET_STATUS":Ui(this,Number(t.requestId));break;case"VOLUME":e=(n=t.volume).level,n=n.muted;var i=this.a.volume,r=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=n&&(this.a.muted=n),i==this.a.volume&&r==this.a.muted||Ui(this,0);break;case"LOAD":this.g=0,this.s=this.u=!1,e=t.media,n=t.currentTime,i=this.J(e.contentId),r=t.autoplay||!0,this.w(e.customData),r&&(this.a.autoplay=!0),this.b.load(i,n).then(function(){this.b&&Ri(this)}.bind(this)).catch(function(e){var n="LOAD_FAILED";7==e.category&&7e3==e.code&&(n="LOAD_CANCELLED"),Li(this,{requestId:Number(t.requestId),type:n},this.l)}.bind(this));break;default:W.v("Unrecognized message type from the generic Chromecast controller!",t.type),Li(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.l)}},i.qf=function(e,t,n){this.b&&Li(this,{type:"asyncComplete",id:t,error:n},this.f,e)};var _i={IDLE:"IDLE",Ef:"PLAYING",Bf:"BUFFERING",Df:"PAUSED"};function Oi(e,t){this.S=e,this.b=t==Di,this.a=0}V("shaka.util.DataViewReader",Oi);var Di=1;function Fi(){throw new Me(2,3,3e3)}function ji(){this.c=[],this.b=[],this.a=!1}function Ki(e){for(var t=null!=e.flags?12:8;e.reader.Qa()&&!e.parser.a;)e.parser.Xc(e.start+t,e.reader,e.partialOkay)}function Bi(e){for(var t=null!=e.flags?12:8,n=e.reader.M();0<n&&!e.parser.a;--n)e.parser.Xc(e.start+t,e.reader,e.partialOkay)}function Gi(e){return function(t){e(t.reader.Eb(t.reader.S.byteLength-t.reader.va()))}}function Vi(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function zi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Hi(e){var t=this;this.a=[],this.b=[],this.data=[],(new ji).P("moov",Ki).za("pssh",(function(e){if(1<e.version)W.v("Unrecognized PSSH version found!");else{var n=e.reader.S;if(n=new Uint8Array(n.buffer,n.byteOffset-12,e.size),t.data.push(n),t.a.push(It.gd(e.reader.Eb(16))),0<e.version){n=e.reader.M();for(var i=0;i<n;++i){var r=It.gd(e.reader.Eb(16));t.b.push(r)}}}})).parse(e),0==this.data.length&&W.v("No pssh box found!")}Oi.Endianness={Kh:0,Mh:Di},Oi.prototype.Qa=function(){return this.a<this.S.byteLength},Oi.prototype.hasMoreData=Oi.prototype.Qa,Oi.prototype.va=function(){return this.a},Oi.prototype.getPosition=Oi.prototype.va,Oi.prototype.dg=function(){return this.S.byteLength},Oi.prototype.getLength=Oi.prototype.dg,Oi.prototype.Ea=function(){try{var e=this.S.getUint8(this.a);return this.a+=1,e}catch(e){Fi()}},Oi.prototype.readUint8=Oi.prototype.Ea,Oi.prototype.wc=function(){try{var e=this.S.getUint16(this.a,this.b);return this.a+=2,e}catch(e){Fi()}},Oi.prototype.readUint16=Oi.prototype.wc,Oi.prototype.M=function(){try{var e=this.S.getUint32(this.a,this.b);return this.a+=4,e}catch(e){Fi()}},Oi.prototype.readUint32=Oi.prototype.M,Oi.prototype.kf=function(){try{var e=this.S.getInt32(this.a,this.b);return this.a+=4,e}catch(e){Fi()}},Oi.prototype.readInt32=Oi.prototype.kf,Oi.prototype.cc=function(){try{if(this.b)var e=this.S.getUint32(this.a,!0),t=this.S.getUint32(this.a+4,!0);else t=this.S.getUint32(this.a,!1),e=this.S.getUint32(this.a+4,!1)}catch(e){Fi()}if(2097151<t)throw new Me(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},Oi.prototype.readUint64=Oi.prototype.cc,Oi.prototype.Eb=function(e){this.a+e>this.S.byteLength&&Fi();var t=new Uint8Array(this.S.buffer,this.S.byteOffset+this.a,e);return this.a+=e,t},Oi.prototype.readBytes=Oi.prototype.Eb,Oi.prototype.V=function(e){this.a+e>this.S.byteLength&&Fi(),this.a+=e},Oi.prototype.skip=Oi.prototype.V,Oi.prototype.mf=function(e){this.a<e&&Fi(),this.a-=e},Oi.prototype.rewind=Oi.prototype.mf,Oi.prototype.seek=function(e){(0>e||e>this.S.byteLength)&&Fi(),this.a=e},Oi.prototype.seek=Oi.prototype.seek,Oi.prototype.Ud=function(){for(var e=this.a;this.Qa()&&0!=this.S.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.S.buffer,this.S.byteOffset+e,this.a-e),this.a+=1,yt(e)},Oi.prototype.readTerminatedString=Oi.prototype.Ud,V("shaka.util.Mp4Parser",ji),ji.prototype.P=function(e,t){var n=Vi(e);return this.c[n]=0,this.b[n]=t,this},ji.prototype.box=ji.prototype.P,ji.prototype.za=function(e,t){var n=Vi(e);return this.c[n]=1,this.b[n]=t,this},ji.prototype.fullBox=ji.prototype.za,ji.prototype.stop=function(){this.a=!0},ji.prototype.stop=ji.prototype.stop,ji.prototype.parse=function(e,t){var n=new Uint8Array(e);for(n=new Oi(new DataView(n.buffer,n.byteOffset,n.byteLength),0),this.a=!1;n.Qa()&&!this.a;)this.Xc(0,n,t)},ji.prototype.parse=ji.prototype.parse,ji.prototype.Xc=function(e,t,n){var i=t.va(),r=t.M(),a=t.M();switch(W.N("Parsing MP4 box",zi(a)),r){case 0:r=t.S.byteLength-i;break;case 1:r=t.cc()}var o=this.b[a];if(o){var s=null,u=null;1==this.c[a]&&(s=(u=t.M())>>>24,u&=16777215),a=i+r,n&&a>t.S.byteLength&&(a=t.S.byteLength),a-=t.va(),t=0<a?t.Eb(a):new Uint8Array(0),o({parser:this,partialOkay:n||!1,version:s,flags:u,reader:t=new Oi(new DataView(t.buffer,t.byteOffset,t.byteLength),0),size:r,start:i+e})}else t.V(Math.min(i+r-t.va(),t.S.byteLength-t.va()))},ji.prototype.parseNext=ji.prototype.Xc,ji.children=Ki,ji.sampleDescription=Bi,ji.allData=Gi,ji.typeToString=zi;var Wi={Mc:function(e,t){var n=Wi.$(e,t);return 1!=n.length?null:n[0]},sd:function(e,t,n){return 1!=(e=Wi.Ie(e,t,n)).length?null:e[0]},$:function(e,t){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.tagName==t}))},Ie:function(e,t,n){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))},getAttributeNS:function(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null},Oc:function(e){return Array.prototype.every.call(e.childNodes,(function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null},R:function(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r},Zg:function(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null},eb:function(e){if(!e)return null;var t=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e);return t?(e=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(e)?e:null):(W.v("Invalid duration string:",e),null)},Zc:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null},parseInt:function(e){return 0==(e=Number(e))%1?e:null},Yc:function(e){return 0==(e=Number(e))%1&&0<e?e:null},$b:function(e){return 0==(e=Number(e))%1&&0<=e?e:null},parseFloat:function(e){return e=Number(e),isNaN(e)?null:e},Qf:function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},df:function(e,t){var n=new DOMParser;try{var i=n.parseFromString(e,"text/xml")}catch(e){}if(i&&i.documentElement.tagName==t)var r=i.documentElement;return r&&0<r.getElementsByTagName("parsererror").length?null:r},cf:function(e,t){try{var n=yt(e);return Wi.df(n,t)}catch(e){}}},qi=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Xi(e,t,n){var i=function(e){for(var t=[],n=(e=h(e)).next();!n.done;n=e.next())(n=Ji(n.value))&&t.push(n);return t}(e),r=null;e=[];var a=[],o=new Set(i.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new Me(2,4,4010);if(n||(a=i.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.nf||(r=e.init||r,!1)})),a.length&&(e=function(e,t,n){for(var i=[],r=(n=h(n)).next();!r.done;r=n.next()){r=r.value;var a=qi.get(r.nf);if(a){var o;if(o=Wi.sd(r.node,"urn:microsoft:playready","pro")){o=It.Za(o.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=o.length,c=s.length+16+u,l=new ArrayBuffer(c),d=new Uint8Array(l),f=0;(l=new DataView(l)).setUint32(f,c),f+=4,l.setUint32(f,1886614376),f+=4,l.setUint32(f,0),f+=4,d.set(s,f),f+=s.length,l.setUint32(f,u),f+=4,d.set(o,f),o=[{initData:d,initDataType:"cenc",keyId:r.keyId}]}else o=null;o=tn(a,r.init||e||o),(a=$i.get(a))&&(o.licenseServerUri=a(r)),i.push(o)}else for(a=(r=h(r=t(r.node)||[])).next();!a.done;a=r.next())i.push(a.value)}return i}(r,t,a),0==e.length&&(e=[tn("",r)]))),i.length&&(n||!a.length))for(e=[],n=(t=h(qi.values())).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(tn(n,r));if(o=Array.from(o)[0]||null)for(n=(t=h(e)).next();!n.done;n=t.next())for(i=(n=h(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=o;return{Ee:o,Nh:r,drmInfos:e,Je:!0}}var Yi,$i=(new Map).set("com.widevine.alpha",(function(e){return(e=Wi.sd(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return(e=Wi.sd(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=new DataView(e).getUint32(t,!0);if(t+=4,n!==e.byteLength)return W.v("PlayReady Object with invalid length encountered."),[];t+=2,n=[];for(var i=new DataView(e);t<e.byteLength-1;){var r=i.getUint16(t,!0);t+=2;var a=i.getUint16(t,!0);t+=2;var o=new Uint8Array(e,t,a);n.push({type:r,value:o}),t+=a}return n}((e=It.Za(e.textContent)).buffer).filter((function(e){return 1===e.type}))[0])?(e=bt(e.value,!0),(e=Wi.df(e,"WRMHEADER"))?function(e){for(var t=(e=h(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=h(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""):""}));function Ji(e){var t=e.getAttribute("schemeIdUri"),n=Wi.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),i=Wi.Ie(e,"urn:mpeg:cenc:2013","pssh").map(Wi.Oc);if(!t)return W.error("Missing required schemeIdUri attribute on","ContentProtection element",e),null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new Me(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:It.Za(e),keyId:null}}))}catch(e){throw new Me(2,4,4007)}return{node:e,nf:t,keyId:n,init:0<r.length?r:null}}function Zi(t,n,i,r,a){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(n,i,r,a){if("$$"==n)return"$";var s=o[i];if(null==s)return W.v("URL template does not have an available substitution for identifier",'"'+i+'":',t),n;switch("RepresentationID"==i&&r&&(W.v("URL template should not contain a width specifier for identifier",'"RepresentationID":',t),r=void 0),"Time"==i&&(s=Math.round(s)),a){case void 0:case"d":case"i":case"u":n=s.toString();break;case"o":n=s.toString(8);break;case"x":n=s.toString(16);break;case"X":n=s.toString(16).toUpperCase();break;default:n=s.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-n.length)+1).join("0")+n}))}function Qi(e,t){var n=er(e,t,"timescale"),i=1;n&&(i=Wi.Yc(n)||1),n=er(e,t,"duration"),(n=Wi.Yc(n||""))&&(n/=i);var r=er(e,t,"startNumber"),a=Number(er(e,t,"presentationTimeOffset"))||0,o=Wi.$b(r||"");null!=r&&null!=o||(o=1);var s=tr(e,t,"SegmentTimeline");if(r=null,s){r=i;var u=e.ea.duration||1/0;s=Wi.$(s,"S");for(var c=[],l=-a,d=0;d<s.length;++d){var h=s[d],f=Wi.R(h,"t",Wi.$b),p=Wi.R(h,"d",Wi.$b),m=Wi.R(h,"r",Wi.parseInt);if(null!=f&&(f-=a),!p){W.v('"S" element must have a duration:','ignoring the remaining "S" elements.',h);break}if(f=null!=f?f:l,0>(m=m||0))if(d+1<s.length){if(null==(m=Wi.R(s[d+1],"t",Wi.$b))){W.v('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',h);break}if(f>=m){W.v('An "S" element cannot have a negative repeat','if its start time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',h);break}m=Math.ceil((m-f)/p)-1}else{if(1/0==u){W.v('The last "S" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "S" element.',h);break}if(f/r>=u){W.v('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',h);break}m=Math.ceil((u*r-f)/p)-1}for(0<c.length&&f!=l&&(Math.abs((f-l)/r)>=rn&&W.v("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",h),c[c.length-1].end=f/r),h=0;h<=m;++h)l=f+p,c.push({start:f/r,end:l/r,Gh:f}),f=l}r=c}return{timescale:i,sa:n,Gb:o,Fa:a/i||0,re:a,W:r}}function er(e,t,n){return[t(e.F),t(e.oa),t(e.Da)].filter(Qt.jb).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function tr(e,t,n){return[t(e.F),t(e.oa),t(e.Da)].filter(Qt.jb).map((function(e){return Wi.Mc(e,n)})).reduce((function(e,t){return e||t}))}function nr(e,t,n,i,r,a){if(a=void 0===a?0:a,Wi.getAttributeNS(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,i,r,a){for(var o=Wi.getAttributeNS(e,"http://www.w3.org/1999/xlink","href"),s=Wi.getAttributeNS(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=0;u<e.attributes.length;u++){var c=e.attributes[u];"http://www.w3.org/1999/xlink"==c.namespaceURI&&(e.removeAttributeNS(c.namespaceURI,c.localName),--u)}if(5<=a)return Ue(new Me(2,4,4028));if("onLoad"!=s)return Ue(new Me(2,4,4027));var l=en([i],[o]);return r.request(0,Ye(l,t)).ma((function(i){if(!(i=Wi.cf(i.data,e.tagName)))return Ue(new Me(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s),e.appendChild(s)}for(s=0;s<i.attributes.length;s++){var u=i.attributes[s].nodeName,c=i.getAttribute(u);e.setAttribute(u,c)}return nr(e,t,n,l[0],r,a+1)}))}(e,t,n,i,r,a);return n&&(o=o.ma(void 0,(function(){return nr(e,t,n,i,r,a)}))),o}o=[];for(var s=0;s<e.childNodes.length;s++){var u=e.childNodes[s];u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Wi.getAttributeNS(u,"http://www.w3.org/1999/xlink","href")?(e.removeChild(u),--s):"SegmentTimeline"!=u.tagName&&o.push(nr(u,t,n,i,r,a)))}return Fe(o).ma((function(){return e}))}function ir(e,t,n){this.c=e,this.b=t,this.a=n}function rr(e,t,n,i,r,a){this.position=e,this.startTime=t,this.endTime=n,this.c=i,this.b=r,this.a=a}function ar(e){this.a=e}function or(e,t){for(;e.a.length&&e.a[e.a.length-1].startTime>=t;)e.a.pop();for(;e.a.length&&0>=e.a[0].endTime;)e.a.shift();if(0!=e.a.length){var n=e.a[e.a.length-1];e.a[e.a.length-1]=new rr(n.position,n.startTime,t,n.c,n.b,n.a)}}function sr(e){this.b=e,this.a=new Oi(e,0),Yi||(Yi=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function ur(e){var t=cr(e);if(7<t.length)throw new Me(2,3,3002);for(var n=0,i=0;i<t.length;i++)n=256*n+t[i];t=n,n=cr(e);e:{i=It.Xa;for(var r=0;r<Yi.length;r++)if(i(n,Yi[r])){i=!0;break e}i=!1}if(i)n=e.b.byteLength-e.a.va();else{if(8==n.length&&224&n[1])throw new Me(2,3,3001);for(i=n[0]&(1<<8-n.length)-1,r=1;r<n.length;r++)i=256*i+n[r];n=i}return n=e.a.va()+n<=e.b.byteLength?n:e.b.byteLength-e.a.va(),i=new DataView(e.b.buffer,e.b.byteOffset+e.a.va(),n),e.a.V(n),new lr(t,i)}function cr(e){var t,n=e.a.Ea();for(t=1;8>=t&&!(n&1<<8-t);t++);if(8<t)throw new Me(2,3,3002);var i=new Uint8Array(t);for(i[0]=n,n=1;n<t;n++)i[n]=e.a.Ea();return i}function lr(e,t){this.id=e,this.a=t}function dr(e){if(8<e.a.byteLength)throw new Me(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new Me(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++)t=256*t+e.a.getUint8(n);return t}function hr(){}function fr(e){var t=new sr(e.a);if(179!=(e=ur(t)).id)throw W.v("Not a CueTime element."),new Me(2,3,3013);if(e=dr(e),183!=(t=ur(t)).id)throw W.v("Not a CueTrackPositions element."),new Me(2,3,3012);t=new sr(t.a);for(var n=0;t.Qa();){var i=ur(t);if(241==i.id){n=dr(i);break}}return{Hh:e,gh:n}}function pr(e,t){var n=tr(e,t,"Initialization");if(!n)return null;var i=e.F.Ga,r=n.getAttribute("sourceURL");r&&(i=en(e.F.Ga,[r])),r=0;var a=null;return(n=Wi.R(n,"range",Wi.Zc))&&(r=n.start,a=n.end),new ir((function(){return i}),r,a)}function mr(e,t,n,i,r,a,o,s){var u=e.presentationTimeline,c=!e.Lb||!e.ea.Dd,l=e.ea.start,d=e.ea.duration,h=t,f=null;return{createSegmentIndex:function(){var e=[h(i,r,a),"webm"==o?h(n.c(),n.b,n.a):null];return h=null,Promise.all(e).then((function(e){var t=e[0];e=e[1]||null,t="mp4"==o?function(e,t,n,i){var r,a=(new ji).za("sidx",(function(e){r=function(e,t,n,i){var r=[];i.reader.V(4);var a=i.reader.M();if(0==a)throw W.error("Invalid timescale."),new Me(2,3,3005);if(0==i.version)var o=i.reader.M(),s=i.reader.M();else o=i.reader.cc(),s=i.reader.cc();i.reader.V(2);var u=i.reader.wc();for(e=e+i.size+s,s=0;s<u;s++){var c=i.reader.M(),l=(2147483648&c)>>>31;c&=2147483647;var d=i.reader.M();if(i.reader.V(4),1==l)throw W.error("Heirarchical SIDXs are not supported."),new Me(2,3,3006);r.push(new rr(r.length,o/a-t,(o+d)/a-t,(function(){return n}),e,e+c-1)),o+=d,e+=c}return i.parser.stop(),r}(t,i,n,e)}));if(e&&a.parse(e),r)return r;throw W.error('Invalid box type, expected "sidx".'),new Me(2,3,3004)}(t,r,i,s):(new hr).parse(t,e,i,s),u.Xb(t,l),f=new ar(t),c&&or(f,d)}))},findSegmentPosition:function(e){return f.find(e)},getSegmentReference:function(e){return f.get(e)}}}function gr(e){return e.xc}function vr(e){return e.ob}function yr(e){return e.zc}V("shaka.media.InitSegmentReference",ir),ir.prototype.od=function(){return this.c()},ir.prototype.createUris=ir.prototype.od,ir.prototype.yd=function(){return this.b},ir.prototype.getStartByte=ir.prototype.yd,ir.prototype.wd=function(){return this.a},ir.prototype.getEndByte=ir.prototype.wd,V("shaka.media.SegmentReference",rr),rr.prototype.va=function(){return this.position},rr.prototype.getPosition=rr.prototype.va,rr.prototype.Qc=function(){return this.startTime},rr.prototype.getStartTime=rr.prototype.Qc,rr.prototype.ag=function(){return this.endTime},rr.prototype.getEndTime=rr.prototype.ag,rr.prototype.od=function(){return this.c()},rr.prototype.createUris=rr.prototype.od,rr.prototype.yd=function(){return this.b},rr.prototype.getStartByte=rr.prototype.yd,rr.prototype.wd=function(){return this.a},rr.prototype.getEndByte=rr.prototype.wd,V("shaka.media.SegmentIndex",ar),ar.prototype.destroy=function(){return this.a=null,Promise.resolve()},ar.prototype.destroy=ar.prototype.destroy,ar.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},ar.prototype.find=ar.prototype.find,ar.prototype.get=function(e){return 0==this.a.length||0>(e-=this.a[0].position)||e>=this.a.length?null:this.a[e]},ar.prototype.get=ar.prototype.get,ar.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},ar.prototype.offset=ar.prototype.offset,ar.prototype.Jd=function(e){for(var t=[],n=0,i=0;n<this.a.length&&i<e.length;){var r=this.a[n],a=e[i];r.startTime<a.startTime?(t.push(r),n++):(r.startTime>a.startTime?0==n?t.push(a):W.v("Refusing to rewrite original references on update!"):(.1<Math.abs(r.endTime-a.endTime)?t.push(new rr(r.position,a.startTime,a.endTime,a.c,a.b,a.a)):t.push(r),n++),i++)}for(;n<this.a.length;)t.push(this.a[n++]);if(t.length)for(n=t[t.length-1].position+1;i<e.length;)r=new rr(n++,(r=e[i++]).startTime,r.endTime,r.c,r.b,r.a),t.push(r);else t=e;this.a=t},ar.prototype.merge=ar.prototype.Jd,ar.prototype.qd=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},ar.prototype.evict=ar.prototype.qd,sr.prototype.Qa=function(){return this.a.Qa()},hr.prototype.parse=function(e,t,n,i){var r;if(440786851!=ur(t=new sr(new DataView(t))).id)throw W.error("Not an EBML element."),new Me(2,3,3008);var a=ur(t);if(408125543!=a.id)throw W.error("Not a Segment element."),new Me(2,3,3009);for(t=a.a.byteOffset,a=new sr(a.a),r=null;a.Qa();){var o=ur(a);if(357149030==o.id){r=o;break}}if(!r)throw W.error("Not an Info element."),new Me(2,3,3010);for(a=new sr(r.a),r=1e6,o=null;a.Qa();){var s=ur(a);if(2807729==s.id)r=dr(s);else if(17545==s.id)if(4==(o=s).a.byteLength)o=o.a.getFloat32(0);else{if(8!=o.a.byteLength)throw new Me(2,3,3003);o=o.a.getFloat64(0)}}if(null==o)throw new Me(2,3,3011);if(r=o*(a=r/1e9),475249515!=(e=ur(new sr(new DataView(e)))).id)throw W.error("Not a Cues element."),new Me(2,3,3007);return function(e,t,n,i,r,a){function o(){return r}var s=[];e=new sr(e.a);for(var u=null,c=null;e.Qa();){var l=ur(e);if(187==l.id){var d=fr(l);d&&(l=n*d.Hh,d=t+d.gh,null!=u&&s.push(new rr(s.length,u-a,l-a,o,c,d-1)),u=l,c=d)}}return null!=u&&s.push(new rr(s.length,u-a,i-a,o,c,null)),s}(e,t,a,r,n,i)};var br={ac:{},vc:{},Wd:function(e,t){br.vc[e]=t}};function Er(e,t,n){this.f=e,this.$c=t,this.j=this.g=1/0,this.a=1,this.b=this.c=null,this.s=0,this.u=!0,this.l=0,this.w=void 0===n||n}function wr(e,t,n,i){return e=Ye(e,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Tr(){var e=this;this.b=this.a=null,this.f=[],this.c=null,this.s=[],this.j=1,this.u={},this.w=0,this.B=new ce(5),this.l=new Ce((function(){!function(e){p((function t(){var n,i;return O(t,(function(t){switch(t.o){case 1:return W.info("Updating manifest..."),n=0,k(t,2),A(t,Sr(e),4);case 4:n=t.A,C(t,3);break;case 2:i=N(t),e.b&&(i.severity=1,e.b.onError(i));case 3:if(!e.b)return t.return();xr(e,n),I(t)}}))}))}(e)})),this.g=new ze}function Sr(e){var t=Date.now(),n=e.b.networkingEngine.request(0,Ye(e.f,e.a.retryParameters));return He(e.g,n),n.promise.then((function(t){if(e.b)return t.uri&&!e.f.includes(t.uri)&&e.f.unshift(t.uri),function(e,t,n){if(!(t=Wi.cf(t,"MPD")))throw new Me(2,4,4001,n);return t=nr(t,e.a.retryParameters,e.a.dash.xlinkFailGracefully,n,e.b.networkingEngine),He(e.g,t),t.promise.then((function(t){return function(e,t,n){return p((function i(){var r,a,o,s,u,c,l,d,h,f,p,m,g,v,y,b,E,w,T,S,k,x,C,N;return O(i,(function(i){switch(i.o){case 1:s=Qt,c=[n],0<(l=(u=Wi).$(t,"Location").map(u.Oc).filter(s.jb)).length&&(d=en(c,l),c=e.f=d),h=u.$(t,"BaseURL").map(u.Oc),f=en(c,h),p=e.a.dash.ignoreMinBufferTime,m=0,p||(m=u.R(t,"minBufferTime",u.eb)),e.w=u.R(t,"minimumUpdatePeriod",u.eb,-1),g=u.R(t,"availabilityStartTime",u.Zg),v=u.R(t,"timeShiftBufferDepth",u.eb),y=u.R(t,"maxSegmentDuration",u.eb),b=t.getAttribute("type")||"static",E=e.a.dash.ignoreSuggestedPresentationDelay,w=null,E||(w=u.R(t,"suggestedPresentationDelay",u.eb)),e.c?T=e.c.presentationTimeline:(S=Math.max(e.a.dash.defaultPresentationDelay,1.5*m),T=new Er(g,null!=w?w:S,e.a.dash.autoCorrectDrift));for(var P={Lb:"static"!=b,presentationTimeline:T,Da:null,ea:null,oa:null,F:null,bandwidth:0,Pe:!1},M=f,R=Wi.R(t,"mediaPresentationDuration",Wi.eb),L=[],U=0,_=Wi.$(t,"Period"),O=0;O<_.length;O++){var D=_[O];U=Wi.R(D,"start",Wi.eb,U);var F=Wi.R(D,"duration",Wi.eb),j=null;if(O!=_.length-1){var K=Wi.R(_[O+1],"start",Wi.eb);null!=K&&(j=K-U)}else null!=R&&(j=R-U);if(K=rn,j&&F&&Math.abs(j-F)>K&&W.v("There is a gap/overlap between Periods",D),null==j&&(j=F),D=Ar(e,P,M,{start:U,duration:j,node:D,Dd:null==j||O==_.length-1}),L.push(D),F=P.Da.id,e.s.includes(F)||(e.s.push(F),e.c&&(e.b.filterNewPeriod(D),e.c.periods.push(D))),null==j){O!=_.length-1&&W.v("Skipping Period",O+1,"and any subsequent Periods:","Period",O+1,"does not have a valid start time.",L[O+1]),U=null;break}U+=j}if(null==e.c&&e.b.filterAllPeriods(L),null!=R?(U!=R&&W.v("@mediaPresentationDuration does not match the total duration of all","Periods."),r=L,a=R,o=!1):(r=L,a=U,o=!0),k=a,x=r,T.Ac("static"==b),"static"!=b&&o||T.Ta(k||1/0),T.Y()&&!isNaN(e.a.availabilityWindowOverride)&&(v=e.a.availabilityWindowOverride),null==v&&(v=1/0),T.ge(v),T.Md(y||1),e.c){i.C(0);break}if(e.c={presentationTimeline:T,periods:x,offlineSessionIds:[],minBufferTime:m||0},!T.zf()){i.C(0);break}return C=u.$(t,"UTCTiming"),A(i,function(e,t,n){n=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}));var i=e.a.dash.clockSyncUri;return!n.length&&i&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),Qt.Of(n,function(e){var n=e.scheme;switch(e=e.value,n){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Nr(this,t,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Nr(this,t,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return n=Date.parse(e),isNaN(n)?0:n-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return W.ba("NTP UTCTiming scheme is not supported"),Promise.reject();default:return W.ba("Unrecognized scheme in UTCTiming element",n),Promise.reject()}}.bind(e)).catch((function(){return W.ba("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0}))}(e,f,C),4);case 4:if(N=i.A,!e.b)return i.return();T.rf(N),I(i)}}))}))}(e,t,n)}))}(e,t.data,t.uri)})).then((function(){var n=(Date.now()-t)/1e3;return le(e.B,1,n),n}))}function Ar(e,t,n,i){if(t.Da=Cr(i.node,null,n),t.ea=i,t.Da.id||(W.info("No Period ID given for Period with start time "+i.start+",  Assigning a default"),t.Da.id="__shaka_period_"+i.start),Wi.$(i.node,"EventStream").forEach(e.$g.bind(e,i.start,i.duration)),n=Wi.$(i.node,"AdaptationSet").map(e.Yg.bind(e,t)).filter(Qt.jb),t.Lb){t=[];for(var r=h(n),a=r.next();!a.done;a=r.next())for(var o=(a=h(a.value.jh)).next();!o.done;o=a.next())t.push(o.value);if(t.length!=new Set(t).size)throw new Me(2,4,4018)}var s=n.filter((function(e){return!e.oe}));if(n.filter((function(e){return e.oe})).forEach((function(e){var t=e.streams[0],n=e.oe;s.forEach((function(e){e.id==n&&e.streams.forEach((function(e){e.trickModeVideo=t}))}))})),t=Ir(s,"video"),r=Ir(s,"audio"),!t.length&&!r.length)throw new Me(2,4,4004);for(n=e.a.disableAudio,r.length&&!n||(r=[null]),n=e.a.disableVideo,t.length&&!n||(t=[null]),n=[],a=0;a<r.length;a++)for(o=0;o<t.length;o++)kr(e,r[a],t[o],n);if(t=[],!e.a.disableText)for(e=Ir(s,"text"),r=0;r<e.length;r++)t.push.apply(t,e[r].streams);return{startTime:i.start,textStreams:t,variants:n}}function Ir(e,t){return e.filter((function(e){return e.contentType==t}))}function kr(e,t,n,i){if(t||n)if(t&&n){var r=t.drmInfos,a=n.drmInfos;if(!r.length||!a.length||0<Bt(r,a).length){a=Bt(t.drmInfos,n.drmInfos);for(var o=0;o<t.streams.length;o++)for(var s=0;s<n.streams.length;s++)r=(n.streams[s].bandwidth||0)+(t.streams[o].bandwidth||0),r={id:e.j++,language:t.language,primary:t.Gd||n.Gd,audio:t.streams[o],video:n.streams[s],bandwidth:r,drmInfos:a,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}}else for(a=t||n,o=0;o<a.streams.length;o++)r=a.streams[o].bandwidth||0,r={id:e.j++,language:a.language||"und",primary:a.Gd,audio:t?a.streams[o]:null,video:n?a.streams[o]:null,bandwidth:r,drmInfos:a.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}function xr(e,t){0>e.w||e.l.T(Math.max(3,e.w-t,de(e.B)))}function Cr(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,Od:null,audioSamplingRate:null},n=n||t.Ga;var i=Wi.$b,r=Wi.Qf,a=Wi.$(e,"BaseURL").map(Wi.Oc),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs;r=Wi.R(e,"frameRate",r)||t.frameRate;for(var c=e.getAttribute("par")||t.pixelAspectRatio,l=Wi.$(e,"InbandEventStream"),d=t.emsgSchemeIdUris.slice(),f=(l=h(l)).next();!f.done;f=l.next())f=f.value.getAttribute("schemeIdUri"),d.includes(f)||d.push(f);return l=function(e){for(var t=0;t<e.length;++t){var n=e[t],i=n.getAttribute("schemeIdUri");if(i&&(n=n.getAttribute("value")))switch(i){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var r=parseInt(n,10);if(!r){W.v("Channel parsing failure! Ignoring scheme and value",i,n);continue}return r;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(r=parseInt(n,16))){W.v("Channel parsing failure! Ignoring scheme and value",i,n);continue}for(e=0;r;)1&r&&++e,r>>=1;return e;default:W.v("Unrecognized audio channel scheme:",i,n)}}return null}(l=Wi.$(e,"AudioChannelConfiguration"))||t.Od,f=Wi.R(e,"audioSamplingRate",i)||t.audioSamplingRate,o||(o=Pr(s,u)),{Ga:en(n,a),xc:Wi.Mc(e,"SegmentBase")||t.xc,ob:Wi.Mc(e,"SegmentList")||t.ob,zc:Wi.Mc(e,"SegmentTemplate")||t.zc,width:Wi.R(e,"width",i)||t.width,height:Wi.R(e,"height",i)||t.height,contentType:o,mimeType:s,codecs:u,frameRate:r,pixelAspectRatio:c,emsgSchemeIdUris:d,id:e.getAttribute("id"),Od:l,audioSamplingRate:f}}function Nr(e,t,n,i){return(t=Ye(t=en(t,[n]),e.a.retryParameters)).method=i,t=e.b.networkingEngine.request(4,t),He(e.g,t),t.promise.then((function(e){if("HEAD"==i){if(!e.headers||!e.headers.date)return W.v("UTC timing response is missing","expected date header"),0;e=e.headers.date}else e=yt(e.data);return e=Date.parse(e),isNaN(e)?(W.v("Unable to parse date from UTC timing response"),0):e-Date.now()}))}function Pr(e,t){return xn(st(e,t))?"text":e.split("/")[0]}function Mr(e,t,n,i){this.b=e,this.type=t,this.a=n,this.segments=i||null}function Rr(e,t,n,i){this.id=e,this.name=t,this.a=n,this.value=void 0===i?null:i}function Lr(e,t){this.name=e,this.value=t}function Ur(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function _r(e,t){this.b=t,this.a=e}V("shaka.media.ManifestParser.registerParserByExtension",br.Wd),br.dc=function(e,t){br.ac[e]=t},V("shaka.media.ManifestParser.registerParserByMime",br.dc),br.dh=function(){var e={};if(lt()){for(var t in br.ac)e[t]=!0;for(var n in br.vc)e[n]=!0}t={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var i=(n=h(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!i.done;i=n.next())e[i=i.value]=lt()?!!br.ac[i]:dt(i);for(var r in t)e[r]=lt()?!!br.vc[r]:dt(t[r]);return e},br.create=function(e,t,n,i){return p((function r(){var a,o;return O(r,(function(r){switch(r.o){case 1:return k(r,2),A(r,br.cg(e,t,n,i),4);case 4:return a=r.A,r.return(new a);case 2:throw(o=N(r)).severity=2,o}}))}))},br.cg=function(e,t,n,i){return p((function r(){var a,o,s,u,c;return O(r,(function(r){switch(r.o){case 1:if(a=br,i){if(o=a.ac[i.toLowerCase()])return r.return(o);W.v("Could not determine manifest type using MIME type ",i)}if(s=a.getExtension(e)){if(u=a.vc[s])return r.return(u);W.v("Could not determine manifest type for extension ",s)}else W.v("Could not find extension for ",e);if(i){r.C(2);break}return A(r,a.ng(e,t,n),3);case 3:if(i=r.A){if(c=br.ac[i])return r.return(c);W.v("Could not determine manifest type using MIME type",i)}case 2:throw new Me(2,4,4e3,e)}}))}))},br.ng=function(e,t,n){return p((function i(){var r,a,o;return O(i,(function(i){switch(i.o){case 1:return(r=Ye([e],n)).method="HEAD",A(i,t.request(0,r).promise,2);case 2:return a=i.A,o=a.headers["content-type"],i.return(o?o.toLowerCase().split(";").shift():"")}}))}))},br.getExtension=function(e){return 1==(e=new pe(e).Ca.split("/").pop().split(".")).length?"":e.pop().toLowerCase()},br.isSupported=function(e,t){return!!lt()&&(t in br.ac||br.getExtension(e)in br.vc)},V("shaka.media.PresentationTimeline",Er),Er.prototype.ra=function(){return this.g},Er.prototype.getDuration=Er.prototype.ra,Er.prototype.lg=function(){return this.a},Er.prototype.getMaxSegmentDuration=Er.prototype.lg,Er.prototype.Ta=function(e){this.g=e},Er.prototype.setDuration=Er.prototype.Ta,Er.prototype.rg=function(){return this.f},Er.prototype.getPresentationStartTime=Er.prototype.rg,Er.prototype.rf=function(e){this.s=e},Er.prototype.setClockOffset=Er.prototype.rf,Er.prototype.Ac=function(e){this.u=e},Er.prototype.setStatic=Er.prototype.Ac,Er.prototype.ge=function(e){this.j=e},Er.prototype.setSegmentAvailabilityDuration=Er.prototype.ge,Er.prototype.rh=function(e){this.$c=e},Er.prototype.setDelay=Er.prototype.rh,Er.prototype.$f=function(){return this.$c},Er.prototype.getDelay=Er.prototype.$f,Er.prototype.Xb=function(e,t){if(0!=e.length){var n=e[e.length-1].endTime+t;this.Nd(e[0].startTime+t),this.a=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,n),null!=this.f&&this.w&&(this.f=(Date.now()+this.s)/1e3-this.b-this.a),W.I("notifySegments:","maxSegmentDuration="+this.a)}},Er.prototype.notifySegments=Er.prototype.Xb,Er.prototype.Nd=function(e){this.c=null==this.c?e:Math.min(this.c,e)},Er.prototype.notifyMinSegmentStartTime=Er.prototype.Nd,Er.prototype.Md=function(e){this.a=Math.max(this.a,e),W.I("notifyNewSegmentDuration:","maxSegmentDuration="+this.a)},Er.prototype.notifyMaxSegmentDuration=Er.prototype.Md,Er.prototype.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},Er.prototype.offset=Er.prototype.offset,Er.prototype.Y=function(){return 1/0==this.g&&!this.u},Er.prototype.isLive=Er.prototype.Y,Er.prototype.Bb=function(){return 1/0!=this.g&&!this.u},Er.prototype.isInProgress=Er.prototype.Bb,Er.prototype.pc=function(){if(1/0==this.j)return this.l;var e=this.Pb()-this.j;return Math.max(this.l,e)},Er.prototype.getSegmentAvailabilityStart=Er.prototype.pc,Er.prototype.uf=function(e){this.l=e},Er.prototype.setUserSeekStart=Er.prototype.uf,Er.prototype.Pb=function(){return this.Y()||this.Bb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.a-this.f),this.g):this.g},Er.prototype.getSegmentAvailabilityEnd=Er.prototype.Pb,Er.prototype.nc=function(e){var t=Math.max(this.c,this.l);if(1/0==this.j)return t;var n=this.Pb()-this.j;return e=Math.min(n+e,this.ab()),Math.max(t,e)},Er.prototype.getSafeSeekRangeStart=Er.prototype.nc,Er.prototype.Ob=function(){return this.nc(0)},Er.prototype.getSeekRangeStart=Er.prototype.Ob,Er.prototype.ab=function(){var e=this.Y()||this.Bb()?this.$c:0;return Math.max(0,this.Pb()-e)},Er.prototype.getSeekRangeEnd=Er.prototype.ab,Er.prototype.zf=function(){return!(null==this.f||null!=this.b&&this.w)},Er.prototype.usingPresentationStartTime=Er.prototype.zf,V("shaka.dash.DashParser",Tr),(i=Tr.prototype).configure=function(e){this.a=e},i.start=function(e,t){var n=this;return p((function i(){var r;return O(i,(function(i){switch(i.o){case 1:return n.f=[e],n.b=t,A(i,Sr(n),2);case 2:if(r=i.A,n.b&&xr(n,r),!n.b)throw new Me(2,7,7001);return i.return(n.c)}}))}))},i.stop=function(){return this.a=this.b=null,this.f=[],this.c=null,this.s=[],this.u={},null!=this.l&&(this.l.stop(),this.l=null),this.g.destroy()},i.update=function(){Sr(this).catch(function(e){this.b&&this.b.onError(e)}.bind(this))},i.onExpirationUpdated=function(){},i.Yg=function(e,t){if(e.oa=Cr(t,e.Da,null),"image"==e.oa.contentType)return W.v("Skipping Image AdaptationSet",e.oa),null;var n=!1,i=Wi.$(t,"Role"),r=i.map((function(e){return e.getAttribute("value")})).filter(Qt.jb),a=void 0,o="text"==e.oa.contentType;o&&(a="subtitle");for(var s=0;s<i.length;s++){var u=i[s].getAttribute("schemeIdUri");if(null==u||"urn:mpeg:dash:role:2011"==u)switch(u=i[s].getAttribute("value"),u){case"main":n=!0;break;case"caption":case"subtitle":a=u}}var c=null,l=!1;Wi.$(t,"EssentialProperty").forEach((function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?c=e.getAttribute("value"):l=!0})),s=Wi.$(t,"Accessibility");var d=new Map;for(i={},u=(s=h(s)).next();!u.done;i={jc:i.jc},u=s.next()){var f=u.value;u=f.getAttribute("schemeIdUri"),f=f.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==u||"urn:scte:dash:cc:cea-708:2015"==u?(i.jc=1,null!=f?f.split(";").forEach(function(e){return function(t){if(t.includes("=")){var n=(t=t.split("="))[0].startsWith("CC")?t[0]:"CC"+t[0];t=t[1].split(",")[0].split(":").pop()}else n="CC"+e.jc,e.jc+=2;d.set(n,ee(t))}}(i)):d.set("CC1","und")):"urn:mpeg:dash:role:2011"==u&&null!=f&&(r.push(f),"captions"==f&&(a="caption"))}if(l)return null;var p=Xi(i=Wi.$(t,"ContentProtection"),this.a.dash.customScheme,this.a.dash.ignoreDrmInfo);if(i=ee(t.getAttribute("lang")||"und"),s=t.getAttribute("label"),(u=Wi.$(t,"Label"))&&u.length&&(u=u[0]).textContent&&(s=u.textContent),0==(r=(u=Wi.$(t,"Representation")).map(this.ah.bind(this,e,p,a,i,s,n,r,d)).filter((function(e){return!!e}))).length){if(this.a.dash.ignoreEmptyAdaptationSet||o)return null;throw new Me(2,4,4003)}return e.oa.contentType&&"application"!=e.oa.contentType||(e.oa.contentType=Pr(r[0].mimeType,r[0].codecs),r.forEach((function(t){t.type=e.oa.contentType}))),r.forEach((function(e){p.drmInfos.forEach((function(t){e.keyId&&t.keyIds.push(e.keyId)}))})),o=u.map((function(e){return e.getAttribute("id")})).filter(Qt.jb),{id:e.oa.id||"__fake__"+this.j++,contentType:e.oa.contentType,language:i,Gd:n,streams:r,drmInfos:p.drmInfos,oe:c,jh:o}},i.ah=function(e,t,n,i,r,a,o,s,u){if(e.F=Cr(u,e.oa,null),!function(e){var t=e.xc?1:0;return t+=e.ob?1:0,0==(t+=e.zc?1:0)?"text"==e.contentType||"application"==e.contentType||(W.v("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',e),!1):(1!=t&&(W.v("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",e),e.xc?(W.info("Using SegmentBase by default."),e.ob=null):W.info("Using SegmentList by default."),e.zc=null),!0)}(e.F))return W.v("Skipping Representation",e.F),null;e.bandwidth=Wi.R(u,"bandwidth",Wi.Yc)||0;var c=e.F.contentType;c="text"==c||"application"==c;try{var l=this.kh.bind(this);if(e.F.xc)var d=function(e,t){var n=Number(er(e,gr,"presentationTimeOffset"))||0,i=er(e,gr,"timescale"),r=1;i&&(r=Wi.Yc(i)||1),n=n/r||0,i=pr(e,gr);var a=e.F.contentType;if(r=e.F.mimeType.split("/")[1],"text"!=a&&"mp4"!=r&&"webm"!=r)throw W.error("SegmentBase specifies an unsupported container type.",e.F),new Me(2,4,4006);if("webm"==r&&!i)throw W.error("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",e.F),new Me(2,4,4005);a=tr(e,gr,"RepresentationIndex");var o=er(e,gr,"indexRange"),s=e.F.Ga;if(o=Wi.Zc(o||""),a){var u=a.getAttribute("sourceURL");u&&(s=en(e.F.Ga,[u])),o=Wi.R(a,"range",Wi.Zc,o)}if(!o)throw W.error("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",e.F),new Me(2,4,4002);return{createSegmentIndex:(r=mr(e,t,i,s,o.start,o.end,r,n)).createSegmentIndex,findSegmentPosition:r.findSegmentPosition,getSegmentReference:r.getSegmentReference,initSegmentReference:i,Fa:n}}(e,l);else if(e.F.ob)d=function(e,t){var n=pr(e,vr),i=function(e){return[e.F.ob,e.oa.ob,e.Da.ob].filter(Qt.jb).map((function(e){return Wi.$(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.Pe&&(e.Pe=!0,W.v("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate.")),{Hg:t.getAttribute("media"),start:(t=Wi.R(t,"mediaRange",Wi.Zc,{start:0,end:null})).start,end:t.end}}))}(e),r=Qi(e,vr),a=r.Gb;0==a&&(W.v("SegmentList@startNumber must be > 0"),a=1);var o=0;if(r.sa?o=r.sa*(a-1):r.W&&0<r.W.length&&(o=r.W[0].start),!(i={sa:r.sa,startTime:o,Gb:a,Fa:r.Fa,W:r.W,Cb:i}).sa&&!i.W&&1<i.Cb.length)throw W.v("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",e.F),new Me(2,4,4002);if(!i.sa&&!e.ea.duration&&!i.W&&1==i.Cb.length)throw W.v("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",e.F),new Me(2,4,4002);if(i.W&&0==i.W.length)throw W.v("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",e.F),new Me(2,4,4002);return a=r=null,e.Da.id&&e.F.id&&(r=t[a=e.Da.id+","+e.F.id]),o=function(e,t,n,i){var r=i.Cb.length;i.W&&i.W.length!=i.Cb.length&&(r=Math.min(i.W.length,i.Cb.length),W.v("The number of items in the segment timeline and the number of segment","URLs do not match, truncating",i.Cb.length,"to",r));for(var a=[],o=i.startTime,s=0;s<r;s++){var u,c=i.Cb[s],l=en(n,[c.Hg]);u=null!=i.sa?o+i.sa:i.W?i.W[s].end:o+e,a.push(new rr(s+t,o,u,function(e){return e}.bind(null,l),c.start,c.end)),o=u}return a}(e.ea.duration,i.Gb,e.F.Ga,i),r?(r.Jd(o),a=e.presentationTimeline.pc(),r.qd(a-e.ea.start)):(e.presentationTimeline.Xb(o,e.ea.start),r=new ar(o),a&&e.Lb&&(t[a]=r)),e.Lb&&e.ea.Dd||or(r,e.ea.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:r.find.bind(r),getSegmentReference:r.get.bind(r),initSegmentReference:n,Fa:i.Fa}}(e,this.u);else if(e.F.zc)d=function(e,t,n,i){var r=function(e){var t=er(e,yr,"initialization");if(!t)return null;var n=e.F.id,i=e.bandwidth||null,r=e.F.Ga;return new ir((function(){var e=Zi(t,n,null,i,null);return en(r,[e])}),0,null)}(e),a=Qi(e,yr),o=er(e,yr,"media"),s=er(e,yr,"index");if(o=(a={sa:a.sa,timescale:a.timescale,Gb:a.Gb,Fa:a.Fa,re:a.re,W:a.W,Hd:o,tc:s}).tc?1:0,o+=a.W?1:0,0==(o+=a.sa?1:0))throw W.error("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",e.F),new Me(2,4,4002);if(1!=o&&(W.v("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",e.F),a.tc?(W.info("Using the index URL template by default."),a.W=null):W.info("Using the SegmentTimeline by default."),a.sa=null),!a.tc&&!a.Hd)throw W.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",e.F),new Me(2,4,4002);if(a.tc){if("mp4"!=(n=e.F.mimeType.split("/")[1])&&"webm"!=n)throw W.error("SegmentTemplate specifies an unsupported container type.",e.F),new Me(2,4,4006);if("webm"==n&&!r)throw W.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate uses a WebM container,","but does not contain an initialization URL template.",e.F),new Me(2,4,4005);i=Zi(a.tc,e.F.id,null,e.bandwidth||null,null),e=mr(e,t,r,i=en(e.F.Ga,[i]),0,null,n,a.Fa)}else a.sa?(i||(e.presentationTimeline.Md(a.sa),e.presentationTimeline.Nd(e.ea.start)),e=function(e,t){var n=e.ea.duration,i=t.sa,r=t.Gb,a=t.timescale,o=t.Hd,s=e.bandwidth||null,u=e.F.id,c=e.F.Ga;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||n&&e>=n?null:Math.floor(e/i)},getSegmentReference:function(e){var t=e*i,l=t+i;return n&&(l=Math.min(l,n)),0>l||n&&t>=n?null:new rr(e,t,l,(function(){var n=Zi(o,u,e+r,s,t*a);return en(c,[n])}),0,null)}}}(e,a)):(o=t=null,e.Da.id&&e.F.id&&(t=n[o=e.Da.id+","+e.F.id]),s=function(e,t){for(var n=[],i=0;i<t.W.length;i++){var r=i+t.Gb;n.push(new rr(r,t.W[i].start,t.W[i].end,function(e,t,n,i,r,a){return en(i,[e=Zi(e,t,r,n,a)]).map((function(e){return e.toString()}))}.bind(null,t.Hd,e.F.id,e.bandwidth||null,e.F.Ga,r,t.W[i].Gh+t.re),0,null))}return n}(e,a),i=!e.Lb||!e.ea.Dd,t?(i&&or(new ar(s),e.ea.duration),t.Jd(s),n=e.presentationTimeline.pc(),t.qd(n-e.ea.start)):(e.presentationTimeline.Xb(s,e.ea.start),t=new ar(s),o&&e.Lb&&(n[o]=t)),i&&or(t,e.ea.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:r,Fa:a.Fa}}(e,l,this.u,!!this.c);else{var h=e.F.Ga,f=e.ea.duration||0;d={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<f?1:null},getSegmentReference:function(e){return 1!=e?null:new rr(1,0,f,(function(){return h}),0,null)},initSegmentReference:null,Fa:0}}}catch(e){if(c&&4002==e.code)return null;throw e}return u=function(e,t,n,i){var r=Xi(e,t,i);if(n.Je)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==r.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=r.drmInfos),n.Je=!1;else if(0<r.drmInfos.length&&(n.drmInfos=n.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==n.drmInfos.length))throw new Me(2,4,4008);return r.Ee||n.Ee}(u=Wi.$(u,"ContentProtection"),this.a.dash.customScheme,t,this.a.dash.ignoreDrmInfo),{id:this.j++,originalId:e.F.id,createSegmentIndex:d.createSegmentIndex,findSegmentPosition:d.findSegmentPosition,getSegmentReference:d.getSegmentReference,initSegmentReference:d.initSegmentReference,presentationTimeOffset:d.Fa,mimeType:e.F.mimeType,codecs:e.F.codecs,frameRate:e.F.frameRate,pixelAspectRatio:e.F.pixelAspectRatio,bandwidth:e.bandwidth,width:e.F.width,height:e.F.height,kind:n,encrypted:0<t.drmInfos.length,keyId:u,language:i,label:r,type:e.oa.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:e.F.emsgSchemeIdUris,roles:o,channelsCount:e.F.Od,audioSamplingRate:e.F.audioSamplingRate,closedCaptions:s}},i.$g=function(e,t,n){var i=Wi.$b,r=n.getAttribute("schemeIdUri")||"",a=n.getAttribute("value")||"",o=Wi.R(n,"timescale",i)||1;Wi.$(n,"Event").forEach(function(n){var s=Wi.R(n,"presentationTime",i)||0,u=Wi.R(n,"duration",i)||0;u=(s=s/o+e)+u/o,null!=t&&(s=Math.min(s,e+t),u=Math.min(u,e+t)),n={schemeIdUri:r,value:a,startTime:s,endTime:u,id:n.getAttribute("id")||"",eventElement:n},this.b.onTimelineRegionAdded(n)}.bind(this))},i.kh=function(e,t,n){return e=wr(e,t,n,this.a.retryParameters),e=this.b.networkingEngine.request(1,e),He(this.g,e),e.promise.then((function(e){return e.data}))},br.Wd("mpd",Tr),br.dc("application/dash+xml",Tr),br.dc("video/vnd.mpeg.dash.mpd",Tr),Rr.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},Rr.prototype.getAttribute=function(e){var t=this.a.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Or={Mb:function(e,t){return e.filter((function(e){return e.name==t}))},xb:function(e,t){var n=Or.Mb(e,t);return n.length?n[0]:null},td:function(e,t,n){return e.filter((function(e){var i=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),i.value==t&&e.value==n}))},nd:function(e,t){return en([e],[t])[0]},Cd:function(e){return/^#(?!EXT)/m.test(e)}};function Dr(e){this.b=e,this.a=0}function Fr(e){jr(e,/[ \t]+/gm)}function jr(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,nh:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.nh)}function Kr(e){return e.a==e.b.length?null:(e=jr(e,/[^ \t\n]*/gm))?e[0]:null}function Br(){this.a=0}function Gr(e,t,n){var i=(t=(t=yt(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new Me(2,4,4015);t=0;for(var r=1;r<i.length;r++)if(!Or.Cd(i[r])){var a=zr(e,i[r]);if(--e.a,Hr.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(r+=1)}for(r=[],a=1;a<i.length;)if(Or.Cd(i[a]))a+=1;else{var o=zr(e,i[a]);if(Wr.includes(o.name)){if(1!=t)throw new Me(2,4,4017);return new Mr(n,t,r,e=Vr(e,n,i=i.splice(a,i.length-a),r))}r.push(o),a+=1,"EXT-X-STREAM-INF"==o.name&&(o.a.push(new Lr("URI",i[a])),a+=1)}return new Mr(n,t,r)}function Vr(e,t,n,i){var r=[],a=[];return n.forEach((function(n){if(/^(#EXT)/.test(n))n=zr(e,n),Hr.includes(n.name)?i.push(n):a.push(n);else{if(Or.Cd(n))return[];n=Or.nd(t,n.trim()),r.push(new _r(n,a)),a=[]}})),r}function zr(e,t){var n=e.a++,i=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!i)throw new Me(2,4,4016,t);var r,a=i[1],o=i[2];if(i=[],o){var s;(s=jr(o=new Dr(o),/^([^,=]+)(?:,|$)/g))&&(r=s[1]);for(var u=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=jr(o,u);)i.push(new Lr(s[1],s[2]||s[3]))}return new Rr(n,a,i,r)}var Hr="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Wr="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function qr(e){try{var t=qr.parse(e);return Oe({uri:e,Td:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return Ue(e)}}function Xr(){var e=this;this.a=this.f=null,this.Z=1,this.H=new Map,this.O=new Set,this.b=new Map,this.c=null,this.B="",this.w=new Br,this.L=0,this.j=new Ce((function(){!function(e){p((function t(){var n,i;return O(t,(function(t){switch(t.o){case 1:return W.info("Updating manifest..."),e.f?(k(t,2),A(t,e.update(),4)):t.return();case 4:n=e.L,e.j.T(n),C(t,0);break;case 2:if(i=N(t),!e.f)return t.return();i.severity=1,e.f.onError(i),e.j.T(.1),I(t)}}))}))}(e)})),this.g=pa,this.u=null,this.G=0,this.J=1/0,this.l=new ze,this.K=[],this.s=new Map,this.X=!1}function Yr(e,t){return p((function n(){var i,r,a,o,s,u,c,l,d,h;return O(n,(function(n){switch(n.o){case 1:return i=Or,r=ma,a=t.If,A(n,ha(e,Ye([a],e.a.retryParameters),0),2);case 2:if(o=n.A,1!=(s=Gr(e.w,o.data,o.uri)).type)throw new Me(2,4,4017);return c=(u=i.xb(s.a,"EXT-X-MEDIA-SEQUENCE"))?Number(u.value):0,l=t.stream,A(n,ia(e,t.hd,s,c,l.mimeType,l.codecs),3);case 3:d=n.A,t.yc.a=d,h=d[d.length-1],i.xb(s.a,"EXT-X-ENDLIST")&&(da(e,r.ub),e.c.Ta(h.endTime)),I(n)}}))}))}function $r(e){e.forEach((function(e){if(e){var t=e.stream.codecs.split(",");t=t.filter((function(e){return"mp4a.40.34"!=e})),e.stream.codecs=t.join(",")}}))}function Jr(e,t,n,i,r){return{id:e.Z++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:i,drmInfos:r,allowedByApplication:!0,allowedByKeySystem:!0}}function Zr(e,t,n){return p((function i(){var r,a,o,s,u,c,l,d,h,f,p,m;return O(i,(function(i){switch(i.o){case 1:if(r=oa(t,"URI"),e.b.has(r))return i.return(e.b.get(r));if(a=oa(t,"TYPE").toLowerCase(),o=nn,"subtitles"==a&&(a=o.Na),s=ee(Ur(t,"LANGUAGE","und")),u=Ur(t,"NAME"),c=t.getAttribute("DEFAULT"),l=t.getAttribute("AUTOSELECT"),d=Ur(t,"CHANNELS"),"audio"==a)if(d){var g=d.split("/")[0];g=parseInt(g,10)}else g=null;else g=null;return h=g,f=!!c||!!l,p=Ur(t,"CHARACTERISTICS"),A(i,Qr(e,r,n,a,s,f,u,h,null,p),2);case 2:return m=i.A,e.b.has(r)?i.return(e.b.get(r)):null==m?i.return(null):(e.H.set(t.id,m),e.b.set(r,m),i.return(m))}}))}))}function Qr(e,t,n,i,r,a,o,s,u,c){return p((function l(){var d,f,m,g,v,y,b,E,w,T,S,I,x,P,M,R,L,U,_,D,F,j,K,B,G,V,z;return O(l,(function(l){switch(l.o){case 1:return f=(d=Or).nd(e.B,t),A(l,ha(e,Ye([f],e.a.retryParameters),0),2);case 2:if(m=l.A,f=m.uri,1!=(g=Gr(e.w,m.data,f)).type)throw new Me(2,4,4017);v=[],g.segments.forEach((function(e){e=d.Mb(e.b,"EXT-X-KEY"),v.push.apply(v,e)})),y=!1,b=[],E=null;for(var H=h(v),q=H.next();!q.done;q=H.next())if(w=q.value,"NONE"!=(T=oa(w,"METHOD"))){if(y=!0,"AES-128"==T)return W.v("Unsupported HLS Encryption",T),e.X=!0,l.return(null);S=oa(w,"KEYFORMAT"),(x=(I=fa[S])?I(w):null)?(x.keyIds.length&&(E=x.keyIds[0]),b.push(x)):W.v("Unsupported HLS KEYFORMAT",S)}if(y&&!b.length)throw new Me(2,4,4026);return function(e,t){var n=ma,i=Or.xb(t.a,"EXT-X-PLAYLIST-TYPE"),r=Or.xb(t.a,"EXT-X-ENDLIST");r=i&&"VOD"==i.value||r,i=i&&"EVENT"==i.value&&!r,i=!r&&!i,r?da(e,n.ub):(da(e,i?n.ue:n.Cf),n=sa(t.a,"EXT-X-TARGETDURATION"),n=Number(n.value),e.G=Math.max(n,e.G),e.J=Math.min(n,e.J))}(e,g),P=function(e,t){if(1==t.length)return t[0];var n=aa(e,t);if(null!=n)return n;throw new Me(2,4,4025,t)}(i,n),A(l,function(e,t,n,i){return p((function r(){var a,o,s,u,c,l,d,h,f;return O(r,(function(r){switch(r.o){case 1:return a=nn,o=i.segments[0].a,s=new pe(o),u=s.Ca.split(".").pop(),c=la[t],(l=c[u])?r.return(l):t==a.Na?n&&"vtt"!=n?r.return("application/mp4"):r.return("text/vtt"):((d=Ye([o],e.a.retryParameters)).method="HEAD",A(r,ha(e,d,1),2));case 2:if(h=r.A,!(f=h.headers["content-type"]))throw new Me(2,4,4021,u);return r.return(f.split(";")[0])}}))}))}(e,i,P,g),3);case 3:return M=l.A,ca.includes(M)&&(P=""),L=(R=d.xb(g.a,"EXT-X-MEDIA-SEQUENCE"))?Number(R.value):0,k(l,4),A(l,ia(e,t,g,L,M,P),6);case 6:U=l.A,C(l,5);break;case 4:if(4035==(_=N(l)).code)return W.ba("Skipping unsupported HLS stream",M,t),l.return(null);throw _;case 5:return D=U[0].startTime,F=U[U.length-1].endTime,j=F-D,K=new ar(U),B=ea(g),G=void 0,"text"==i&&(G="subtitle"),V=[],c&&V.push(c),z={id:e.Z++,originalId:o,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:K.find.bind(K),getSegmentReference:K.get.bind(K),initSegmentReference:B,presentationTimeOffset:0,mimeType:M,codecs:P,kind:G,encrypted:y,keyId:E,language:r,label:o,type:i,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:V,channelsCount:s,audioSamplingRate:null,closedCaptions:u},l.return({stream:z,yc:K,drmInfos:b,hd:t,If:f,Kd:D,Oh:F,duration:j})}}))}))}function ea(e){var t=Or.Mb(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new Me(2,4,4020);var n=oa(t=t[0],"URI"),i=Or.nd(e.b,n);return e=0,n=null,(t=Ur(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),n=(e=Number(e[1]))+t-1),new ir((function(){return[i]}),e,n)}function ta(e,t,n,i){var r=t.b,a=t.a;t=sa(r,"EXTINF").value.split(","),t=i+Number(t[0]);var o=0,s=null;return(r=Or.xb(r,"EXT-X-BYTERANGE"))&&(o=r.value.split("@"),r=Number(o[0]),s=(o=o[1]?Number(o[1]):e.a+1)+r-1),new rr(n,i,t,(function(){return[a]}),o,s)}function na(e){e.c&&(e.K.forEach((function(t){e.c.Xb(t,0)})),e.K=[])}function ia(e,t,n,i,r,a){return p((function o(){var s,u,c,l,d,h,f,m,g,v;return O(o,(function(o){switch(o.o){case 1:return s=n.segments,u=[],c=s[0].a,l=ta(null,s[0],i,0),d=ea(n),A(o,function(e,t,n,i,r,a){return p((function o(){var s,u,c,l,d,h,f,p,m;return O(o,(function(o){switch(o.o){case 1:if(e.u){if(s=e.b.get(t),u=s.yc,c=u.get(i.position))return W.I("Found segment start time in previous manifest"),o.return(c.startTime);W.debug("Unable to find segment start time in previous manifest!")}if(W.I("Fetching segment to find start time"),r=r.toLowerCase(),ca.includes(r))throw W.ba("Raw formats are not yet supported.  Skipping "+r),new Me(1,4,4035);if("video/webm"==r)throw W.ba("WebM in HLS is not yet supported.  Skipping."),new Me(1,4,4035);if("video/mp4"!=r&&"audio/mp4"!=r){o.C(2);break}return l=[ra(e,i)],n&&l.push(ra(e,n)),A(o,Promise.all(l),3);case 3:return d=o.A,h=d[0],f=d[1]||d[0],o.return(function(e,t,n,i){var r=0;if((new ji).P("moov",Ki).P("trak",Ki).P("mdia",Ki).za("mdhd",(function(e){e.reader.V(0==e.version?8:16),r=e.reader.M(),e.parser.stop()})).parse(i,!0),!r)throw W.error("Unable to find timescale in init segment!"),new Me(2,4,4030,e,t);var a=0,o=!1;if((new ji).P("moof",Ki).P("traf",Ki).za("tfdt",(function(e){a=(0==e.version?e.reader.M():e.reader.cc())/r,o=!0,e.parser.stop()})).parse(n,!0),!o)throw new Me(2,4,4030,e,t);return a}(t,h.uri,h.data,f.data));case 2:if("video/mp2t"!=r){o.C(4);break}return A(o,ra(e,i),5);case 5:return p=o.A,o.return(function(e,t,n){function i(){a.seek(o+188),71!=(s=a.Ea())&&(a.seek(o+192),s=a.Ea()),71!=s&&(a.seek(o+204),s=a.Ea()),71!=s&&r(),a.mf(1)}function r(){throw new Me(2,4,4030,e,t)}for(var a=new Oi(new DataView(n),0),o=0,s=0;;)if(o=a.va(),71!=(s=a.Ea())&&r(),8191==(8191&(n=a.wc())))i();else if(16384&n){if(0!=(n=(48&a.Ea())>>4)&&2!=n||r(),3==n&&(n=a.Ea(),a.V(n)),1==a.M()>>8)return a.V(3),0!=(n=a.Ea()>>6)&&1!=n||r(),0==a.Ea()&&r(),(1073741824*((14&(n=a.Ea()))>>1)+((65534&a.wc())<<14|(65534&a.wc())>>1))/9e4;i()}else i()}(t,p.uri,p.data));case 4:if("application/mp4"!=r&&!r.startsWith("text/")){o.C(6);break}return A(o,ra(e,i),7);case 7:return m=o.A,o.return(function(e,t,n){return xn(e=st(e,t))?(Cn(t=new In(null),e),t.Qc(n)):0}(r,a,m.data));case 6:throw new Me(2,4,4030,t)}}))}))}(e,t,d,l,r,a),2);case 2:h=o.A,W.debug("First segment",c.split("/").pop(),"starts at",h);for(var y=0;y<s.length;++y)f=s[y],m=u[u.length-1],g=0==y?h:m.endTime,v=ta(m,f,i+y,g),u.push(v);return e.K.push(u),na(e),o.return(u)}}))}))}function ra(e,t){return p((function n(){var i,r,a,o,s,u;return O(n,(function(n){switch(n.o){case 1:return i=1,r=wr(t.c(),t.b,t.b+2048-1,e.a.retryParameters),a=wr(t.c(),t.b,t.a,e.a.retryParameters),e.a.hls.useFullSegmentsForStartTime?n.return(ha(e,a,i)):(k(n,2),A(n,ha(e,r,i),4));case 4:return o=n.A,n.return(o);case 2:if(7001==(s=N(n)).code)throw s;return W.ba("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",r.uris[0]),A(n,ha(e,a,i),5);case 5:return u=n.A,n.return(u)}}))}))}function aa(e,t){for(var n=ua[e],i=0;i<n.length;i++)for(var r=0;r<t.length;r++)if(n[i].test(t[r].trim()))return t[r].trim();return"text"==e?"":null}function oa(e,t){var n=e.getAttribute(t);if(!n)throw new Me(2,4,4023,t);return n.value}function sa(e,t){var n=Or.xb(e,t);if(!n)throw new Me(2,4,4024,t);return n}V("shaka.net.DataUriPlugin",qr),qr.parse=function(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw W.error("Bad data URI, failed to parse scheme"),new Me(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw W.error("Bad data URI, failed to extract encoding and MIME type"),new Me(2,1,1004,t);var i=n[0];n=e.decodeURIComponent(n.slice(1).join(","));var r=null;if(1<(i=i.split(";")).length&&(r=i[1]),"base64"==r)t=It.Za(n).buffer;else{if(r)throw W.error("Bad data URI, unknown encoding"),new Me(2,1,1005,t);t=wt(n)}return{data:t,contentType:i[0]}},Xe("data",qr),V("shaka.hls.HlsParser",Xr),(i=Xr.prototype).configure=function(e){this.a=e},i.start=function(e,t){var n=this;return p((function i(){var r,a;return O(i,(function(i){switch(i.o){case 1:return n.f=t,A(i,ha(n,Ye([e],n.a.retryParameters),0),2);case 2:return r=i.A,n.B=r.uri,A(i,function(e,t){return p((function n(){var i,r,a,o,s,u,c,l,d,f,m;return O(n,(function(n){switch(n.o){case 1:if(0!=(i=Gr(e.w,t,e.B)).type)throw new Me(2,4,4022);return A(n,function(e,t){return p((function n(){var i,r,a,o,s,u,c,l,d,f,m,g;return O(n,(function(n){switch(n.o){case 1:return i=Or,r=Qt,a=t.a,o=i.Mb(t.a,"EXT-X-MEDIA"),s=o.filter(function(e){return"SUBTITLES"==oa(e,"TYPE")}.bind(e)),u=s.map(function(e){var t=this;return p((function n(){var i;return O(n,(function(n){switch(n.o){case 1:return t.a.disableText?n.return(null):(k(n,2),A(n,function(e,t){return p((function n(){var i;return O(n,(function(n){switch(n.o){case 1:return oa(t,"TYPE"),A(n,Zr(e,t,[]),2);case 2:return i=n.A,n.return(i.stream)}}))}))}(t,e),4));case 4:return n.return(n.A);case 2:if(i=N(n),t.a.hls.ignoreTextStreamFailures)return n.return(null);throw i}}))}))}.bind(e)),c=o.filter((function(e){return"CLOSED-CAPTIONS"==oa(e,"TYPE")})),function(e,t){for(var n=h(t),i=n.next();!i.done;i=n.next()){oa(i=i.value,"TYPE");var r=Ur(i,"LANGUAGE")||"und";r=ee(r);var a=oa(i,"GROUP-ID");i=oa(i,"INSTREAM-ID"),e.s.get(a)||e.s.set(a,new Map),e.s.get(a).set(i,r)}}(e,c),A(n,Promise.all(u),2);case 2:return l=n.A,d=i.Mb(a,"EXT-X-STREAM-INF"),f=d.map(function(e){return function(e,t,n){return p((function i(){var r,a,o,s,u,c,l,d,f,m,g,v,y,b,E,w,T,S,I,k,x,C,N,P,M,R,L;return O(i,(function(i){switch(i.o){case 1:return r=nn,a=Or,o=Ur(t,"CODECS","avc1.42E01E,mp4a.40.2"),s=function(e){for(var t=new Set,n=[],i=(e=h(e)).next();!i.done;i=e.next()){var r=ut(i=i.value)[0];t.has(r)?W.debug("Ignoring duplicate codec"):(n.push(i),t.add(r))}return n}(o.split(/\s*,\s*/)),u=t.getAttribute("RESOLUTION"),l=c=null,d=Ur(t,"FRAME-RATE"),f=Number(oa(t,"BANDWIDTH")),u&&(m=u.value.split("x"),c=m[0],l=m[1]),g=(g=a.Mb(n.a,"EXT-X-MEDIA")).filter((function(e){return"CLOSED-CAPTIONS"!=oa(e,"TYPE")})),g=g.filter((function(e){var t=Ur(e,"URI")||"";return"SUBTITLES"==(Ur(e,"TYPE")||"")||""!=t})),v=Ur(t,"AUDIO"),y=Ur(t,"VIDEO"),v?g=a.td(g,"AUDIO",v):y&&(g=a.td(g,"VIDEO",y)),(b=aa(r.Na,s))&&((E=Ur(t,"SUBTITLES"))&&(w=a.td(g,"SUBTITLES",E)).length&&(T=e.H.get(w[0].id))&&(T.stream.codecs=b),Ge(s,b)),S=g.map(function(e){return Zr(this,e,s)}.bind(e)),I=[],k=[],A(i,Promise.all(S),2);case 2:if(C=(C=i.A).filter((function(e){return null!=e})),v?I=C:y&&(k=C),W.debug("Guessing stream type for",t.toString()),P=!1,I.length||k.length?I.length?(R=oa(t,"URI"),L=I[0].hd,R==L?(W.debug("Guessing audio-only."),N=r.hc,P=!0):(W.debug("Guessing video."),N=r.tb)):(W.debug("Guessing audio."),N=r.hc):1==s.length?(M=aa(r.tb,s),u||d||M?(W.debug("Guessing video-only."),N=r.tb):(W.debug("Guessing audio-only."),N=r.hc)):(W.debug("Guessing multiplexed audio+video."),N=r.tb,s=[s.join(",")]),P){i.C(3);break}return A(i,function(e,t,n,i){return p((function r(){var a,o,s,u,c;return O(r,(function(r){switch(r.o){case 1:return a=nn,o=oa(t,"URI"),e.b.has(o)?r.return(e.b.get(o)):(s=Ur(t,"CLOSED-CAPTIONS"),u=null,i==a.tb&&s&&"NONE"!=s&&(u=e.s.get(s)),A(r,Qr(e,o,n,i,"und",!1,null,null,u,null),2));case 2:return null==(c=r.A)?r.return(null):e.b.has(o)?r.return(e.b.get(o)):(e.b.set(o,c),r.return(c))}}))}))}(e,t,s,N),4);case 4:x=i.A;case 3:if(x)x.stream.type==r.hc?I=[x]:k=[x];else if(null===x)return W.debug("streamInfo is null"),i.return([]);return k&&$r(k),I&&$r(I),i.return(function(e,t,n,i,r,a,o){n.forEach(function(e){(e=e.stream)&&(e.width=Number(r)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(o)||void 0)}.bind(e));var s=!!e.a&&e.a.disableAudio;t.length&&!s||(t=[null]),s=!!e.a&&e.a.disableVideo,(!n.length||s)&&(n=[null]),s=[];for(var u=(t=h(t)).next();!u.done;u=t.next()){u=u.value;for(var c=h(n),l=c.next();!l.done;l=c.next()){var d=l.value;l=u?u.stream:null;var f=d?d.stream:null,p=u?u.drmInfos:null,m=d?d.drmInfos:null;d=(d?d.hd:"")+" - "+(u?u.hd:"");var g=void 0;if(l&&f){if(p.length&&m.length&&!(0<Bt(p,m).length)){W.v("Incompatible DRM info in HLS variant.  Skipping.");continue}g=Bt(p,m)}else l?g=p:f&&(g=m);e.O.has(d)?W.debug("Skipping variant which only differs in text streams."):(l=Jr(e,l,f,i,g),s.push(l),e.O.add(d))}}return s}(e,I,k,f,c,l,d))}}))}))}(this,e,t)}.bind(e)),A(n,Promise.all(f),3);case 3:return m=n.A,g=(g=m.reduce(r.md,[])).filter((function(e){return null!=e})),n.return({startTime:0,variants:g,textStreams:l.filter((function(e){return null!=e}))})}}))}))}(e,i),2);case 2:if(r=n.A,!e.f)throw new Me(2,7,7001);if(e.X&&0==r.variants.length)throw W.info("No stream is created, because we don't support AES-128","encryption yet"),new Me(2,4,4034);e.f.filterAllPeriods([r]),a=1/0,o=0,s=1/0;for(var g=h(e.b.values()),v=g.next();!v.done;v=g.next())u=v.value,a=Math.min(a,u.Kd),o=Math.max(o,u.Kd),"text"!=u.stream.type&&(s=Math.min(s,u.duration));if(e.g!=ma.ub?(e.c=new Er(0,3*e.G),e.c.Ac(!1)):(e.c=new Er(null,0),e.c.Ac(!0)),na(e),e.g!=ma.ub){for(e.L=e.J,c=ma,e.g==c.ue&&(l=e.c.$c,isNaN(e.a.availabilityWindowOverride)||(l=e.a.availabilityWindowOverride),e.c.ge(l)),d=0;95443.7176888889<=o;)d+=95443.7176888889,o-=95443.7176888889;if(d)for(W.debug("Offsetting live streams by",d,"to compensate for rollover"),v=(g=h(e.b.values())).next();!v.done;v=g.next())95443.7176888889>(f=v.value).Kd?(W.I("Offset applied to",f.stream.type),f.stream.presentationTimeOffset=-d,f.yc.offset(d)):W.I("Offset NOT applied to",f.stream.type)}else for(e.c.Ta(s),e.c.offset(-a),v=(g=h(e.b.values())).next();!v.done;v=g.next())(m=v.value).stream.presentationTimeOffset=a,m.yc.offset(-a),or(m.yc,s);e.u={presentationTimeline:e.c,periods:[r],offlineSessionIds:[],minBufferTime:0},I(n)}}))}))}(n,r.data),3);case 3:return 0<(a=n.L)&&n.j.T(a),i.return(n.u)}}))}))},i.stop=function(){this.j&&(this.j.stop(),this.j=null);var e=[];return this.l&&(e.push(this.l.destroy()),this.l=null),this.a=this.f=null,this.H.clear(),this.O.clear(),this.b.clear(),this.u=null,Promise.all(e)},i.update=function(){if(this.g!=ma.ub){for(var e=[],t=h(this.b.values()),n=t.next();!n.done;n=t.next())e.push(Yr(this,n.value));return Promise.all(e)}},i.onExpirationUpdated=function(){};var ua={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},ca=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],la={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function da(e,t){e.g=t,e.c&&e.c.Ac(e.g==ma.ub),e.g!=ma.ub||e.j.stop()}function ha(e,t,n){if(!e.l)throw new Me(2,7,7001);return t=e.f.networkingEngine.request(n,t),He(e.l,t),t.promise}var fa={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=oa(e,"METHOD");qn("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227");var n=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return n.includes(t)?(t=oa(e,"URI"),t=qr.parse(t),t=tn("com.widevine.alpha",[{initDataType:"cenc",initData:t=new Uint8Array(t.data)}]),(e=Ur(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t):(W.error("Widevine in HLS is only supported with [",n.join(", "),"], not",t),null)}},pa="VOD",ma={ub:pa,Cf:"EVENT",ue:"LIVE"};function ga(){this.a=new Map}function va(e,t,n){ya(e,t).text=n}function ya(e,t){return e.a.has(t)||e.a.set(t,new ba),e.a.get(t)}function ba(){this.text=this.variant=null}function Ea(e,t){this.a=e,this.b=new Set([e]);for(var n=h(t=t||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function wa(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!(n.channelsCount==i.channelsCount&&Ta(n,i)&&Sa(n.roles,i.roles))}return!n&&(n=e.video&&t.video)&&(n=!(Ta(n=e.video,i=t.video)&&Sa(n.roles,i.roles))),!n}function Ta(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return ut(e)[0]})),i=t.codecs.split(",").map((function(e){return ut(e)[0]}));if(n.length!=i.length)return!1;n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return!1;return!0}function Sa(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size!=i.size)return!1;for(var r=(n=h(n)).next();!r.done;r=n.next())if(!i.has(r.value))return!1;return!0}function Aa(e){this.a=e,this.b=new Ia(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function Ia(e,t,n,i,r){this.f=e,this.c=t,this.a=n,this.b=void 0===i?"":i,this.g=void 0===r?"":r}function ka(){this.a=Na,this.b=(new Map).set(Na,2).set(Ca,1)}function xa(e,t,n){e.b.set(Na,n).set(Ca,t)}br.Wd("m3u8",Xr),br.dc("application/x-mpegurl",Xr),br.dc("application/vnd.apple.mpegurl",Xr),Ea.prototype.add=function(e){return wa(this.a,e)?(this.b.add(e),!0):(W.v("Rejecting variant - not compatible with root."),!1)},Ea.prototype.values=function(){return this.b.values()},Aa.prototype.create=function(e){var t=this,n=e.filter((function(e){return wa(t.a,e)}));return n.length?new Ea(n[0],n):this.b.create(e)},Ia.prototype.create=function(e){var t=[];t=function(e,t){var n=ie(ee(t),e.map((function(e){return ne(e)})));return n?e.filter((function(e){return n==ne(e)})):[]}(e,this.f);var n=e.filter((function(e){return e.primary}));for(t=t.length?t:n.length?n:e,this.c&&(e=function(e,t,n){return e.filter((function(e){if(n){var i=e[n];return i&&i.roles.includes(t)}return i=e.audio,e=e.video,i&&0<=i.roles.indexOf(t)||e&&0<=e.roles.indexOf(t)}))}(t,this.c,this.g),e.length?t=e:W.v("No exact match for variant role could be found.")),this.a&&((e=Vn.He(t,this.a)).length?t=e:W.v("No exact match for the channel count could be found.")),this.b&&(e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.b),e.length?t=e:W.v("No exact match for variant label could be found.")),e=new Ea(t[0]),n=(t=h(t)).next();!n.done;n=t.next())n=n.value,wa(e.a,n)&&e.add(n);return e};var Ca=0,Na=1;function Pa(e,t){this.g=e,this.j=Ra(e),this.a=e.a.currentTime,this.f=Date.now()/1e3,this.b=!1,this.l=t,this.c=function(){}}function Ma(e){this.a=e}function Ra(e){if(e.a.paused||0==e.a.playbackRate||0==e.a.buffered.length)var t=!1;else e:{t=e.a.buffered,e=e.a.currentTime;for(var n=0;n<t.length;n++){var i=t.start(n),r=t.end(n);if(!(e<i||e>r-.5)){t=!0;break e}}t=!1}return t}function La(e,t,n,i,r){var a=this;this.a=e,this.B=t,this.w=n,this.s=r,this.f=new et,this.l=!1,this.u=e.readyState,this.c=!1,this.b=i,this.j=!1,this.f.m(e,"waiting",(function(){return Ua(a)})),this.g=new Ce((function(){Ua(a)})).Ua(.25)}function Ua(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.l)return}else e.l=!1;if(!e.a.paused){e.a.readyState!=e.u&&(e.c=!1,e.u=e.a.readyState);var t=e.w.smallGapLimit,n=e.a.currentTime,i=e.a.buffered;e:{if(i&&i.length&&!(1==i.length&&1e-6>i.end(0)-i.start(0)))for(var r=pt("Edge/")||pt("Trident/")||pt("Tizen")||pt("CrKey")?.5:.1,a=0;a<i.length;a++)if(i.start(a)>n&&(0==a||i.end(a-1)-n<=r)){r=a;break e}r=null}if(null==r)e.b&&(i=Ra(n=(e=e.b).g),r=n.a.currentTime,a=Date.now()/1e3,e.a==r&&e.j==i||(e.f=a,e.a=r,e.j=i,e.b=!1),(r=a-e.f)>=e.l&&i&&!e.b&&(e.c(e.a,r),e.b=!0,e.a=n.a.currentTime));else if(0!=r||e.j){a=i.start(r);var o=e.B.ab();if(!(a>=o)){t=(o=a-n)<=t;var s=!1;if(!(.001>o)){if(!t&&!e.c){e.c=!0;var u=new H("largegap",{currentTime:n,gapSize:o});u.cancelable=!0,e.s(u),e.w.jumpLargeGaps&&!u.defaultPrevented?s=!0:W.info("Ignoring large gap at",n,"size",o)}(t||s)&&(0==r?W.info("Jumping forward",o,"seconds because of gap before start time of",a):W.info("Jumping forward",o,"seconds because of gap starting at",i.end(r-1),"and ending at",a),e.a.currentTime=a)}}}}}}function _a(e){var t=this;this.c=e,this.a=new Set,this.b=new Ce((function(){Oa(t,!1)})).Ua(.25)}function Oa(e,t){for(var n=h(e.a),i=n.next();!i.done;i=n.next())i.value.g(e.c.currentTime,t)}function Da(e){for(var t=[],n=(e=h(e)).next();!n.done;n=e.next())for(var i=(n=h(n.value.variants)).next();!i.done;i=n.next())t.push(i.value);return t}function Fa(e,t){for(var n=null,i=h(e),r=i.next();!r.done;r=i.next())t>=(r=r.value).startTime&&(n=r);return n}function ja(e){this.c=e,this.a=null,this.b=function(){}}function Ka(e){var t=this;this.a=e,this.f=!1,this.c=this.a.Pc(),this.b=new Ce((function(){t.a.Te(.25*t.c)}))}function Ba(e){e.b.stop();var t=e.f?0:e.c;if(0<=t)try{return void(e.a.Pc()!=t&&e.a.ee(t))}catch(e){}e.b.Ua(.25),0!=e.a.Pc()&&e.a.ee(0)}function Ga(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=Va.get(t),n.Ha(e,t,i))}Pa.prototype.release=function(){this.g=null,this.c=function(){}},La.prototype.release=function(){this.f&&(this.f.release(),this.f=null),null!=this.g&&(this.g.stop(),this.g=null),this.b&&(this.b.release(),this.b=null),this.a=this.B=this.s=null},La.prototype.Rd=function(){this.j=!0,Ua(this)},_a.prototype.release=function(){this.b.stop();for(var e=h(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},ja.prototype.release=function(){this.a=this.c=null,this.b=function(){}},ja.prototype.g=function(e){var t=this.a,n=this.c.periods;t!=(e=Fa(n,e)||n[0])&&this.b(e),this.a=e},Ka.prototype.release=function(){this.b&&(this.b.stop(),this.b=null),this.a=null},Ka.prototype.set=function(e){this.c=e,Ba(this)};var Va=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function za(e,t,n){var i=this;this.a=e,this.g=t,this.f=n,this.j=!1,this.b=new et,this.c=new Ya(e),Ga(this.a,HTMLMediaElement.HAVE_METADATA,this.b,(function(){qa(i,i.f)}))}function Ha(e){return e.j?e.a.currentTime:e.f}function Wa(e,t){0<e.a.readyState?$a(e.c,t):Ga(e.a,HTMLMediaElement.HAVE_METADATA,e.b,(function(){qa(e,e.f)}))}function qa(e,t){.001>Math.abs(e.a.currentTime-t)?Xa(e):(e.b.Ha(e.a,"seeking",(function(){Xa(e)})),$a(e.c,0==e.a.currentTime?t:e.a.currentTime))}function Xa(e){e.j=!0,e.b.m(e.a,"seeking",(function(){return e.g()}))}function Ya(e){var t=this;this.b=e,this.j=10,this.g=this.c=this.f=0,this.a=new Ce((function(){0>=t.f?(W.v(["Failed to move playhead from",t.c,"to",t.g].join(" ")),t.a.stop()):t.b.currentTime!=t.c?t.a.stop():(t.b.currentTime=t.g,t.f--)}))}function $a(e,t){e.c=e.b.currentTime,e.g=t,e.f=e.j,e.b.currentTime=t,e.a.Ua(.1)}function Ja(e){var t=this;this.a=e,this.f=!1,this.c=null,this.b=new et,Ga(this.a,HTMLMediaElement.HAVE_CURRENT_DATA,this.b,(function(){null==t.c?t.f=!0:(t.b.Ha(t.a,"seeking",(function(){t.f=!0})),t.a.currentTime=Math.max(0,t.a.currentTime+t.c))}))}function Za(e,t,n,i,r,a){var o=this;this.b=e,this.a=t.presentationTimeline,this.G=t.minBufferTime||0,this.j=n,this.B=r,this.s=null,this.f=new La(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,i=new Pa(new Ma(e),t.stallThreshold);return function(e,t){e.c=t}(i,(function(t,i){W.debug(["Stall detected at",t,"for",i,"seconds. Seeking forward",n,"seconds."].join(" ")),e.currentTime+=n})),i}(e,n),a),this.c=new za(e,(function(){e:{var e=o.f;e.l=!0,e.j=!1,e.c=!1,e=Ha(o.c);var t=eo(o,e);if(.001<Math.abs(t-e)){var n=(new Date).getTime()/1e3;if(!o.s||o.s<n-1){o.s=n,Wa(o.c,t),e=void 0;break e}}W.I("Seek to "+e),o.B(),e=void 0}return e}),function(e,t){return null==t?t=1/0>e.a.ra()?e.a.Ob():e.a.ab():0>t&&(t=e.a.ab()+t),Qa(e,to(e,t))}(this,i)),this.l=new Ce((function(){if(0!=o.b.readyState&&!o.b.paused){var e=o.b.currentTime,t=o.a.Ob(),n=o.a.ab();3>n-t&&(t=n-3),e<t&&(t=eo(o,e),W.info("Jumping forward "+(t-e)+" seconds to catch up with the seek range."),o.b.currentTime=t)}})).Ua(.25)}function Qa(e,t){var n=e.a.ra();return t>=n?n-e.j.durationBackoff:t}function eo(e,t){var n=$t.bind(null,e.b.buffered),i=Math.max(e.G,e.j.rebufferingGoal),r=e.j.safeSeekOffset,a=e.a.Ob(),o=e.a.ab(),s=e.a.ra();3>o-a&&(a=o-3);var u=e.a.nc(i),c=e.a.nc(r);return i=e.a.nc(i+r),t>=s?(W.I("Playhead past duration."),Qa(e,t)):t>o?(W.I("Playhead past end."),o):t<a?n(c)?(W.I("Playhead before start & start is buffered"),c):(W.I("Playhead before start & start is unbuffered"),i):t>=u||n(t)?(W.I("Playhead in safe region or in buffered region."),t):(W.I("Playhead outside safe region & in unbuffered region."),i)}function to(e,t){var n=e.a.Ob();return t<n||t>(n=e.a.ab())?n:t}function no(){this.b=function(){},this.a=new Set}function io(e){var t=this;this.j=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.l=[{Jb:null,Ib:ao,Ab:function(e,n){return t.a(e,n)}},{Jb:ro,Ib:ao,Ab:function(e,n){return t.a(e,n)}},{Jb:oo,Ib:ao,Ab:function(e,n){return t.a(e,n)}},{Jb:ao,Ib:ro,Ab:function(e,n){return t.b(e,n)}},{Jb:ao,Ib:oo,Ab:function(e,n){return t.b(e,n)}},{Jb:ro,Ib:oo,Ab:function(e,n){return t.c(e,n)}},{Jb:oo,Ib:ro,Ab:function(e,n){return t.c(e,n)}}]}za.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.g=function(){},this.a=null},Ya.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},Ja.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},Ja.prototype.u=function(e){this.c=this.f?this.c:e},Ja.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0},Ja.prototype.w=function(){},Za.prototype.release=function(){this.c&&(this.c.release(),this.c=null),this.f&&(this.f.release(),this.f=null),this.l&&(this.l.stop(),this.l=null),this.b=this.c=this.a=this.j=null,this.B=function(){}},Za.prototype.u=function(e){Wa(this.c,e)},Za.prototype.g=function(){var e=Ha(this.c);return 0<this.b.readyState&&!this.b.paused?to(this,e):e},Za.prototype.w=function(){this.f.Rd()},no.prototype.release=function(){this.b=function(){},this.a.clear()},io.prototype.release=function(){this.j=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}},io.prototype.g=function(e,t){for(var n=h(this.j.a),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.f.get(i),a=e<i.startTime?ro:e>i.endTime?oo:ao;this.f.set(i,a);for(var o=h(this.l),s=o.next();!s.done;s=o.next())(s=s.value).Jb==r&&s.Ib==a&&s.Ab(i,t)}};var ro=1,ao=2,oo=3;function so(e,t){this.a=t,this.c=e,this.g=null,this.s=1,this.B=Promise.resolve(),this.j=[],this.l=new Map,this.b=new Map,this.w=!1,this.J=null,this.H=this.f=this.u=!1,this.G=0}function uo(e){return lo(e,"audio")}function co(e){return lo(e,"video")}function lo(e,t){var n=e.b.get(t);return n?n.mb||n.stream:null}function ho(e,t){return p((function n(){var i,r,a,o,s,u,c,l,d;return O(n,(function(n){switch(n.o){case 1:return i=nn,A(n,jn(e.a.U,i.Na),2);case 2:return e.G++,e.H=!1,r=e.G,a=e.a.U,o=new Map,s=new Set,o.set(i.Na,t),s.add(t),A(n,a.init(o,!1),3);case 3:return e.f?n.return():A(n,Eo(e,s),4);case 4:if(e.f)return n.return();u=e.a.U.g.isTextVisible()||e.g.alwaysStreamText,e.G!=r||e.b.has(i.Na)||e.H||!u||(c=e.a.yb(),l=Co(e,c),d=yo(t,l,0),e.b.set(i.Na,d),Ro(e,d,0)),I(n)}}))}))}function fo(e,t){var n=e.b.get("video");if(n){var i=n.stream;if(i)if(W.debug("setTrickPlay",t),t){var r=i.trickModeVideo;r&&!n.mb&&(W.debug("Engaging trick mode stream",r),mo(e,r,!1,0,!1),n.mb=i)}else(i=n.mb)&&(W.debug("Restoring non-trick-mode stream",i),n.mb=null,mo(e,i,!0,0,!1))}}function po(e,t,n,i){var r=!1;if(t.video){var a=mo(e,t.video,n,i,!1);r=r||a}return t.audio&&(e=mo(e,t.audio,n,i,!1),r=r||e),r}function mo(e,t,n,i,r){var a=e.b.get(t.type);if(!a&&"text"==t.type&&e.g.ignoreTextStreamFailures)return ho(e,t),!0;if(!a)return!1;var o=No(e,t),s=Array.from(e.b.values()).every((function(e){return e.Ba==a.Ba}));return n&&o!=a.Ba&&s?(W.debug("switch: switching to stream in another Period; clearing buffer and changing Periods"),e.b.forEach((function(t){go(e,t)})),!0):(a.mb&&(W.debug("switch during trick play mode",t),t.trickModeVideo?(a.mb=t,t=t.trickModeVideo,W.debug("switch found trick play stream",t)):(a.mb=null,W.debug("switch found no special trick play stream"))),!(!(s=e.j[o])||!s.ec||!(s=e.l.get(t.id))||!s.ec||(a.stream!=t||r?("text"==t.type&&Ln(e.a.U,st(t.mimeType,t.codecs)),a.stream=t,a.Sc=!0,W.debug("switch: switching to Stream "+_o(a)),function(e,t,n){if(!t.uc)return!1;var i=e.a.yb(),r=On(e.a.U,t.type),a=So(e,t,i,r,n);return n=a&&a.a?a.a-a.b:null,a&&!n&&(n=(a.endTime-a.Qc())*t.stream.bandwidth/8),!isNaN(n)&&((a=t.stream.initSegmentReference)&&(n+=(a.a?a.a-a.b:null)||0),8*n/(a=e.a.getBandwidthEstimate())<r-i-Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal)||t.uc.b.a>n)}(e,a,o)&&(W.info("Aborting current segment request to switch."),a.uc.abort()),n&&(a.vb?a.jd=!0:a.kb?(a.qb=!0,a.Jc=i,a.jd=!0):(Lo(a),Mo(e,a,!0,i).catch((function(t){e.a&&e.a.onError(t)})))),0):(W.debug("switch: Stream "+_o(a)+" already active"),1))))}function go(e,t){var n=_o(t);t.vb?W.debug(n,"clear: already clearing the buffer"):t.qb?W.debug(n,"clear: already waiting"):t.kb?(W.debug(n,"clear: currently updating"),t.qb=!0,t.Jc=0):null==_n(e.a.U,t.type)?(W.debug(n,"clear: nothing buffered"),null==t.hb&&Ro(e,t,0)):(W.debug(n,"clear: handling right now"),Lo(t),Mo(e,t,!1,0).catch((function(t){e.a&&e.a.onError(t)})))}function vo(e,t,n,i,r){return p((function a(){var o,s,u,c,l,d,h;return O(a,(function(a){switch(a.o){case 1:return o=e.a.yb(),s=Co(e,o),u=nn,c=new Map,l=new Set,t&&(c.set(u.hc,t),l.add(t)),n&&(c.set(u.tb,n),l.add(n)),i&&(c.set(u.Na,i),l.add(i)),d=e.a.U,h=e.g.forceTransmuxTS,A(a,d.init(c,h),2);case 2:return e.f?a.return():(function(e){var t=e.c.presentationTimeline.ra();1/0>t?e.a.U.Ta(t):e.a.U.Ta(Math.pow(2,32))}(e),A(a,Eo(e,l),3));case 3:if(e.f)return a.return();c.forEach((function(t,n){if(!e.b.has(n)){var i=yo(t,s,r);e.b.set(n,i),Ro(e,i,0)}})),I(a)}}))}))}function yo(e,t,n){return{stream:e,type:e.type,Vb:null,cb:null,mb:null,Sc:!0,Ba:t,endOfStream:!1,kb:!1,hb:null,qb:!1,Jc:0,jd:!1,vb:!1,Vd:!1,rc:!1,Yd:n||0,uc:null}}function bo(e,t){var n=e.j[t];if(n)return W.debug("(all) Period "+t+" is being or has been set up"),n.promise;W.debug("(all) setting up Period "+t),n={promise:new Re,ec:!1},e.j[t]=n;for(var i=new Set,r=h(e.c.periods[t].variants),a=r.next();!a.done;a=r.next())(a=a.value).video&&i.add(a.video),a.video&&a.video.trickModeVideo&&i.add(a.video.trickModeVideo),a.audio&&i.add(a.audio);for(a=(r=h(e.c.periods[t].textStreams)).next();!a.done;a=r.next())i.add(a.value);return e.B=e.B.then(function(){if(!this.f)return Eo(this,i)}.bind(e)).then(function(){this.f||(this.j[t].promise.resolve(),this.j[t].ec=!0,W.I("(all) setup Period "+t))}.bind(e)).catch(function(e){this.f||(this.j[t].promise.catch((function(){})),this.j[t].promise.reject(),delete this.j[t],W.v("(all) failed to setup Period "+t),this.a.onError(e))}.bind(e)),n.promise}function Eo(e,t){return p((function n(){var i,r,a,o,s,u,c;return O(n,(function(n){switch(n.o){case 1:i=[];for(var l=h(t),d=l.next();!d.done;d=l.next())r=d.value,(a=e.l.get(r.id))?(W.debug("(all) Stream "+r.id+" is being or has been set up"),i.push(a.promise)):(W.I("(all) setting up Stream "+r.id),e.l.set(r.id,{promise:new Re,ec:!1}),i.push(r.createSegmentIndex()));return k(n,2),A(n,Promise.all(i),4);case 4:if(e.f)return n.return();C(n,3);break;case 2:if(o=N(n),e.f)return n.return();for(d=(n=h(t)).next();!d.done;d=n.next())s=d.value,e.l.get(s.id).promise.catch((function(){})),e.l.get(s.id).promise.reject(),e.l.delete(s.id);throw o;case 3:for(d=(l=h(t)).next();!d.done;d=l.next())u=d.value,(c=e.l.get(u.id)).ec||(c.promise.resolve(),c.ec=!0,W.I("(all) setup Stream "+u.id));I(n)}}))}))}function wo(e,t){if(!e.f){var n=_o(t);if(!t.kb&&null!=t.hb&&!t.vb)if(t.hb=null,t.qb)W.debug(n,"skipping update and clearing the buffer"),Mo(e,t,t.jd,t.Jc);else{try{var i=function(e,t){if(ko(t))return function(e,t){var n=On(e,"video")||0;!function(e,t,n){if(e.s=t,t=e.l.get(t))for(var i=h(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.c.append(r)}(e.a,t,n)}(e.a.U,t.stream.originalId||""),null;var n=_o(t),i=e.a.yb(),r=To(e,t,i);W.N(n,"timeNeeded="+r);var a=No(e,t.stream),o=Co(e,r),s=function(e,t,n){return"text"==t?null==(e=e.a).b||e.b<n?0:e.b-Math.max(n,e.a):Jt(e=Dn(e,t),n)}(e.a.U,t.type,i);W.N(n,"update_:","presentationTime="+i,"bufferedAhead="+s);var u=Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal,e.g.bufferingGoal)*e.s;if(r>=e.c.presentationTimeline.ra())return W.debug(n,"buffered to end of presentation"),t.endOfStream=!0,"video"==t.type&&(r=e.b.get("text"))&&"application/cea-608"==r.stream.mimeType&&(r.endOfStream=!0),null;if(t.endOfStream=!1,t.Ba=o,o!=a)return W.debug(n,"need Period "+o,"presentationTime="+i,"timeNeeded="+r,"currentPeriodIndex="+a),null;if(s>=u)return W.N(n,"buffering goal met"),.5;if(n=On(e.a.U,t.type),!(n=So(e,t,i,n,a)))return 1;var c=1/0;return Array.from(e.b.values()).forEach((function(t){ko(t)||(t=To(e,t,i),c=Math.min(c,t))})),r>=c+e.c.presentationTimeline.a?1:(t.Yd=0,function(e,t,n,i,r){var a=_o(t),o=e.c.periods[i];W.I(a,"fetchAndAppend_:","presentationTime="+n,"currentPeriod.startTime="+o.startTime,"reference.position="+r.position,"reference.startTime="+r.startTime,"reference.endTime="+r.endTime);var s=t.stream,u=e.c.presentationTimeline.ra(),c=e.c.periods[i+1];i=function(e,t,n,i,r){if(!t.Sc)return Promise.resolve();var a=_o(t);return n=e.c.periods[n].startTime-t.stream.presentationTimeOffset,W.I(a,"setting timestamp offset to "+n),W.I(a,"setting append window start to "+i),W.I(a,"setting append window end to "+r),i=function(e,t,n,i,r){return"text"==t?(e.a.u=n,(e=e.a).f=i,e.j=r,Promise.resolve()):Promise.all([Kn(e,t,e.Hf.bind(e,t)),Kn(e,t,e.uh.bind(e,t,n)),Kn(e,t,e.qh.bind(e,t,i,r))])}(e.a.U,t.type,n,i,r),t.stream.initSegmentReference?(W.I(a,"fetching init segment"),e=Po(e,t,t.stream.initSegmentReference).then(function(e){if(!this.f)return W.I(a,"appending init segment"),Fn(this.a.U,t.type,e,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size)}.bind(e)).catch((function(e){return t.Sc=!0,Promise.reject(e)})),Promise.all([i,e])):i}(e,t,i,Math.max(0,o.startTime-.1),c?c.startTime+.01:u),t.kb=!0,t.Sc=!1,W.N(a,"fetching segment"),u=Po(e,t,r),Promise.all([i,u]).then(function(e){if(!this.f&&!this.u)return function(e,t,n,i,r,a,o){var s=_o(t),u=r.closedCaptions&&0<r.closedCaptions.size;return null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length&&(new ji).za("emsg",e.K.bind(e,i,a,r.emsgSchemeIdUris)).parse(o),function(e,t,n){var i=_o(t);W.N(i,"checking buffer length");var r=Math.max(e.g.bufferBehind,e.c.presentationTimeline.a),a=_n(e.a.U,t.type);if(null==a)return W.N(i,"buffer behind okay because nothing buffered:","presentationTime="+n,"bufferBehind="+r),Promise.resolve();var o=n-a,s=o-r;return 0>=s?(W.N(i,"buffer behind okay:","presentationTime="+n,"bufferedBehind="+o,"bufferBehind="+r,"underflow="+-s),Promise.resolve()):(W.I(i,"buffer behind too large:","presentationTime="+n,"bufferedBehind="+o,"bufferBehind="+r,"overflow="+s),e.a.U.remove(t.type,a,a+s).then(function(){this.f||W.I(i,"evicted "+s+" seconds")}.bind(e)))}(e,t,n).then(function(){if(!this.f)return W.I(s,"appending media segment"),Fn(this.a.U,t.type,o,a.startTime+i.startTime,a.endTime+i.startTime,u)}.bind(e)).then(function(){if(!this.f)return W.N(s,"appended media segment"),t.Vb=r,t.cb=a,Promise.resolve()}.bind(e))}(this,t,n,o,s,r,e[1])}.bind(e)).then(function(){this.f||this.u||(t.kb=!1,t.Vd=!1,t.qb||this.a.Rd(),Ro(this,t,0),function(e,t,n){if(!e.w){var i=_o(t);if(1==(t=Array.from(e.b.values())).length&&"text"==t[0].type||(e.w=t.every((function(e){return"text"==e.type||!e.qb&&!e.vb&&e.cb}))),e.w){for(W.debug(i,"startup complete"),n=No(e,n),e.j[n]||bo(e,n).then(function(){this.f||(W.I(i,"calling onCanSwitch()..."),this.a.We())}.bind(e)).catch(Qt.Tc),n=0;n<e.c.periods.length;++n)bo(e,n).catch(Qt.Tc);e.a.Wg&&(W.I(i,"calling onStartupComplete()..."),e.a.Wg())}}}(this,t,s),W.I(a,"finished fetch and append"))}.bind(e)).catch(function(e){this.f||this.u||(t.kb=!1,"text"==t.type&&this.g.ignoreTextStreamFailures?(1001==e.code?W.v(a,"Text stream failed to download. Proceeding without it."):W.v(a,"Text stream failed to parse. Proceeding without it."),this.b.delete("text")):7001==e.code?(t.kb=!1,t.hb=null,Ro(this,t,0)):3017==e.code?function(e,t,n){var i=_o(t);if(Array.from(e.b.values()).some((function(e){return e!=t&&e.Vd})))W.debug(i,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var r=Math.round(100*e.s);if(20<r)e.s-=.2;else{if(!(4<r))return W.error(i,"MediaSource threw QuotaExceededError too many times"),t.rc=!0,e.u=!0,void e.a.onError(n);e.s-=.04}W.v(i,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*e.s))+"%"),t.Vd=!0}Ro(e,t,4)}(this,t,e):(W.error(a,"failed fetch and append: code="+e.code),t.rc=!0,e.severity=2,Uo(this,e)))}.bind(e))}(e,t,i,a,n),null)}(e,t);null!=i&&(Ro(e,t,i),t.rc=!1)}catch(t){return void Uo(e,t)}i=Array.from(e.b.values()),function(e,t){var n=_o(t),i=No(e,t.stream);if(t.Ba!=i){var r=t.Ba,a=Array.from(e.b.values());a.every((function(e){return e.Ba==r||ko(e)}))?a.every(xo)?(W.debug(n,"all need Period "+r),bo(e,r).then(function(){if(!this.f)if(a.every(function(e){var t=xo(e),n=No(this,e.stream);return!!ko(e)||t&&e.Ba==r&&n!=r}.bind(this))){var e=this.c.periods[r];W.I(n,"calling onChooseStreams()...");var t=this.a.Xe(e),i=new Map;t.variant&&t.variant.video&&i.set("video",t.variant.video),t.variant&&t.variant.audio&&i.set("audio",t.variant.audio),t.text&&i.set("text",t.text);for(var o=(t=h(this.b.keys())).next();!o.done;o=t.next())if(o=o.value,!i.has(o)&&"text"!=o)return W.error(n,"invalid Streams chosen: missing "+o+" Stream"),void this.a.onError(new Me(2,5,5005));for(o=(t=h(Array.from(i.keys()))).next();!o.done;o=t.next())if(o=o.value,!this.b.has(o)){if("text"!=o)return W.error(n,"invalid Streams chosen: unusable "+o+" Stream"),void this.a.onError(new Me(2,5,5005));vo(this,null,null,i.get("text"),e.startTime),i.delete(o)}for(o=(t=h(Array.from(this.b.keys()))).next();!o.done;o=t.next()){o=o.value;var s=this.b.get(o),u=i.get(o);if(u){var c=ko(s);c&&(s.Ba=r,s.Yd=e.startTime),mo(this,u,!1,0,!1),c&&ko(s)||Ro(this,this.b.get(o),0)}else this.b.delete(o)}W.I(n,"calling onCanSwitch()..."),this.a.We()}else W.debug(n,"ignoring transition to Period",r,"since another is happening")}.bind(e)).catch(Qt.Tc)):W.debug(n,"all MediaStates need Period "+r+", but not all MediaStates are idle"):W.debug(n,"not all MediaStates need Period "+r)}}(e,t),e.w&&i.every((function(e){return e.endOfStream}))&&(W.I(n,"calling endOfStream()..."),e.a.U.endOfStream().then(function(){if(!this.f){var e=this.a.U.ra();0!=e&&e<this.c.presentationTimeline.ra()&&this.c.presentationTimeline.Ta(e)}}.bind(e)))}}}function To(e,t,n){return t.Vb&&t.cb?(n=No(e,t.Vb),e.c.periods[n].startTime+t.cb.endTime):Math.max(n,t.Yd)}function So(e,t,n,i,r){var a=_o(t);return t.cb&&t.stream==t.Vb?(i=t.cb.position+1,W.N(a,"next position known:","position="+i),Io(e,t,r,i)):(t.cb?(W.I(a,"next position unknown: another Stream buffered"),a=No(e,t.Vb),a=Ao(e,t,e.c.periods[a].startTime+t.cb.endTime,r)):(W.I(a,"next position unknown: nothing buffered"),a=Ao(e,t,i||n,r)),null==a?null:(n=null,null==i&&(n=Io(e,t,r,Math.max(0,a-1))),n||Io(e,t,r,a)))}function Ao(e,t,n,i){var r=_o(t);return e=e.c.periods[i],W.debug(r,"looking up segment:","presentationTime="+n,"currentPeriod.startTime="+e.startTime),n=Math.max(0,n-e.startTime),null==(t=t.stream.findSegmentPosition(n))&&W.v(r,"cannot find segment:","currentPeriod.startTime="+e.startTime,"lookupTime="+n),t}function Io(e,t,n,i){var r=_o(t);return n=e.c.periods[n],(t=t.stream.getSegmentReference(i))?(e=(i=e.c.presentationTimeline).pc(),i=i.Pb(),n.startTime+t.endTime<e||n.startTime+t.startTime>i?(W.N(r,"segment is not available:","currentPeriod.startTime="+n.startTime,"reference.startTime="+t.startTime,"reference.endTime="+t.endTime,"availabilityStart="+e,"availabilityEnd="+i),null):t):(W.I(r,"segment does not exist:","currentPeriod.startTime="+n.startTime,"position="+i),null)}function ko(e){return e&&"text"==e.type&&"application/cea-608"==e.stream.mimeType}function xo(e){return!e.kb&&null==e.hb&&!e.qb&&!e.vb}function Co(e,t){var n=Fa(e.c.periods,t+rn);return n?e.c.periods.indexOf(n):0}function No(e,t){for(var n=e.c.periods,i=0;i<n.length;i++){for(var r=n[i],a=new Set,o=h(r.variants),s=o.next();!s.done;s=o.next())(s=s.value).audio&&a.add(s.audio),s.video&&a.add(s.video),s.video&&s.video.trickModeVideo&&a.add(s.video.trickModeVideo);for(o=(r=h(r.textStreams)).next();!o.done;o=r.next())a.add(o.value);if(a.has(t))return i}return-1}function Po(e,t,n){var i=wr(n.c(),n.b,n.a,e.g.retryParameters);return W.N("fetching: reference=",n),e=e.a.Wb.request(1,i),t.uc=e,e.promise.then((function(e){return t.uc=null,e.data}))}function Mo(e,t,n,i){return p((function r(){var a,o,s,u;return O(r,(function(r){switch(r.o){case 1:return a=_o(t),t.qb=!1,t.jd=!1,t.Jc=0,t.vb=!0,W.debug(a,"clearing buffer"),i?(s=e.a.yb(),u=e.a.U.ra(),o=e.a.U.remove(t.type,s+i,u)):o=jn(e.a.U,t.type).then(function(){if(!this.f&&n)return this.a.U.flush(t.type)}.bind(e)),A(r,o,2);case 2:if(e.f)return r.return();W.debug(a,"cleared buffer"),t.Vb=null,t.cb=null,t.vb=!1,t.endOfStream=!1,Ro(e,t,0),I(r)}}))}))}function Ro(e,t,n){W.N(_o(t),"updating in "+n+" seconds"),t.hb=new xe((function(){return p((function n(){var i;return O(n,(function(n){switch(n.o){case 1:return k(n,2),A(n,wo(e,t),4);case 4:C(n,0);break;case 2:i=N(n),e.a&&e.a.onError(i),I(n)}}))}))})).T(n)}function Lo(e){null!=e.hb&&(e.hb.stop(),e.hb=null)}function Uo(e,t){Pe(e.J).then(function(){this.f||(this.a.onError(t),t.handled||this.g.failureCallback(t))}.bind(e))}function _o(e){return"("+e.type+":"+e.stream.id+")"}function Oo(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,Td:i,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=Et(t)}catch(e){}throw W.debug("HTTP error text:",r),new Me(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function Do(e,t,n,i){var r=new Do.b;at(t.headers).forEach((function(e,t){r.append(t,e)}));var a=new Do.a,o={ze:!1,yf:!1};if(e=new Le(e=Do.s(e,n,{body:t.body||void 0,headers:r,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,i),(function(){return o.ze=!0,a.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new Ce((function(){o.yf=!0,a.abort()}));s.T(t/1e3),e.finally((function(){s.stop()}))}return e}function Fo(e,t,n,i){var r=new Fo.f,a=Date.now(),o=0,s=new Promise((function(s,u){for(var c in r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onabort=function(){u(new Me(1,1,7001,e,n))},r.onload=function(t){for(var i=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),r={},a=(i=h(i)).next();!a.done;a=i.next())r[(a=a.value.split(": "))[0].toLowerCase()]=a.slice(1).join(": ");try{var o=Oo(r,t.response,t.status,e,t.responseURL,n);s(o)}catch(e){u(e)}},r.onerror=function(t){u(new Me(1,1,1002,e,t,n))},r.ontimeout=function(){u(new Me(1,1,1003,e,n))},r.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(i(t-a,e.loaded-o,e.total-e.loaded),o=e.loaded,a=t)},t.headers)r.setRequestHeader(c.toLowerCase(),t.headers[c]);r.send(t.body)}));return new Le(s,(function(){return r.abort(),Promise.resolve()}))}function jo(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function Ko(e,t,n){this.j=e,this.b=new Map,this.c=!1,this.g=t,this.f=n,this.a=new jo}function Bo(e,t,n,i,r,a){var o=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(e.a,i);i=e.b.get(t)||Promise.resolve(),e.b.set(t,i.then((function(){return p((function t(){var i,s,u,c,l,d;return O(t,(function(t){switch(t.o){case 1:return A(t,function(e,t){return p((function n(){var i;return O(n,(function(n){switch(n.o){case 1:return A(n,e.j.request(1,t).promise,2);case 2:return i=n.A,n.return(i.data)}}))}))}(e,n),2);case 2:if(i=t.A,e.c)throw new Me(2,9,7001);if(r)for(var h in s=new Uint8Array(i),(u=new Hi(s)).data)c=Number(h),l=u.data[c],d=u.a[c],e.f(l,d);return e.a.close(o,i.byteLength),h=e.a,e.g(0==h.b?0:h.f/h.b,e.a.a),t.return(a(i))}}))}))})))}function Go(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new Re,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function Vo(e,t){return new Promise((function(n,i){var r=e.b.openCursor();r.onerror=i,r.onsuccess=function(e){if(!(e=e.target.result))return n();t(e.key,e.value,e),e.continue()}}))}function zo(e){this.b=e,this.a=[]}function Ho(e,t){return Wo(e,t,"readwrite")}function Wo(e,t,n){var i=new Go(n=e.b.transaction([t],n),t);return e.a.push(i),i.promise().then((function(){Ge(e.a,i)}),(function(){Ge(e.a,i)})),i}function qo(e,t,n){this.b=new zo(e),this.c=t,this.a=n}function Xo(e){return Promise.reject(new Me(2,9,9011,"Cannot add new value to "+e))}function Yo(e,t,n,i){t=(e=Ho(e.b,t)).store();for(var r={},a=(n=h(n)).next();!a.done;r={key:r.key},a=n.next())r.key=a.value,t.delete(r.key).onsuccess=function(e){return function(){return i(e.key)}}(r);return e.promise()}function $o(e,t,n){return p((function i(){var r,a,o,s,u,c,l;return O(i,(function(i){switch(i.o){case 1:for(r=Wo(e.b,t,"readonly"),a=r.store(),o={},s=[],u={},c=h(n),l=c.next();!l.done;u={request:u.request,key:u.key},l=c.next())u.key=l.value,u.request=a.get(u.key),u.request.onsuccess=function(e){return function(){null==e.request.result&&s.push(e.key),o[e.key]=e.request.result}}(u);return A(i,r.promise(),2);case 2:if(s.length)throw new Me(2,9,9012,"Could not find values for "+s);return i.return(n.map((function(e){return o[e]})))}}))}))}function Jo(e){this.a=new zo(e)}function Zo(){this.a=new Map}function Qo(e,t,n){if(!(e=e.a.get(t)))throw new Me(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new Me(2,9,9013,"Could not find cell with name "+n);return t}function es(e,t){ts.set(e,t)}so.prototype.destroy=function(){for(var e=h(this.b.values()),t=e.next();!t.done;t=e.next())Lo(t.value);return this.b.clear(),this.l.clear(),this.g=this.j=this.B=this.c=this.a=null,this.f=!0,Promise.resolve()},so.prototype.configure=function(e){this.g=e,this.J=new Ne({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},so.prototype.start=function(){var e=this;return p((function t(){var n,i,r;return O(t,(function(t){switch(t.o){case 1:return n=e.a.yb(),i=Co(e,n),(r=e.a.Xe(e.c.periods[i])).variant||r.text?A(t,vo(e,r.variant?r.variant.audio:null,r.variant?r.variant.video:null,r.text,n),2):(W.error("init: no Streams chosen"),t.return(new Me(2,5,5005)));case 2:if(e.f)return t.return();W.debug("init: completed initial Stream setup"),e.a&&e.a.Ng&&(W.I("init: calling onInitialStreamsSetup()..."),e.a.Ng()),I(t)}}))}))},so.prototype.K=function(e,t,n,i){var r=i.reader.Ud(),a=i.reader.Ud(),o=i.reader.M(),s=i.reader.M(),u=i.reader.M(),c=i.reader.M();i=i.reader.Eb(i.reader.S.byteLength-i.reader.va()),e=e.startTime+t.startTime+s/o,n.includes(r)&&("urn:mpeg:dash:event:2012"==r?this.a.Og():this.a.onEvent(new H("emsg",{detail:{startTime:e,endTime:e+u/o,schemeIdUri:r,value:a,timescale:o,presentationTimeDelta:s,eventDuration:u,id:c,messageData:i}})))},V("shaka.net.HttpFetchPlugin",Do),Do.s=function(e,t,n,i,r){return p((function a(){var o,s,u,c,l,d,h,f,m,g,v,y,b;return O(a,(function(a){switch(a.o){case 1:return o=Do.g,s=Do.c,d=l=0,h=Date.now(),k(a,2),A(a,o(e,n),4);case 4:return u=a.A,f=u.clone().body.getReader(),g=(m=u.headers.get("Content-Length"))?parseInt(m,10):0,v=function(e){!function t(){return p((function n(){var i,a,o;return O(n,(function(n){switch(n.o){case 1:return k(n,2),A(n,f.read(),4);case 4:i=n.A,C(n,3);break;case 2:return a=N(n),W.I("error reading from stream",a.message),n.return();case 3:i.done||(l+=i.value.byteLength),(100<(o=Date.now())-h||i.done)&&(r(o-h,l-d,g-l),d=l,h=o),i.done?e.close():(e.enqueue(i.value),t()),I(n)}}))}))}()},new s({start:v}),A(a,u.arrayBuffer(),5);case 5:c=a.A,C(a,3);break;case 2:if(y=N(a),i.ze)throw new Me(1,1,7001,e,t);if(i.yf)throw new Me(1,1,1003,e,t);throw new Me(1,1,1002,e,y,t);case 3:return b={},u.headers.forEach((function(e,t){b[t.trim()]=e})),a.return(Oo(b,c,u.status,e,u.url,t))}}))}))},Do.isSupported=function(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)},Do.isSupported=Do.isSupported,Do.g=e.fetch,Do.a=e.AbortController,Do.c=e.ReadableStream,Do.b=e.Headers,Do.isSupported()&&(Xe("http",Do,2),Xe("https",Do,2)),V("shaka.net.HttpXHRPlugin",Fo),Fo.f=e.XMLHttpRequest,Xe("http",Fo,1),Xe("https",Fo,1),jo.prototype.close=function(e,t){if(this.c.has(e)){var n=this.c.get(e);this.c.delete(e),this.f+=n,this.a+=t}},Ko.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then((function(){}),(function(){}))},Go.prototype.abort=function(){try{this.c.abort()}catch(e){}return this.a.catch((function(){}))},Go.prototype.store=function(){return this.b},Go.prototype.promise=function(){return this.a},zo.prototype.destroy=function(){return Promise.all(this.a.map((function(e){return e.abort()})))},(i=qo.prototype).destroy=function(){return this.b.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return Xo(this.c)},i.removeSegments=function(e,t){return Yo(this,this.c,e,t)},i.getSegments=function(e){var t=this;return p((function n(){var i;return O(n,(function(n){switch(n.o){case 1:return A(n,$o(t,t.c,e),2);case 2:return i=n.A,n.return(i.map((function(e){return t.De(e)})))}}))}))},i.addManifests=function(){return Xo(this.a)},i.updateManifestExpiration=function(e,t){var n=Ho(this.b,this.a),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},i.removeManifests=function(e,t){return Yo(this,this.a,e,t)},i.getManifests=function(e){var t=this;return p((function n(){var i;return O(n,(function(n){switch(n.o){case 1:return A(n,$o(t,t.a,e),2);case 2:return i=n.A,n.return(i.map((function(e){return t.Kc(e)})))}}))}))},i.getAllManifests=function(){var e=this;return p((function t(){var n,i;return O(t,(function(t){switch(t.o){case 1:return n=Wo(e.b,e.a,"readonly"),i=new Map,A(t,Vo(n,(function(t,n){i.set(t,e.Kc(n))})),2);case 2:return A(t,n.promise(),3);case 3:return t.return(i)}}))}))},i.De=function(e){return e},i.Kc=function(e){return e},i.add=function(e,t){var n=this;return p((function i(){var r,a,o,s;return O(i,(function(i){switch(i.o){case 1:r=Ho(n.b,e),a=r.store(),o=[];for(var u=h(t),c=u.next();!c.done;c=u.next())s=c.value,a.add(s).onsuccess=function(e){o.push(e.target.result)};return A(i,r.promise(),2);case 2:return i.return(o)}}))}))},Jo.prototype.destroy=function(){return this.a.destroy()},Jo.prototype.getAll=function(){var e=this;return p((function t(){var n,i;return O(t,(function(t){switch(t.o){case 1:return n=Wo(e.a,"session-ids","readonly"),i=[],A(t,Vo(n,(function(e,t){i.push(t)})),2);case 2:return A(t,n.promise(),3);case 3:return t.return(i)}}))}))},Jo.prototype.add=function(e){for(var t=Ho(this.a,"session-ids"),n=t.store(),i=(e=h(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},Jo.prototype.remove=function(e){var t=this;return p((function n(){var i;return O(n,(function(n){switch(n.o){case 1:return A(n,Vo(i=Ho(t.a,"session-ids"),(function(t,n,i){0<=e.indexOf(n.sessionId)&&i.delete()})),2);case 2:return A(n,i.promise(),0)}}))}))},Zo.prototype.destroy=function(){for(var e=[],t=h(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},Zo.prototype.init=function(){var e=this;ts.forEach((function(t,n){var i=t();i?e.a.set(n,i):W.info("Skipping "+n+" as it is not supported on this platform")}));for(var t=[],n=h(this.a.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},Zo.prototype.erase=function(){var e=this;return p((function t(){var n,i;return O(t,(function(t){switch(t.o){case 1:return n=Array.from(e.a.values()),(i=0<n.length)||ts.forEach((function(e){(e=e())&&n.push(e)})),A(t,Promise.all(n.map((function(e){return e.erase()}))),2);case 2:if(!i)return A(t,Promise.all(n.map((function(e){return e.destroy()}))),0);t.C(0)}}))}))},V("shaka.offline.StorageMuxer.register",es),V("shaka.offline.StorageMuxer.unregister",(function(e){ts.delete(e)}));var ts=new Map;function ns(e){qo.apply(this,arguments)}function is(e){return function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType})),n=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!n.every((function(e){return e.variantIds}))){t.forEach((function(e){e.variantIds=[]})),n.forEach((function(e){e.variantIds=[]}));var i=0;if(n.length&&!t.length){W.debug("Found video-only content. Creating variants for video.");var r=i++;n.forEach((function(e){e.variantIds.push(r)}))}if(!n.length&&t.length){W.debug("Found audio-only content. Creating variants for audio.");var a=i++;t.forEach((function(e){e.variantIds.push(a)}))}n.length&&t.length&&(W.debug("Found audio-video content. Creating variants."),t.forEach((function(e){n.forEach((function(t){var n=i++;e.variantIds.push(n),t.variantIds.push(n)}))})))}}(e),e.streams.forEach((function(){})),{startTime:e.startTime,streams:e.streams.map(rs)}}function rs(e){var t=e.initSegmentUri?os(e.initSegmentUri):null;return{id:e.id,originalId:null,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(as),variantIds:e.variantIds}}function as(e){var t=os(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function os(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Me(2,9,9004,"Could not parse uri "+e)}function ss(e,t,n,i){qo.call(this,e,t,n),this.f=i}function us(){this.g=this.c=this.b=this.a=this.f=null}function cs(e,t,n,i){this.a=e,this.g=t,this.f=n,this.c=i,this.b=["offline:",e,"/",t,"/",n,"/",i].join("")}function ls(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new cs(t,n,i,Number(e[4])):null}function ds(e,t){this.b=e,this.a=t}function hs(e,t,n){var i=t.streams.filter((function(e){return"audio"==e.contentType})),r=t.streams.filter((function(e){return"video"==e.contentType}));return i=function(e,t,n){for(var i=new Set,r=h(t),a=r.next();!a.done;a=r.next()){var o=h(a.value.variantIds);for(a=o.next();!a.done;a=o.next())i.add(a.value)}for(a=(r=h(n)).next();!a.done;a=r.next())for(a=(o=h(a.value.variantIds)).next();!a.done;a=o.next())i.add(a.value);for(r=new Map,a=(i=h(i)).next();!a.done;a=i.next())a=a.value,r.set(a,{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(i=(t=h(t)).next();!i.done;i=t.next())for(a=fs(e,i=i.value),i=(o=h(i.variantIds)).next();!i.done;i=o.next())(i=r.get(i.value)).language=a.language,i.primary=i.primary||a.primary,i.audio=a;for(t=(n=h(n)).next();!t.done;t=n.next())for(t=fs(e,i=t.value),i=(a=h(i.variantIds)).next();!i.done;i=a.next())(i=r.get(i.value)).primary=i.primary||t.primary,i.video=t;return r}(e,i,r),r=t.streams.filter((function(e){return"text"==e.contentType})).map((function(t){return fs(e,t)})),t.streams.forEach((function(i){i=i.segments.map((function(t,n){return ps(e,n,t)})),n.Xb(i,t.startTime)})),{startTime:t.startTime,variants:Array.from(i.values()),textStreams:r}}function fs(e,t){var n=t.segments.map((function(t,n){return ps(e,n,t)})),i=new ar(n);return n={id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return i.find(e)},getSegmentReference:function(e){return i.get(e)},initSegmentReference:null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,pixelAspectRatio:t.pixelAspectRatio||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,label:t.label||null,type:t.contentType,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},null!=t.initSegmentKey&&(n.initSegmentReference=function(e,t){var n=new cs("segment",e.b,e.a,t);return new ir((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey)),n}function ps(e,t,n){var i=new cs("segment",e.b,e.a,n.dataKey);return new rr(t,n.startTime,n.endTime,(function(){return[i.toString()]}),0,null)}function ms(){this.a=null}function gs(e){var t=ls(e);return t&&"manifest"==t.a?gs.j(e):t&&"segment"==t.a?gs.l(t.key(),t):Ue(new Me(2,1,9004,e))}function vs(e,t,n){return p((function i(){var r,a,o,s,u,c;return O(i,(function(i){switch(i.o){case 1:r=[];for(var l=[],d=h(n),f=d.next();!f.done;f=d.next()){f=f.value;for(var m=!1,g=h(l),v=g.next();!v.done;v=g.next())if(ys((v=v.value).info,f)){v.sessionIds.push(f.sessionId),m=!0;break}m||l.push({info:f,sessionIds:[f.sessionId]})}a=h(l),o=a.next();case 2:if(o.done){i.C(4);break}return s=o.value,u=function(e,t,n){return p((function i(){var r,a,o,s;return O(i,(function(i){switch(i.o){case 1:return r=new kt({Wb:t,onError:function(){},Vc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),k(i,2),r.configure(e),A(i,function(e,t,n,i,r,a){var o=new Map;return o.set(t,{audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t,drmInfos:[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,initData:null,keyIds:null}]}),_t(e,o)}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:C(i,3);break;case 2:return a=N(i),W.v("Error initializing EME",a),A(i,r.destroy(),5);case 5:case 9:return i.return([]);case 3:return k(i,6),A(i,Nt(r),8);case 8:C(i,7);break;case 6:return o=N(i),W.v("Error setting server certificate",o),A(i,r.destroy(),9);case 7:return s=[],A(i,Promise.all(n.sessionIds.map((function(e){return p((function t(){var n;return O(t,(function(t){switch(t.o){case 1:return k(t,2),A(t,function(e,t){return p((function n(){var i,r,a;return O(n,(function(n){switch(n.o){case 1:return A(n,Ot(e,t),2);case 2:return(i=n.A)?(r=[],(a=e.b.get(i))&&(a.Va=new Re,r.push(a.Va)),W.N("Attempting to remove session",t),r.push(i.remove()),A(n,Promise.all(r),0)):(W.N("Ignoring attempt to remove missing session",t),n.return())}}))}))}(r,e),4);case 4:s.push(e),C(t,0);break;case 2:n=N(t),W.v("Error deleting offline session",n),I(t)}}))}))}))),10);case 10:return A(i,r.destroy(),11);case 11:return i.return(s)}}))}))}(e,t,s),A(i,u,5);case 5:c=i.A,r=r.concat(c),o=a.next(),i.C(2);break;case 4:return i.return(r)}}))}))}function ys(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Ve(e.audioCapabilities,t.audioCapabilities,n)&&Ve(e.videoCapabilities,t.videoCapabilities,n)}function bs(e,t){var n=this;this.j=t,this.c=e,this.f={Ya:null,D:null,mimeType:null,startTime:null,ke:null,uri:null},this.l=null,this.g=[],this.b=this.a=null,this.s=!0,this.u=Promise.resolve().then((function(){return function(e){return p((function t(){return O(t,(function(t){if(1===t.o){if(e.s){if(0==e.g.length||e.a&&!e.a.zb)var n=!1;else{e.a&&(e.a.Ra.Db(),e.a=null);var i=(n=e.g.shift()).create(e.f);i?(n.Ra.Yb(),e.a={node:i.node,payload:i.payload,zb:i.zb,Ra:n.Ra}):n.Ra.Wc(),n=!0}return n?n=Promise.resolve():e.a?n=function(e){return p((function t(){var n,i;return O(t,(function(t){switch(t.o){case 1:return e.c=e.j.og(e.c,e.f,e.a.node,e.a.payload),k(t,2),e.b=e.j.Pf(e.c,e.f,e.a.payload),A(t,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.Ra.Uc(),e.a=null),C(t,0);break;case 2:return 7001==(n=N(t)).code?e.a.Ra.Db():e.a.Ra.onError(n),e.a=null,e.b=null,i=e,A(t,e.j.handleError(e.f,n),5);case 5:i.c=t.A,I(t)}}))}))}(e):(e.j.Mg(e.c),e.l=new Re,n=e.l),A(t,n,1)}t.C(0)}}))}))}(n)}))}function Es(e,t){var n={Yb:function(){},Uc:function(){},Db:function(){},onError:function(){},Wc:function(){},Ph:function(){}};return e.g.push({create:t,Ra:n}),e.b&&e.b.abort(),ws(e),n}function ws(e){e.l&&(e.l.resolve(),e.l=null)}function Ts(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var n=e.textTracks[t];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function Ss(e){if(e.startTime>=e.endTime)return W.v("Invalid cue times: "+e.startTime+" - "+e.endTime),null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function As(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=e.cues,r=i.length-1;0<=r;r--){var a=i[r];a&&t(a)&&e.removeCue(a)}e.mode=n}function Is(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var u=r+"."+a,c=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===c||o?delete e[a]:e[a]=Ke(c):c.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Ke(c)),u=Is(e[a],t[a],c,i,u),s=s&&u):typeof t[a]!=typeof c||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=c.constructor?(W.Gc("Invalid config, wrong type for "+u),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&W.ba("Unexpected number of arguments for "+u),e[a]=t[a]):(W.Gc("Invalid config, unrecognized key "+u),s=!1)}return s}function ks(e,t){for(var n={},i=n,r=0,a=0;!(0>(r=e.indexOf(".",r)));)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function xs(){}function Cs(){var e=5e5,t=1/0;navigator.connection&&(e=1e6*navigator.connection.downlink,navigator.connection.saveData&&(t=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Ft,fairPlayTransform:!0,updateExpirationTime:1},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(e){return W.error("Unhandled streaming error",e),[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0};pt("Web0S")&&(i.stallEnabled=!1);var r={trackSelectionCallback:function(e){return p((function t(){return O(t,(function(t){if(1===t.o)return t.return(e)}))}))},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},a={drm:n,manifest:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},streaming:i,offline:r,abrFactory:zn,abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return r.trackSelectionCallback=function(e){return p((function t(){return O(t,(function(t){if(1===t.o)return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=ie(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return ee(e.language)==r}))),0==i.length&&(i=n.filter((function(e){return e.primary}))),0==i.length&&(1<new Set(n.map((function(e){return e.language}))).size&&W.v("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));if(a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height}))),n=[],i.length){var o=Math.floor(i.length/2);i.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(i[o])}for(o=(i=h(e)).next();!o.done;o=i.next())"text"==(o=o.value).type&&n.push(o);return n}(e,a.preferredAudioLanguage))}))}))},a}function Ns(e,t,n){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Is(e,t,n||Cs(),i,"")}function Ps(){this.a=null,this.b=[]}function Ms(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0})}}function Rs(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var i=h(e.b),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==t?r.duration:0;return n}function Ls(){this.b=this.c=null,this.a=[]}function Us(){this.f=this.w=this.j=this.b=this.l=this.s=this.u=this.g=this.B=NaN,this.a=new Ps,this.c=new Ls}function _s(t,n){var i=this;X.call(this),this.l=Iu,this.a=null,this.La=!1,this.g=new et,this.kd=this.s=this.rb=this.c=this.w=this.f=this.Bc=this.G=this.Cc=this.J=this.Ka=this.u=this.H=this.j=this.L=null,this.jf=1e9,this.Ec=new Set,this.Wa=!0,this.na=null,this.hf=!1,this.Ue=0,this.ka=null,this.Z=new ga,this.b=Xs(this),this.Fc={width:1/0,height:1/0},this.B=null,this.sb=new Ia(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount),this.ia=this.b.preferredTextLanguage,this.Ia=this.b.preferredTextRole,this.ld=[],n&&n(this),this.L=function(e){return new We((function(t,n){e.s&&e.s.segmentDownloaded(t,n)}))}(this),this.g.m(e,"online",(function(){i.Zd()})),this.K={name:"detach"},this.O={name:"attach"},this.wa={name:"unload"},this.Fd={name:"manifest-parser"},this.Ed={name:"manifest"},this.Ja={name:"media-source"},this.pd={name:"drm-engine"},this.X={name:"load"},this.Ld={name:"src-equals-drm-engine"},this.Ma={name:"src-equals"};var r=new Map;r.set(this.O,(function(e,t){return De(function(e,t,n){return null==t.D&&(t.D=n.D,e.g.m(t.D,"error",(function(){var t=du(e);t&&e.pb(t)}))),e.a=t.D,Promise.resolve()}(i,e,t))})),r.set(this.K,(function(e){return e.D&&(i.g.xa(e.D,"error"),e.D=null),i.a=null,De(e=Promise.resolve())})),r.set(this.wa,(function(e){return De(Ks(i,e))})),r.set(this.Ja,(function(t){return t=function(t,n){return p((function i(){var r,a,o,s;return O(i,(function(i){switch(i.o){case 1:return r=e.muxjs?new qt:new Xt,a=t.b.textDisplayFactory,o=new a,t.zd=a,A(i,(s=new Pn(n.D,r,o)).w,2);case 2:t.H=s,I(i)}}))}))}(i,t),De(t)})),r.set(this.Fd,(function(e,t){var n=function(e,t,n){return p((function i(){var r,a,o,s;return O(i,(function(i){switch(i.o){case 1:if(t.Ya=n.Ya,t.mimeType=n.mimeType,t.uri=n.uri,r=t.uri,a=e.L,e.rb=r,t.Ya){e.w=t.Ya(),i.C(2);break}return o=e,A(i,br.create(r,a,e.b.manifest.retryParameters,t.mimeType),3);case 3:o.w=i.A;case 2:s=Ke(e.b.manifest),n.D&&"AUDIO"===n.D.nodeName&&(s.disableVideo=!0),e.w.configure(s),I(i)}}))}))}(i,e,t);return De(n)})),r.set(this.Ed,(function(e){return function(e,t){var n=t.uri,i=e.L;e.Bc=new no,function(e,t){e.b=t}(e.Bc,(function(t){lu(e,"timelineregionadded",t)}));var r={networkingEngine:i,filterNewPeriod:function(t){return e.rd(t)},filterAllPeriods:function(t){return Ys(e,t)},onTimelineRegionAdded:function(t){var n=e.Bc;e:{for(var i=h(n.a),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.a.add(t),n.b(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return e.pb(t)}};return new Le(Promise.resolve().then((function(){return p((function t(){var i;return O(t,(function(t){switch(t.o){case 1:return i=e,A(t,e.w.start(n,r),2);case 2:if(i.c=t.A,e.dispatchEvent(new H("manifestparsed")),0==e.c.periods.length)throw new Me(2,4,4014);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.some((function(e){return e.variants.some(t)}))&&(W.debug("Found variant with audio and video content, so filtering out audio-only content in all periods."),e.forEach((function(e){e.variants=e.variants.filter(t)})))}(e.c.periods),I(t)}}))}))})),(function(){return W.info("Aborting parser step..."),e.w.stop()}))}(i,e)})),r.set(this.pd,(function(){var e=function(e){return p((function t(){return O(t,(function(t){switch(t.o){case 1:return e.j=Bs(e,{Wb:e.L,onError:function(t){e.pb(t)},Vc:function(t){hu(e,t)},onExpirationUpdated:function(t,n){fu(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.j.configure(e.b.drm),A(t,xt(e.j,Da(e.c.periods),e.c.offlineSessionIds),2);case 2:Ys(e,e.c.periods),I(t)}}))}))}(i);return De(e)})),r.set(this.X,(function(e,t){return De(function(e,t,n){return p((function i(){var r,a,o,s,u,c,l,d,f,p;return O(i,(function(i){switch(i.o){case 1:return t.startTime=n.startTime,r=t.D,a=t.uri,e.rb=a,e.J=new Ka({Pc:function(){return t.D.playbackRate},ee:function(e){t.D.playbackRate=e},Te:function(e){t.D.currentTime+=e}}),e.B=new Us,o=function(){return eu(e)},s=function(){return Qs(e)},e.g.m(r,"playing",o),e.g.m(r,"pause",o),e.g.m(r,"ended",o),e.g.m(r,"ratechange",s),u=e.b.abrFactory,e.s&&e.kd==u||(e.kd=u,e.s=new u,e.s.configure(e.b.abr)),function(e,t){for(var n=0;n<t.length;n++){for(var i=t[n],r=new Map,a=h(i.variants),o=a.next();!o.done;o=a.next())if((o=o.value).video&&o.video.closedCaptions)for(var s=h((o=o.video).closedCaptions.keys()),u=s.next();!u.done;u=s.next())if(u=u.value,!r.has(u)){var c={id:e.jf++,originalId:u,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:o.closedCaptions.get(u),label:null,type:"text",primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:o.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null};r.set(u,c)}for(a=(r=h(r.values())).next();!a.done;a=r.next())i.textStreams.push(a.value)}}(e,e.c.periods),e.sb=new Ia(e.b.preferredAudioLanguage,e.b.preferredVariantRole,e.b.preferredAudioChannelCount),e.ia=e.b.preferredTextLanguage,function(e,t,n){0<t&&(e.Y()?W.v("|playRangeStart| has been configured for live content. Ignoring the setting."):e.uf(t)),n<e.ra()&&(e.Y()?W.v("|playRangeEnd| has been configured for live content. Ignoring the setting."):e.Ta(n))}(e.c.presentationTimeline,e.b.playRangeStart,e.b.playRangeEnd),A(i,e.j.ic(r),2);case 2:return e.s.init((function(t,n,i){n=void 0!==n&&n,i=void 0===i?0:i,W.debug("switch_");e:{for(var r=h(e.c.periods),a=r.next();!a.done;a=r.next())if((a=a.value).variants.includes(t)){r=a;break e}r=null}Ws(e,r,t,!0),e.f&&po(e.f,t,n,i)&&ru(e)})),e.u=function(e,t){return new Za(e.a,e.c,e.b.streaming,t,(function(){e.Ka&&Oa(e.Ka,!0),e.f&&function(e){function t(t){var r=e.a.U;return"text"==t?null!=(t=r.a).a&&null!=t.b&&n>=t.a&&n<t.b:$t(t=Dn(r,t),n,i)}var n=e.a.yb(),i=e.g.smallGapLimit,r=!1,a=Co(e,n);if($(e.b.values(),(function(e){return e.Ba==a})))for(var o=h(e.b.keys()),s=o.next();!s.done;s=o.next())t(s=s.value)||(go(e,e.b.get(s)),r=!0);else $(e.b.keys(),t)||(W.debug("(all): seeked: unbuffered seek: clearing all buffers"),e.b.forEach((function(t){go(e,t)})),r=!0);r||W.debug("(all): seeked: buffered seek: presentationTime="+n)}(e.f),e.G&&Vs(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.Ka=function(e){var t=new ja(e.c);!function(e,t){e.b=t}(t,(function(){au(e)}));var n=new io(e.Bc);!function(e,t,n,i){e.a=t,e.b=n,e.c=i}(n,(function(t){lu(e,"timelineregionenter",t)}),(function(t){lu(e,"timelineregionexit",t)}),(function(t,n){n||(lu(e,"timelineregionenter",t),lu(e,"timelineregionexit",t))}));var i=new _a(e.a);return i.a.add(t),i.a.add(n),i}(e),c=Math.max(e.c.minBufferTime,e.b.streaming.rebufferingGoal),Gs(e,c),e.f=function(e){return new so(e.c,{yb:function(){return e.u.g()},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},U:e.H,Wb:e.L,Xe:e.Kg.bind(e),We:e.Lf.bind(e),onError:e.pb.bind(e),onEvent:function(t){return e.dispatchEvent(t)},Og:e.Pg.bind(e),Rd:e.Ug.bind(e)})}(e),e.f.configure(e.b.streaming),Vn.Ce(e.c,e.b.preferredAudioChannelCount),e.l=ku,e.dispatchEvent(new H("streaming")),A(i,e.f.start(),3);case 3:e.b.streaming.startAtSegmentBoundary&&(l=e.u.g(),d=function(e,t){function n(e,t){if(!e)return null;var n=e.findSegmentPosition(t-a.startTime);return null==n?null:(n=e.getSegmentReference(n))?n.startTime+a.startTime:null}var i=uo(e.f),r=co(e.f),a=bu(e);return i=n(i,t),null!=(r=n(r,t))&&null!=i?Math.max(r,i):null!=r?r:null!=i?i:t}(e,l),e.u.u(d)),e.c.periods.forEach(e.rd.bind(e)),au(e),ru(e),f=bu(e)||e.c.periods[0],p=f.variants.some((function(e){return e.primary})),e.b.preferredAudioLanguage||p||W.v("No preferred audio language set.  We will choose an arbitrary language initially"),tu(e,f.variants),e.g.Ha(r,"loadedmetadata",(function(){e.B.b=Date.now()/1e3-n.ke})),I(i)}}))}))}(i,e,t))})),r.set(this.Ld,(function(e){return e=function(e,t){return p((function n(){var i,r;return O(n,(function(n){switch(n.o){case 1:return i=nn,e.j=Bs(e,{Wb:e.L,onError:function(t){e.pb(t)},Vc:function(t){hu(e,t)},onExpirationUpdated:function(t,n){fu(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.j.configure(e.b.drm),r={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:i.tb,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},A(n,xt(e.j,[r],[]),2);case 2:return A(n,e.j.ic(t.D),0)}}))}))}(i,e),De(e)})),r.set(this.Ma,(function(e,t){return function(e,t,n){function i(){return eu(e)}if(t.uri=n.uri,t.startTime=n.startTime,e.rb=t.uri,e.B=new Us,e.u=new Ja(t.D),null!=t.startTime&&e.u.u(t.startTime),e.J=new Ka({Pc:function(){return t.D.playbackRate},ee:function(e){t.D.playbackRate=e},Te:function(e){t.D.currentTime+=e}}),Gs(e,e.b.streaming.rebufferingGoal),e.g.m(t.D,"playing",i),e.g.m(t.D,"pause",i),e.g.m(t.D,"ended",i),e.g.m(t.D,"ratechange",(function(){return Qs(e)})),"none"!=e.a.preload&&e.g.Ha(t.D,"loadedmetadata",(function(){e.B.b=Date.now()/1e3-n.ke})),e.a.audioTracks&&(e.g.m(e.a.audioTracks,"addtrack",(function(){return au(e)})),e.g.m(e.a.audioTracks,"removetrack",(function(){return au(e)})),e.g.m(e.a.audioTracks,"change",(function(){return au(e)}))),e.a.textTracks){var r=e.a.textTracks;e.g.m(r,"addtrack",(function(){return au(e)})),e.g.m(r,"removetrack",(function(){return au(e)})),e.g.m(r,"change",(function(){return au(e)}))}t.D.src=t.uri,e.l=xu,e.dispatchEvent(new H("streaming"));var a=new Re;Ga(e.a,HTMLMediaElement.HAVE_METADATA,e.g,(function(){a.resolve()}));var o=!1;return e.ld.push((function(){o=!0})),Ga(e.a,HTMLMediaElement.HAVE_CURRENT_DATA,e.g,(function(){return p((function t(){return O(t,(function(t){switch(t.o){case 1:if(o)return t.return();if(function(e){var t=e.b.preferredAudioLanguage;if(""!=t){e.bd(t);var n=e.b.preferredVariantRole;""!=n&&e.bd(t,n)}}(e),Hs(e).find((function(e){return"disabled"!=e.mode}))){t.C(2);break}return A(t,new Promise((function(t){e.g.Ha(e.a.textTracks,"change",t),new Ce(t).T(1)})),2);case 2:if(o)return t.return();!function(e){var t=e.b.preferredTextLanguage;if(""!=t){e.cd(t);var n=e.b.preferredTextRole;""!=n&&e.cd(t,n)}}(e),I(t)}}))}))})),e.a.error?a.reject(du(e)):"none"==e.a.preload&&(W.ba('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),a.resolve()),e.g.Ha(e.a,"error",(function(){a.reject(du(e))})),new Le(a,(function(){return a.reject(new Me(2,7,7001)),Promise.resolve()}))}(i,e,t)})),this.ya=new bs(this.K,{og:function(e,t,n,r){var a=null;return e==i.K&&(a=n==i.K?i.K:i.O),e==i.O&&(a=n==i.K||t.D!=r.D?i.K:n==i.O?i.O:n==i.Ja||n==i.X?i.Ja:n==i.Ma?i.Ld:null),e==i.Ja&&(a=n==i.X&&t.D==r.D?i.Fd:i.wa),e==i.Fd&&(a=Tu(i.X,i.Ed,i.wa,n,t,r)),e==i.Ed&&(a=Tu(i.X,i.pd,i.wa,n,t,r)),e==i.pd&&(a=Tu(i.X,i.X,i.wa,n,t,r)),e==i.Ld&&(a=n==i.Ma&&t.D==r.D?i.Ma:i.wa),e!=i.X&&e!=i.Ma||(a=i.wa),e==i.wa&&(a=r.D&&t.D==r.D?i.O:i.K),a},Pf:function(e,t,n){return i.dispatchEvent(new H("onstatechange",{state:e.name})),r.get(e)(t,n)},handleError:function(e,t){return p((function n(){return O(n,(function(n){switch(n.o){case 1:return W.v("The walker saw an error:"),t instanceof Me?W.v("Error Code:",t.code):(W.v("Error Message:",t.message),W.v("Error Stack:",t.stack)),A(n,Ks(i,e),2);case 2:return n.return(e.D?i.O:i.K)}}))}))},Mg:function(e){i.dispatchEvent(new H("onstateidle",{state:e.name}))}}),t&&this.ic(t,!0)}E(ns,qo),ns.prototype.updateManifestExpiration=function(e,t){var n=Ho(this.b,this.a),i=n.store(),r=new Re;return i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new Me(2,9,9012,"Could not find values for "+e))},n.promise().then((function(){return r}))},ns.prototype.Kc=function(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(is),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}},ns.prototype.De=function(e){return{data:e.data}},E(ss,qo),ss.prototype.hasFixedKeySpace=function(){return this.f},ss.prototype.addSegments=function(e){return this.f?Xo(this.c):this.add(this.c,e)},ss.prototype.addManifests=function(e){return this.f?Xo(this.a):this.add(this.a,e)},ss.prototype.Kc=function(e){return null==e.expiration&&(e.expiration=1/0),e},(i=us.prototype).init=function(){var t=this,n=new Re,i=e.indexedDB.open("shaka_offline_db",4);return i.onsuccess=function(e){e=e.target.result,t.f=e;var i=e.objectStoreNames;i.contains("manifest")&&i.contains("segment")?(W.debug("Mounting v1 idb storage cell"),i=new ns(e,"segment","manifest")):i=null,t.a=i,(i=e.objectStoreNames).contains("manifest-v2")&&i.contains("segment-v2")?(W.debug("Mounting v2 idb storage cell"),i=new ss(e,"segment-v2","manifest-v2",!0)):i=null,t.b=i,(i=e.objectStoreNames).contains("manifest-v3")&&i.contains("segment-v3")?(W.debug("Mounting v3 idb storage cell"),i=new ss(e,"segment-v3","manifest-v3",!1)):i=null,t.c=i,e.objectStoreNames.contains("session-ids")?(W.debug("Mounting session ID idb storage cell"),e=new Jo(e)):e=null,t.g=e,n.resolve()},i.onupgradeneeded=function(e){e=e.target.result;for(var t=h(["segment-v3","manifest-v3","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(e){n.reject(new Me(2,9,9001,i.error)),e.preventDefault()},n},i.destroy=function(){var e=this;return p((function t(){return O(t,(function(t){switch(t.o){case 1:if(!e.a){t.C(2);break}return A(t,e.a.destroy(),2);case 2:if(!e.b){t.C(4);break}return A(t,e.b.destroy(),4);case 4:if(!e.c){t.C(6);break}return A(t,e.c.destroy(),6);case 6:if(!e.g){t.C(8);break}return A(t,e.g.destroy(),8);case 8:e.f&&e.f.close(),I(t)}}))}))},i.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),e},i.getEmeSessionCell=function(){return this.g},i.erase=function(){var t=this;return p((function n(){return O(n,(function(n){switch(n.o){case 1:if(!t.a){n.C(2);break}return A(n,t.a.destroy(),2);case 2:if(!t.b){n.C(4);break}return A(n,t.b.destroy(),4);case 4:if(!t.c){n.C(6);break}return A(n,t.c.destroy(),6);case 6:return t.f&&t.f.close(),A(n,function(){var t=new Re,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){W.v("Deleting","shaka_offline_db","is being blocked")},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Me(2,9,9001,n.error)),e.preventDefault()},t}(),8);case 8:return t.f=null,t.a=null,t.b=null,t.c=null,A(n,t.init(),0)}}))}))},es("idb",(function(){return e.indexedDB?new us:null})),cs.prototype.Sa=function(){return this.g},cs.prototype.ua=function(){return this.f},cs.prototype.key=function(){return this.c},cs.prototype.toString=function(){return this.b},(i=ms.prototype).configure=function(){},i.start=function(e){var t=this;return p((function n(){var i,r,a,o,s;return O(n,(function(n){switch(n.o){case 1:return i=ls(e),t.a=i,null==i||"manifest"!=i.a?n.return(Promise.reject(new Me(2,1,9004,i))):(r=new Zo,x(n,2),A(n,r.init(),4));case 4:return A(n,Qo(r,i.Sa(),i.ua()),5);case 5:return A(n,n.A.getManifests([i.key()]),6);case 6:return a=n.A,o=a[0],s=new ds(i.Sa(),i.ua()),n.return(function(e,t){var n=new Er(null,0);n.Ta(t.duration);var i=t.periods.map((function(t){return hs(e,t,n)})),r=t.drmInfo?[t.drmInfo]:[];return t.drmInfo&&i.forEach((function(e){e.variants.forEach((function(e){e.drmInfos=r}))})),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,periods:i}}(s,o));case 2:return P(n),A(n,r.destroy(),7);case 7:M(n,0)}}))}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n=this;return p((function i(){var r,a,o,s,u,c,l,d;return O(i,(function(i){switch(i.o){case 1:return r=n.a,a=new Zo,k(i,2,3),A(i,a.init(),5);case 5:return A(i,Qo(a,r.Sa(),r.ua()),6);case 6:return A(i,(o=i.A).getManifests([r.key()]),7);case 7:if(s=i.A,u=s[0],c=u.sessionIds.includes(e),l=null==u.expiration||u.expiration>t,!c||!l){i.C(3);break}return W.debug("Updating expiration for stored content"),A(i,o.updateManifestExpiration(r.key(),t),3);case 3:return P(i),A(i,a.destroy(),10);case 10:M(i,0);break;case 2:d=N(i),W.error("There was an error updating",r,d),i.C(3)}}))}))},br.dc("application/x-offline-manifest",ms),V("shaka.offline.OfflineScheme",gs),gs.j=function(e){return Oe(e={uri:e,Td:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},gs.l=function(e,t){var n=new Zo;return Oe(void 0).ma((function(){return n.init()})).ma((function(){return Qo(n,t.Sa(),t.ua())})).ma((function(e){return e.getSegments([t.key()])})).ma((function(e){return{uri:t,Td:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))},Xe("offline",gs),bs.prototype.destroy=function(){var e=this;return p((function t(){return O(t,(function(t){switch(t.o){case 1:return e.s=!1,e.b&&e.b.abort(),ws(e),A(t,e.u,2);case 2:e.a&&e.a.Ra.Db();for(var n=h(e.g),i=n.next();!i.done;i=n.next())i.value.Ra.Db();e.a=null,e.g=[],e.j=null,I(t)}}))}))},V("shaka.text.SimpleTextDisplayer",Ts),Ts.prototype.remove=function(e,t){return!!this.a&&(As(this.a,(function(n){return n.startTime<t&&n.endTime>e})),!0)},Ts.prototype.remove=Ts.prototype.remove,Ts.prototype.append=function(e){for(var t=Ss,n=[],i=(e=h(e)).next();!i.done;i=e.next())(i=i.value).nestedCues.length?n=n.concat(i.nestedCues):n.push(i);var r=[];e=this.a.cues?Array.from(this.a.cues):[],i={};for(var a=(n=h(n)).next();!a.done;i={Sb:i.Sb},a=n.next())i.Sb=a.value,e.some(function(e){return function(t){return t.startTime==e.Sb.startTime&&t.endTime==e.Sb.endTime&&t.text==e.Sb.payload}}(i))||(a=t(i.Sb))&&r.push(a);r.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:r.indexOf(t)-r.indexOf(e)})).forEach(function(e){this.a.addCue(e)}.bind(this))},Ts.prototype.append=Ts.prototype.append,Ts.prototype.destroy=function(){return this.a&&As(this.a,(function(){return!0})),this.a=null,Promise.resolve()},Ts.prototype.destroy=Ts.prototype.destroy,Ts.prototype.isTextVisible=function(){return"showing"==this.a.mode},Ts.prototype.isTextVisible=Ts.prototype.isTextVisible,Ts.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},Ts.prototype.setTextVisibility=Ts.prototype.setTextVisibility,V("shaka.util.ConfigUtils.mergeConfigObjects",Is),V("shaka.util.ConfigUtils.convertToConfigObject",ks),V("shaka.util.PlayerConfiguration",xs),xs.mergeConfigObjects=Ns,z(_s,X),V("shaka.Player",_s),_s.prototype.destroy=function(){var e=this;return p((function t(){var n;return O(t,(function(t){switch(t.o){case 1:return e.l==Au?t.return():(e.l=Au,n=Es(e.ya,(function(){return{node:e.K,payload:{Ya:null,D:null,mimeType:null,startTime:null,ke:null,uri:null},zb:!1}})),A(t,new Promise((function(t){n.Yb=function(){W.info("Preparing to destroy walker...")},n.Uc=function(){t(),e.dispatchEvent(new H("loaded"))},n.Db=function(){t()},n.onError=function(){t()},n.Wc=function(){t()}})),2));case 2:return A(t,e.ya.destroy(),3);case 3:if(e.g&&(e.g.release(),e.g=null),e.kd=null,e.s=null,e.b=null,!e.L){t.C(0);break}return A(t,e.L.destroy(),5);case 5:e.L=null,I(t)}}))}))},_s.prototype.destroy=_s.prototype.destroy,_s.version="2.5.10-dirty";var Os=["","5"];$n=new function(e){this.a=e,this.c=Xn,this.b=Yn}(new Wn(Number(Os[0]),Number(Os[1])));var Ds=["output-restricted","internal-error"],Fs={};function js(){if(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach))return!1;var t=ft();return!(t&&12>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!lt()||dt("application/x-mpegurl"))}function Ks(e,t){return p((function n(){var i;return O(n,(function(n){switch(n.o){case 1:return e.l!=Au&&(e.l=Iu),i=e.ld.map((function(e){return e()})),e.ld=[],A(n,Promise.all(i),2);case 2:if(e.dispatchEvent(new H("unloading")),t.Ya=null,t.mimeType=null,t.startTime=null,t.uri=null,t.D&&(e.g.xa(t.D,"loadedmetadata"),e.g.xa(t.D,"playing"),e.g.xa(t.D,"pause"),e.g.xa(t.D,"ended"),e.g.xa(t.D,"ratechange")),e.Ka&&(e.Ka.release(),e.Ka=null),e.Cc&&(e.Cc.stop(),e.Cc=null),!e.w){n.C(3);break}return A(n,e.w.stop(),4);case 4:e.w=null;case 3:if(!e.s){n.C(5);break}return A(n,e.s.stop(),5);case 5:if(!e.f){n.C(7);break}return A(n,e.f.destroy(),8);case 8:e.f=null;case 7:if(e.J&&(e.J.release(),e.J=null),e.u&&(e.u.release(),e.u=null),!e.H){n.C(9);break}return A(n,e.H.destroy(),10);case 10:e.H=null;case 9:if(!t.D||!t.D.src){n.C(11);break}return A(n,new Promise((function(e){return new Ce(e).T(.1)})),12);case 12:t.D.removeAttribute("src"),t.D.load();case 11:if(!e.j){n.C(13);break}return A(n,e.j.destroy(),14);case 14:e.j=null;case 13:e.Z.a.clear(),e.rb=null,e.G=null,e.Ec.clear(),e.c=null,e.B=null,e.zd=null,e.Wa=!0,Zs(e),I(n)}}))}))}function Bs(e,t){return new kt(t,e.b.drm.updateExpirationTime)}function Gs(e,t){e.G=new ka,e.G.a=Ca,xa(e.G,t,Math.min(.5,t/2)),Zs(e),e.Cc=new Ce((function(){Vs(e)})).Ua(.25)}function Vs(e){switch(e.l){case xu:var t=!!e.a.ended||Yt(e.a.buffered)>=e.a.duration-1;break;case ku:e:if(e.a.ended||Un(e.H))t=!0;else{if(e.c.presentationTimeline.Y()){var n=e.c.presentationTimeline.Pb();if(Yt(e.a.buffered)>=n){t=!0;break e}}t=!1}break;default:t=!1}var i=Jt(e.a.buffered,e.a.currentTime),r=t,a=(n=e.G).b.get(n.a);t=n.a,i=r||i>=a?Na:Ca,n.a=i,t!=i&&Zs(e)}function zs(e){if(e.w){var t=Ke(e.b.manifest);e.a&&"AUDIO"===e.a.nodeName&&(t.disableVideo=!0),e.w.configure(t)}if(e.j&&e.j.configure(e.b.drm),e.f){e.f.configure(e.b.streaming);try{e.c.periods.forEach(e.rd.bind(e))}catch(t){e.pb(t)}var n=uo(e.f),i=co(e.f);t=bu(e),n=Vn.Le(n,i,t.variants),e.s&&n&&n.allowedByApplication&&n.allowedByKeySystem?tu(e,t.variants):(W.debug("Choosing new streams after changing configuration"),nu(e,t))}if(e.H&&(t=e.b.textDisplayFactory,e.zd!=t)){n=new t;var r=(i=e.H).g;i.g=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.a&&(i.a.c=n),e.zd=t,e.f&&(n=(t=e.f).b.get("text"))&&mo(t,n.stream,!0,0,!0)}e.s&&(e.s.configure(e.b.abr),e.b.abr.enabled&&!e.Wa?e.s.enable():e.s.disable(),cu(e)),e.G&&(t=e.b.streaming.rebufferingGoal,e.c&&(t=Math.max(t,e.c.minBufferTime)),xa(e.G,t,Math.min(.5,t/2)))}function Hs(e){return Array.from(e.a.textTracks).filter((function(e){return"metadata"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function Ws(e,t,n,i){ya(e.Z,t).variant=n,(e=e.B.c).c!=n&&(e.c=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:i,bandwidth:n.bandwidth}))}function qs(e,t,n,i){va(e.Z,t,n),(e=e.B.c).b!=n&&(e.b=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:i,bandwidth:null}))}function Xs(e){var t=Cs();return t.streaming.failureCallback=function(t){e.Y()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,W.v("Live streaming error.  Retrying automatically..."),e.Zd())},t.textDisplayFactory=function(){return new Ts(e.a)},t}function Ys(e,t){var n=e.f?uo(e.f):null,i=e.f?co(e.f):null;if(t.forEach(Vn.filterNewPeriod.bind(null,e.j,n,i)),n=function(e,t){var n=0;return e.forEach((function(e){n+=function(e){return e.variants.some(Vn.Ub)}(e)?1:0})),n}(t),0==n)throw new Me(2,4,4032);if(n<t.length)throw new Me(2,4,4011);t.forEach(function(e){Vn.ve(e.variants,this.b.restrictions,this.Fc)&&this.f&&bu(this)==e&&au(this),pu(this,e.variants)}.bind(e))}function $s(e,t,n,i){return n=void 0!==n&&n,i=void 0===i?0:i,e.Wa?(e.na=t,e.hf=n,e.Ue=i,!0):((t=po(e.f,t,n,i))&&ou(e),t)}function Js(e,t){if(e.Wa)return e.ka=t,!0;var n=mo(e.f,t,!0,0,!1);return n&&su(e),n}function Zs(e){var t=e.Tb();if(e.B&&e.G&&e.u){var n=e.J;n.f=t,Ba(n),eu(e)}e.dispatchEvent(new H("buffering",{buffering:t}))}function Qs(e){var t=e.a.playbackRate;0!=t&&e.J.set(t)}function eu(e){if(e.B&&e.G){var t=e.B.a;e.G.a==Ca?Ms(t,"buffering"):e.a.paused?Ms(t,"paused"):e.a.ended?Ms(t,"ended"):Ms(t,"playing")}}function tu(e,t){try{pu(e,t)}catch(t){return e.pb(t),null}var n=t.filter((function(e){return Vn.Ub(e)}));return n=e.sb.create(n),e.s.setVariants(Array.from(n.values())),e.s.chooseVariant()}function nu(e,t){var n=iu(e,t,!1),i=Vn.kc(t.textStreams,e.ia,e.Ia)[0]||null,r=!1;i&&(e.b.streaming.alwaysStreamText||e.bb())&&(qs(e,t,i,!0),r=Js(e,i)),(n||r)&&ru(e)}function iu(e,t,n){n=void 0===n||n;var i=tu(e,t.variants),r=!1;return i&&(Ws(e,t,i,!0),r=$s(e,i,!0)),n&&r&&ru(e),r}function ru(e){mu(e,new H("adaptation"))}function au(e){mu(e,new H("trackschanged"))}function ou(e){mu(e,new H("variantchanged"))}function su(e){mu(e,new H("textchanged"))}function uu(e){mu(e,new H("texttrackvisibility"))}function cu(e){mu(e,new H("abrstatuschanged",{Ig:e.b.abr.enabled}))}function lu(e,t,n){e.dispatchEvent(new H(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function du(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new Me(2,3,3016,t,n,e.a.error.message)}function hu(e,t){if(e.f){var n=bu(e),i=!1,r=Object.keys(t);0==r.length&&W.v("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var a=1==r.length&&"00"==r[0];a&&W.v("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),r.length&&e.c.periods.forEach((function(e){e.variants.forEach((function(e){Vn.xg(e).forEach((function(n){var r=e.allowedByKeySystem;n.keyId&&(n=t[a?"00":n.keyId],e.allowedByKeySystem=!!n&&!Ds.includes(n)),r!=e.allowedByKeySystem&&(i=!0)}))}))})),r=uo(e.f);var o=co(e.f);(r=Vn.Le(r,o,n.variants))&&!r.allowedByKeySystem&&(W.debug("Choosing new variants after key status changed"),iu(e,n)),i&&(au(e),tu(e,n.variants))}}function fu(e,t,n){e.w&&e.w.onExpirationUpdated&&e.w.onExpirationUpdated(t,n),e.dispatchEvent(new H("expirationupdated"))}function pu(e,t){var n=e.j?ot(e.j.X):{},i=Object.keys(n);i=i.length&&"00"==i[0];for(var r=!1,a=!1,o=[],s=[],u=h(t),c=u.next();!c.done;c=u.next()){var l=[];(c=c.value).audio&&l.push(c.audio),c.video&&l.push(c.video);for(var d=(l=h(l)).next();!d.done;d=l.next())if((d=d.value).keyId){var f=n[i?"00":d.keyId];f?Ds.includes(f)&&(s.includes(f)||s.push(f)):o.includes(d.keyId)||o.push(d.keyId)}c.allowedByApplication?c.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw new Me(2,4,4012,{hasAppRestrictions:a,missingKeys:o,restrictedKeyStatuses:s})}function mu(e,t){p((function n(){return O(n,(function(n){switch(n.o){case 1:return A(n,Promise.resolve(),2);case 2:e.l!=Au&&e.dispatchEvent(t),I(n)}}))}))}function gu(e){for(var t=new Set,n=(e=h(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(ee(n.language)):t.add("und");return t}function vu(e){for(var t=new Map,n=(e=h(e)).next();!n.done;n=e.next()){var i=n.value;n="und";var r=[];for(i.language&&(n=ee(i.language)),(r="variant"==i.type?i.audioRoles:i.roles)&&r.length||(r=[""]),t.has(n)||t.set(n,new Set),r=(i=h(r)).next();!r.done;r=i.next())r=r.value,t.get(n).add(r)}var a=[];return t.forEach((function(e,t){for(var n=h(e),i=n.next();!i.done;i=n.next())a.push({language:t,role:i.value})})),a}function yu(e){return null==(e=bu(e))?[]:e.variants.filter((function(e){return Vn.Ub(e)}))}function bu(e){for(var t=e.u.g(),n=null,i=(e=h(e.c.periods)).next();!i.done;i=e.next())(i=i.value).startTime<=t&&(n=i);return n}function Eu(e){var t=bu(e);return ya(e.Z,t).variant}function wu(){return new Me(2,7,7e3)}function Tu(e,t,n,i,r,a){return i==e&&r.D==a.D&&r.uri==a.uri&&r.mimeType==a.mimeType&&r.Ya==a.Ya?t:n}function Su(e){return new Promise((function(t,n){e.Db=function(){return n(wu())},e.Uc=function(){return t()},e.onError=function(e){return n(e)},e.Wc=function(){return n(wu())}}))}_s.registerSupportPlugin=function(e,t){Fs[e]=t},_s.isBrowserSupported=js,_s.probeSupport=function(){return(e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],t=[{videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],n=new Map,e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map((function(e){return function(e){return p((function i(){var r,a,o;return O(i,(function(i){switch(i.o){case 1:return k(i,2),A(i,navigator.requestMediaKeySystemAccess(e,t),4);case 4:return r=i.A,o=!!(a=r.getConfiguration().sessionTypes)&&a.includes("persistent-license"),pt("Tizen 3")&&(o=!1),n.set(e,{persistentState:o}),A(i,r.createMediaKeys(),5);case 5:C(i,0);break;case 2:N(i),n.set(e,null),I(i)}}))}))}(e)})),Promise.all(e).then((function(){return ot(n)}))).then((function(e){for(var t=br.dh(),n={},i=h('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),r=i.next();!r.done;r=i.next()){n[r=r.value]=lt()?!!xn(r)||MediaSource.isTypeSupported(r)||on(r):dt(r);var a=r.split(";")[0];n[a]=n[a]||n[r]}for(var o in e={manifest:t,media:n,drm:e},Fs)e[o]=Fs[o]();return e}));var e,t,n},_s.prototype.ic=function(e,t){if(t=void 0===t||t,this.l==Au)return Promise.reject(wu());var n={Ya:null,D:null,mimeType:null,startTime:null,ke:null,uri:null};n.D=e,lt()||(t=!1);var i=t?this.Ja:this.O,r=Es(this.ya,(function(){return{node:i,payload:n,zb:!1}}));return r.Yb=function(){return W.info("Starting attach...")},Su(r)},_s.prototype.attach=_s.prototype.ic,_s.prototype.detach=function(){var e=this;if(this.l==Au)return Promise.reject(wu());var t=Es(this.ya,(function(){return{node:e.K,payload:{Ya:null,D:null,mimeType:null,startTime:null,ke:null,uri:null},zb:!1}}));return t.Yb=function(){return W.info("Starting detach...")},Su(t)},_s.prototype.detach=_s.prototype.detach,_s.prototype.qe=function(e){var t=this;if(e=void 0===e||e,this.l==Au)return Promise.reject(wu());lt()||(e=!1);var n={Ya:null,D:null,mimeType:null,startTime:null,ke:null,uri:null},i=Es(this.ya,(function(i){var r=i.D&&e?t.Ja:i.D?t.O:t.K;return n.D=i.D,{node:r,payload:n,zb:!1}}));return i.Yb=function(){return W.info("Starting unload...")},Su(i)},_s.prototype.unload=_s.prototype.qe,_s.prototype.load=function(e,t,n){if(this.l==Au)return Promise.reject(wu());this.dispatchEvent(new H("loading"));var i={Ya:null,D:null,mimeType:null,startTime:null,ke:null,uri:null};i.uri=e,i.ke=Date.now()/1e3,n&&"string"!=typeof n&&(qn("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),i.Ya=function(){return new n}),n&&"string"==typeof n&&(i.mimeType=n),void 0!==t&&(i.startTime=t);var r=function(e,t){if(t.Ya)return!1;if(!lt())return!0;var n=t.mimeType,i=t.uri||"";return n||(n={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[br.getExtension(i)]),!!n&&""!=(t.D||mt()).canPlayType(n)&&(!br.isSupported(i,n)||ht()&&e.b.streaming.useNativeHlsOnSafari)}(this,i)?this.Ma:this.X,a=Es(this.ya,(function(e){return null==e.D?null:(i.D=e.D,{node:r,payload:i,zb:!0})}));return a.Yb=function(){return W.info("Starting load of "+e+"...")},new Promise((function(e,t){a.Wc=function(){return t(new Me(2,7,7002))},a.Uc=function(){return e()},a.Db=function(){return t(wu())},a.onError=function(e){return t(e)}}))},_s.prototype.load=_s.prototype.load,_s.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=ks(e,t));var n=Ns(this.b,e,Xs(this));return zs(this),n},_s.prototype.configure=_s.prototype.configure,_s.prototype.getConfiguration=function(){var e=Xs(this);return Ns(e,this.b,Xs(this)),e},_s.prototype.getConfiguration=_s.prototype.getConfiguration,_s.prototype.lh=function(){for(var e in this.b)delete this.b[e];Ns(this.b,Xs(this),Xs(this)),zs(this)},_s.prototype.resetConfiguration=_s.prototype.lh,_s.prototype.eg=function(){return this.l},_s.prototype.getLoadMode=_s.prototype.eg,_s.prototype.mg=function(){return this.a},_s.prototype.getMediaElement=_s.prototype.mg,_s.prototype.mc=function(){return this.L},_s.prototype.getNetworkingEngine=_s.prototype.mc,_s.prototype.Nc=function(){return this.rb},_s.prototype.getAssetUri=_s.prototype.Nc,_s.prototype.kg=function(){return qn("getManifestUri",'Please use "getAssetUri" instead.'),this.Nc()},_s.prototype.getManifestUri=_s.prototype.kg,_s.prototype.Y=function(){return this.c?this.c.presentationTimeline.Y():!(!this.a||!this.a.src)&&1/0==this.a.duration},_s.prototype.isLive=_s.prototype.Y,_s.prototype.Bb=function(){return!!this.c&&this.c.presentationTimeline.Bb()},_s.prototype.isInProgress=_s.prototype.Bb,_s.prototype.Qe=function(){if(this.c){if(!this.c.periods.length)return!1;var e=this.c.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},_s.prototype.isAudioOnly=_s.prototype.Qe,_s.prototype.fc=function(){if(this.c){var e=this.c.presentationTimeline;return{start:e.Ob(),end:e.ab()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},_s.prototype.seekRange=_s.prototype.fc,_s.prototype.keySystem=function(){return Rt(this.drmInfo())},_s.prototype.keySystem=_s.prototype.keySystem,_s.prototype.drmInfo=function(){return this.j?this.j.a:null},_s.prototype.drmInfo=_s.prototype.drmInfo,_s.prototype.lc=function(){return this.j?this.j.lc():1/0},_s.prototype.getExpiration=_s.prototype.lc,_s.prototype.Tb=function(){return!!this.G&&this.G.a==Ca},_s.prototype.isBuffering=_s.prototype.Tb,_s.prototype.xd=function(){if(this.J){var e=this.J;e=e.f?0:e.c}else e=0;return e},_s.prototype.getPlaybackRate=_s.prototype.xd,_s.prototype.pe=function(e){0==e?W.ba("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.J&&this.J.set(e),this.l==ku&&fo(this.f,1<Math.abs(e)))},_s.prototype.trickPlay=_s.prototype.pe,_s.prototype.ye=function(){this.l==xu&&this.J.set(1),this.l==ku&&(this.J.set(1),fo(this.f,!1))},_s.prototype.cancelTrickPlay=_s.prototype.ye,_s.prototype.Rb=function(){if(this.c&&this.u){for(var e=Eu(this),t=[],n=h(yu(this)),i=n.next();!i.done;i=n.next()){i=i.value;var r=Vn.se(i);r.active=i==e,t.push(r)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){return Vn.Me(e)})):[]},_s.prototype.getVariantTracks=_s.prototype.Rb,_s.prototype.ib=function(){if(this.c&&this.u){for(var e=function(e){var t=bu(e);if(null==t)return null;if(!ya(e.Z,t).text){var n=Vn.kc(t.textStreams,e.ia,e.Ia);n.length&&va(e.Z,t,n[0])}return ya(e.Z,t).text}(this),t=[],n=h(function(e){var t=bu(e);return null==t?[]:t.textStreams.filter((function(t){return!e.Ec.has(t)}))}(this)),i=n.next();!i.done;i=n.next()){i=i.value;var r=Vn.ed(i);r.active=i==e,t.push(r)}return t}return this.a&&this.a.src&&this.a.textTracks?Hs(this).map((function(e){return Vn.Ag(e)})):[]},_s.prototype.getTextTracks=_s.prototype.ib,_s.prototype.$d=function(e){if(this.c&&this.f){var t=bu(this),n=t.textStreams.find((function(t){return t.id==e.id}));n?(qs(this,t,n,!1),Js(this,n),this.ia=n.language):W.error("No stream with id",e.id)}else if(this.a&&this.a.src&&this.a.textTracks){for(n=(t=h(t=Hs(this))).next();!n.done;n=t.next())n=n.value,Vn.Ad(n)==e.id?n.mode=this.La?"showing":"hidden":n.mode="disabled";su(this)}},_s.prototype.selectTextTrack=_s.prototype.$d,_s.prototype.oh=function(){qn("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var e=this.ib().filter((function(e){return"application/cea-608"==e.mimeType}));0<e.length?this.$d(e[0]):W.v("Unable to find the text track embedded in the video.")},_s.prototype.selectEmbeddedTextTrack=_s.prototype.oh,_s.prototype.Ih=function(){qn("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var e=this.ib().filter((function(e){return e.active}))[0];return!!e&&"application/cea-608"==e.mimeType},_s.prototype.usingEmbeddedTextTrack=_s.prototype.Ih,_s.prototype.pf=function(e,t,n){if(n=void 0===n?0:n,this.c&&this.f){var i=bu(this);this.b.abr.enabled&&W.ba("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=i.variants.find((function(t){return t.id==e.id}));r?Vn.Ub(r)?(Ws(this,i,r,!1),$s(this,r,t,n),this.sb=new Aa(r),tu(this,i.variants)):W.error("Unable to switch to restricted track",e.id):W.error("No variant with id",e.id)}else if(this.a&&this.a.audioTracks){for(n=(t=h(t=Array.from(this.a.audioTracks))).next();!n.done;n=t.next())n=n.value,Vn.Ad(n)==e.id&&(n.enabled=!0);ou(this)}},_s.prototype.selectVariantTrack=_s.prototype.pf,_s.prototype.Vf=function(){return vu(this.Rb())},_s.prototype.getAudioLanguagesAndRoles=_s.prototype.Vf,_s.prototype.wg=function(){return vu(this.ib())},_s.prototype.getTextLanguagesAndRoles=_s.prototype.wg,_s.prototype.Uf=function(){return Array.from(gu(this.Rb()))},_s.prototype.getAudioLanguages=_s.prototype.Uf,_s.prototype.vg=function(){return Array.from(gu(this.ib()))},_s.prototype.getTextLanguages=_s.prototype.vg,_s.prototype.bd=function(e,t){if(this.c&&this.u){var n=bu(this);this.sb=new Ia(e,t||"",0,"","audio"),iu(this,n)}else if(this.a&&this.a.audioTracks){var i=Array.from(this.a.audioTracks);n=ee(e);for(var r=(i=h(i)).next();!r.done;r=i.next()){r=r.value;var a=Vn.Me(r);ee(a.language)!=n||t&&!a.roles.includes(t)||(r.enabled=!0)}ou(this)}},_s.prototype.selectAudioLanguage=_s.prototype.bd,_s.prototype.cd=function(e,t){if(this.c&&this.u){var n=bu(this);this.ia=e,this.Ia=t||"";var i=Vn.kc(n.textStreams,this.ia,this.Ia)[0]||null;i&&(qs(this,n,i,!1),(this.b.streaming.alwaysStreamText||this.bb())&&Js(this,i))}else{var r=ee(e);(n=this.ib().filter((function(e){return ee(e.language)==r&&(!t||e.roles.includes(t))}))[0])&&this.$d(n)}},_s.prototype.selectTextLanguage=_s.prototype.cd,_s.prototype.ph=function(e){if(this.c&&this.u){for(var t=bu(this),n=null,i=h(yu(this)),r=i.next();!r.done;r=i.next())if((r=r.value).audio.label==e){n=r;break}null==n?W.v("No variants were found with label: "+e+". Ignoring the request to switch."):(this.sb=new Ia(n.language,"",0,e),iu(this,t))}},_s.prototype.selectVariantsByLabel=_s.prototype.ph,_s.prototype.bb=function(){var e=this.La;return this.H?this.H.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Hs(this).some((function(e){return"showing"==e.mode})):e},_s.prototype.isTextTrackVisible=_s.prototype.bb,_s.prototype.ie=function(e){var t=this;return p((function n(){var i,r,a,o;return O(n,(function(n){switch(n.o){case 1:if(t.La==(i=!!e))return n.return();if(t.La=i,t.l!=ku){if(t.a&&t.a.src&&t.a.textTracks)for(var s=h(Hs(t)),u=s.next();!u.done;u=s.next())"disabled"!=(r=u.value).mode&&(r.mode=i?"showing":"hidden");n.C(2);break}if(t.H.g.setTextVisibility(i),t.b.streaming.alwaysStreamText){n.C(2);break}if(!i){(s=t.f).H=!0,(u=s.b.get("text"))&&(Lo(u),s.b.delete("text")),n.C(2);break}if(lo(t.f,"text")){n.C(2);break}if(a=bu(t),!(0<(o=Vn.kc(a.textStreams,t.ia,t.Ia)).length)){n.C(2);break}return A(n,ho(t.f,o[0]),2);case 2:uu(t),I(n)}}))}))},_s.prototype.setTextTrackVisibility=_s.prototype.ie,_s.prototype.qg=function(){if(!this.Y())return W.v("getPlayheadTimeAsDate is for live streams!"),null;var e=this.ya.f,t=0;if(this.u)t=this.u.g();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.c?new Date(1e3*(this.c.presentationTimeline.f+this.a.currentTime)):this.a&&this.a.getStartDate?(e=this.a.getStartDate(),isNaN(e.getTime())?(W.v("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(e.getTime()+1e3*t)):(W.v("No way to get playhead time as Date!"),null)},_s.prototype.getPlayheadTimeAsDate=_s.prototype.qg,_s.prototype.sg=function(){if(!this.Y())return W.v("getPresentationStartTimeAsDate is for live streams!"),null;if(this.c)return new Date(1e3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?(W.v("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):e}return W.v("No way to get presentation start time as Date!"),null},_s.prototype.getPresentationStartTimeAsDate=_s.prototype.sg,_s.prototype.vd=function(){var e={total:[],audio:[],video:[],text:[]};return this.l==xu&&(e.total=Zt(this.a.buffered)),this.l==ku&&this.H.vd(e),e},_s.prototype.getBufferedInfo=_s.prototype.vd,_s.prototype.getStats=function(){if(this.l!=ku&&this.l!=xu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,switchHistory:[],stateHistory:[]};eu(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.B,n=Number(e.totalVideoFrames);t.u=Number(e.droppedVideoFrames),t.s=n,this.B.l=Number(e.corruptedVideoFrames)}e=this.j&&(e=this.j).K?e.K:NaN,this.B.j=e,this.l==ku&&((e=Eu(this))&&(this.B.w=e.bandwidth),e&&e.video&&(t=this.B,n=e.video.height||NaN,t.B=e.video.width||NaN,t.g=n),e=this.s.getBandwidthEstimate(),this.B.f=e);var i=this.B;e=i.B,t=i.g,n=i.w;for(var r=i.s,a=i.u,o=i.l,s=i.f,u=i.b,c=Rs(i.a,"playing"),l=Rs(i.a,"paused"),d=Rs(i.a,"buffering"),f=i.j,p=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=h(e.b),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.a&&n.push(t(e.a)),n}(i.a),m=[],g=(i=h(i.c.a)).next();!g.done;g=i.next())g=g.value,m.push({timestamp:g.timestamp,id:g.id,type:g.type,fromAdaptation:g.fromAdaptation,bandwidth:g.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:r,droppedFrames:a,corruptedFrames:o,estimatedBandwidth:s,loadLatency:u,playTime:c,pauseTime:l,bufferingTime:d,licenseTime:f,stateHistory:p,switchHistory:m}},_s.prototype.getStats=_s.prototype.getStats,_s.prototype.addTextTrack=function(e,t,n,i,r,a){var o=this;return p((function s(){var u,c,l,d,h,f,p,m,g;return O(s,(function(s){switch(s.o){case 1:if(o.l==xu)throw W.error("Cannot add text when loaded with src="),Error("State error!");if(o.l!=ku)throw W.error("Must call load() and wait for it to resolve before adding text tracks."),Error("State error!");if(u=bu(o),c=nn,l=o.c.periods.indexOf(u),h=(d=l+1)>=o.c.periods.length?o.c.presentationTimeline.ra():o.c.periods[d].startTime,1/0==(f=h-u.startTime))throw new Me(1,4,4033);return p=new rr(1,0,f,(function(){return[e]}),0,null),m={id:o.jf++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1==e?p:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:i,codecs:r||"",kind:n,encrypted:!1,keyId:null,language:t,label:a||null,type:c.Na,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},o.Ec.add(m),u.textStreams.push(m),A(s,ho(o.f,m),2);case 2:return(g=lo(o.f,"text"))&&va(o.Z,u,g),o.Ec.delete(m),W.debug("Choosing new streams after adding a text stream"),nu(o,u),au(o),s.return(Vn.ed(m))}}))}))},_s.prototype.addTextTrack=_s.prototype.addTextTrack,_s.prototype.ce=function(e,t){this.Fc.width=e,this.Fc.height=t},_s.prototype.setMaxHardwareResolution=_s.prototype.ce,_s.prototype.Zd=function(){if(this.l==ku){var e=this.f;if(e.f)W.error("Unable to retry after StreamingEngine is destroyed!"),e=!1;else if(e.u)W.error("Unable to retry after StreamingEngine encountered a fatal error!"),e=!1;else{for(var t=h(e.b.values()),n=t.next();!n.done;n=t.next()){var i=_o(n=n.value);n.rc&&(W.info(i,"Retrying after failure..."),n.rc=!1,Ro(e,n,.1))}e=!0}}else e=!1;return e},_s.prototype.retryStreaming=_s.prototype.Zd,_s.prototype.ig=function(){return this.c},_s.prototype.getManifest=_s.prototype.ig,_s.prototype.jg=function(){return this.w?this.w.constructor:null},_s.prototype.getManifestParserFactory=_s.prototype.jg,(i=_s.prototype).rd=function(e){var t=this.f?uo(this.f):null,n=this.f?co(this.f):null;if(Vn.filterNewPeriod(this.j,t,n,e),!(t=e.variants).some(Vn.Ub))throw new Me(2,4,4011);if(pu(this,e.variants),Vn.ve(t,this.b.restrictions,this.Fc)&&this.f&&bu(this)==e&&au(this),e=this.j?this.j.a:null)for(n=(t=h(t)).next();!n.done;n=t.next())for(var i=(n=h(n.value.drmInfos)).next();!i.done;i=n.next())if((i=i.value).keySystem==e.keySystem)for(var r=(i=h(i.initData||[])).next();!r.done;r=i.next())r=r.value,Mt(this.j,r.initDataType,r.initData)},i.Kg=function(e){W.debug("onChooseStreams_",e);try{W.N("onChooseStreams_, choosing variant from ",e.variants),W.N("onChooseStreams_, choosing text from ",e.textStreams),this.Wa=!0,this.s.disable(),cu(this),W.debug("Choosing new streams after period changed");var t=tu(this,e.variants),n=Vn.kc(e.textStreams,this.ia,this.Ia)[0]||null;this.na&&(e.variants.includes(this.na)&&(t=this.na),this.na=null),this.ka&&(e.textStreams.includes(this.ka)&&(n=this.ka),this.ka=null),t&&Ws(this,e,t,!0),n&&qs(this,e,n,!0);var i=this.f,r=i.b.get("video");if(r)var a=i.c.periods[r.Ba];else{var o=i.b.get("audio");a=o?i.c.periods[o.Ba]:null}var s=t?t.audio:null;if(!a&&n){var u;if(u=s){e=n;var c=ee(this.b.preferredTextLanguage),l=ee(s.language),d=ee(e.language);u=Z(d,c)&&!Z(l,d)}u&&(this.La=!0),this.La&&this.H.g.setTextVisibility(!0),uu(this)}var h=this.b.streaming.alwaysStreamText||this.bb()?{variant:t,text:n}:{variant:t,text:null};return W.N("onChooseStreams_, chose variant ",h.variant),W.N("onChooseStreams_, chose text ",h.text),h}catch(e){return this.pb(e),{variant:null,text:null}}},i.Lf=function(){W.debug("canSwitch_"),this.Wa=!1,this.b.abr.enabled&&(this.s.enable(),cu(this)),this.na&&(po(this.f,this.na,this.hf,this.Ue),ou(this),this.na=null),this.ka&&(mo(this.f,this.ka,!0,0,!1),su(this),this.ka=null)},i.Pg=function(){this.w&&this.w.update&&this.w.update()},i.Ug=function(){this.u&&this.u.w()},i.pb=function(e){if(this.l!=Au){var t=new H("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}};var Au=0,Iu=1,ku=2,xu=3;function Cu(e,t){var n=hs(new ds(e.Sa(),e.ua()),t.periods[0],new Er(null,0)),i=t.appMetadata||{};return n=Nu(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i}}function Nu(e){for(var t=[],n=Vn.pg(e.variants),i=(n=h(n)).next();!i.done;i=n.next())t.push(Vn.se(i.value));for(n=(e=h(e.textStreams)).next();!n.done;n=e.next())t.push(Vn.ed(n.value));return t}function Pu(){this.a={}}function Mu(e,t){var n=t.audio,i=t.video;if(n&&!i&&(e.a[n.id]=n.bandwidth||t.bandwidth),!n&&i&&(e.a[i.id]=i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,a=i.bandwidth||t.bandwidth-r;0>=a&&(W.v("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),a=t.bandwidth),e.a[n.id]=r,e.a[i.id]=a}}function Ru(e,t){var n=e.a[t];return null==n&&(n=0,W.error("Asking for bitrate of stream not given to the estimator")),0==n&&W.v("Using bitrate of 0, this stream won't affect progress"),n}function Lu(e){this.a=!1,this.b=new Re,this.c=e}function Uu(e){var t=e.audio;e=e.video,this.b=t?t.mimeType:null,this.a=t?t.codecs.split(".")[0]:null,this.f=e?e.mimeType:null,this.c=e?e.codecs.split(".")[0]:null}function _u(){this.a=[]}function Ou(e){for(var t=new _u,n=(e=h(e)).next();!n.done;n=e.next())t.add(new Uu(n.value));return t}function Du(e){var t=this;if(e&&e.constructor!=_s)throw new Me(2,9,9008);this.b=this.a=null,e?(this.a=e.b,this.b=e.mc()):(this.a=Cs(),this.b=new We),this.f=!1,this.c=[],this.g=[];var n=!e;this.j=new Lu((function(){return p((function e(){var i;return O(e,(function(e){switch(e.o){case 1:return i=function(){},A(e,Promise.all(t.g.map((function(e){return e.then(i,i)}))),2);case 2:if(!n){e.C(3);break}return A(e,t.b.destroy(),3);case 3:t.a=null,t.b=null,I(e)}}))}))}))}function Fu(){if(lt())e:{for(var e=h(ts.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function ju(e,t){for(var n=[],i=h(e.periods),r=i.next();!r.done;r=i.next())for(var a=(r=h(r.value.streams)).next();!a.done;a=r.next())a=a.value,t&&"video"==a.contentType?n.push({contentType:st(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=a.contentType||n.push({contentType:st(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function Ku(e,t,n){return p((function i(){return O(i,(function(i){if(1===i.o)return A(i,function(e,t,n,i){return p((function r(){var a,o,s;return O(r,(function(r){switch(r.o){case 1:return i.drmInfo?(a=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new Me(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(n),o=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:ju(i,!1),videoCapabilities:ju(i,!0)}})),A(r,vs(t,e,o),2)):r.return();case 2:return s=r.A,A(r,a.remove(s),3);case 3:return A(r,a.add(o.filter((function(e){return-1==s.indexOf(e.sessionId)}))),0)}}))}))}(e.b,e.a.drm,n,t),0)}))}))}function Bu(e,t,n,i){function r(){s+=1,e.a.offline.progressCallback(u,s/o)}var a=function(e){var t=[];return e.periods.forEach((function(e){e.streams.forEach((function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach((function(e){t.push(e.dataKey)}))}))})),t}(i),o=a.length+1,s=0,u=Cu(n,i);return Promise.all([t.removeSegments(a,r),t.removeManifests([n.key()],r)])}function Gu(e,t,n,i,r,a){var o={id:a.id,originalId:a.originalId,primary:a.primary,presentationTimeOffset:a.presentationTimeOffset||0,contentType:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,kind:a.kind,language:a.language,label:a.label,width:a.width||null,height:a.height||null,initSegmentKey:null,encrypted:a.encrypted,keyId:a.keyId,segments:[],variantIds:[]};r=r.presentationTimeline.pc();var s=a.id,u=a.initSegmentReference;return u&&(u=wr(u.c(),u.b,u.a,e.a.streaming.retryParameters),Bo(t,s,u,.5*Ru(i,a.id),!0,(function(t){return p((function i(){var r;return O(i,(function(i){switch(i.o){case 1:return A(i,n.addSegments([{data:t}]),2);case 2:r=i.A,e.c.push(r[0]),o.initSegmentKey=r[0],I(i)}}))}))}))),function(e,t,n){for(var i=null==(t=e.findSegmentPosition(t))?null:e.getSegmentReference(t);i;)n(i),i=e.getSegmentReference(++t)}(a,r,(function(r){var u=wr(r.c(),r.b,r.a,e.a.streaming.retryParameters);Bo(t,s,u,function(e,t,n){return n=n.endTime-n.startTime,Ru(e,t)*n}(i,a.id,r),!1,(function(t){return p((function i(){var a;return O(i,(function(i){switch(i.o){case 1:return A(i,n.addSegments([{data:t}]),2);case 2:a=i.A,e.c.push(a[0]),o.segments.push({startTime:r.startTime,endTime:r.endTime,dataKey:a[0]}),I(i)}}))}))}))})),o}function Vu(e){if(e.j.a)throw new Me(2,9,7001)}function zu(){if(!Fu())throw new Me(2,9,9e3)}function Hu(e,t){return p((function n(){return O(n,(function(n){switch(n.o){case 1:return e.g.push(t),x(n,2),A(n,t,4);case 4:return n.return(n.A);case 2:P(n),Ge(e.g,t),M(n,0)}}))}))}function Wu(e){var t=new Set(e.variants.map((function(e){return e.video}))),n=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams,1<t.size&&W.v("Multiple video tracks selected to be stored");for(var i=(t=h(n)).next();!i.done;i=t.next()){i=i.value;for(var r=h(n),a=r.next();!a.done;a=r.next())i!=(a=a.value)&&i.language==a.language&&W.v("Similar audio tracks were selected to be stored",i.id,a.id)}for(t=(n=h(e)).next();!t.done;t=n.next())for(t=t.value,r=(i=h(e)).next();!r.done;r=i.next())t!=(r=r.value)&&t.language==r.language&&W.v("Similar text tracks were selected to be stored",t.id,r.id)}_s.LoadMode={DESTROYED:Au,NOT_LOADED:Iu,MEDIA_SOURCE:ku,SRC_EQUALS:xu},Lu.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then((function(){e.b.resolve()}),(function(){e.b.resolve()})))},_u.prototype.add=function(e){this.contains(e)||this.a.push(e)},_u.prototype.contains=function(e){return this.a.some((function(t){return e.b==t.b&&e.a==t.a&&e.f==t.f&&e.c==t.c}))},V("shaka.offline.Storage",Du),Du.support=Fu,Du.prototype.destroy=function(){return this.j.destroy()},Du.prototype.destroy=Du.prototype.destroy,Du.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=ks(e,t));var n=e,i=!1;return null!=n.trackSelectionCallback&&(i=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(i=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(i=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),i&&qn("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),Ns(this.a,e)},Du.prototype.configure=Du.prototype.configure,Du.prototype.getConfiguration=function(){var e=Cs();return Ns(e,this.a,Cs()),e},Du.prototype.getConfiguration=Du.prototype.getConfiguration,Du.prototype.mc=function(){return this.b},Du.prototype.getNetworkingEngine=Du.prototype.mc,Du.prototype.store=function(e,t,n){var i=this;return Hu(this,function(e,t,n,i){return p((function r(){var a,o,s,u,c,l,d,f,m;return O(r,(function(r){switch(r.o){case 1:return zu(),e.f?r.return(Promise.reject(new Me(2,9,9006))):(e.f=!0,A(r,function(e,t,n){return p((function i(){var r,a,o,s,u,c;return O(i,(function(i){switch(i.o){case 1:return r=null,a=e.b,o={networkingEngine:a,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e}},A(i,n(),2);case 2:return(s=i.A).configure(e.a.manifest),Vu(e),x(i,3),A(i,s.start(t,o),5);case 5:return u=i.A,Vu(e),c=function(e){for(var t=new Set,n=(e=h(e.periods)).next();!n.done;n=e.next()){for(var i=h((n=n.value).textStreams),r=i.next();!r.done;r=i.next())t.add(r.value);for(i=(n=h(n.variants)).next();!i.done;i=n.next())(i=i.value).audio&&t.add(i.audio),i.video&&t.add(i.video)}return t}(u),A(i,Promise.all(Y(c,(function(e){return e.createSegmentIndex()}))),6);case 6:if(Vu(e),r)throw r;return i.return(u);case 3:return P(i),A(i,s.stop(),7);case 7:M(i,0)}}))}))}(e,t,i),2));case 2:if(a=r.A,Vu(e),a.presentationTimeline.Y()||a.presentationTimeline.Bb())throw new Me(2,9,9005,t);return o=null,s=new Zo,c=u=null,k(r,3,4),A(r,function(e,t,n){return p((function i(){var r,a,o;return O(i,(function(i){switch(i.o){case 1:return r=new kt({Wb:e.b,onError:n,Vc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a=Da(t.periods),o=e.a,r.configure(o.drm),A(i,function(e,t,n){return e.w=[],e.H=n,Ct(e,t)}(r,a,o.offline.usePersistentLicense),2);case 2:return A(i,Nt(r),3);case 3:return A(i,Pt(r),4);case 4:return i.return(r)}}))}))}(e,a,(function(e){c=c||e})),6);case 6:if(o=r.A,Vu(e),c)throw c;return A(r,function(e,t,n){return p((function i(){var r,a;return O(i,(function(i){switch(i.o){case 1:return r={width:1/0,height:1/0},function(e,t,n){for(var i=(e=h(e.periods)).next();!i.done;i=e.next())(i=i.value).variants=i.variants.filter((function(e){return Vn.Id(e,t,n)}))}(t,e.a.restrictions,r),function(e){for(var t=(e=h(e.periods)).next();!t.done;t=e.next())(t=t.value).variants=t.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&Rn(e.audio)),e.video&&(t=t&&Rn(e.video)),t}))}(t),function(e,t){for(var n=h(e.periods),i=n.next();!i.done;i=n.next())(i=i.value).variants=i.variants.filter((function(e){return Kt(t,e)}))}(t,n),function(e){var t=new _u;e.periods.forEach((function(e,n){var i=Ou(e.variants);if(0==n)for(var r=(i=h(i.a)).next();!r.done;r=i.next())t.add(r.value);else!function(e,t){e.a=e.a.filter((function(e){return t.contains(e)}))}(t,i)}));for(var n=(e=h(e.periods)).next();!n.done;n=e.next())(n=n.value).variants=n.variants.filter((function(e){return t.contains(new Uu(e))}))}(t),a=e.a.preferredAudioChannelCount,Vn.Ce(t,a),A(i,function(e,t){return p((function n(){var i,r,a,o;return O(n,(function(n){switch(n.o){case 1:i=null,r=h(e.periods),a=r.next();case 2:if(a.done){n.C(0);break}return o=a.value,i&&(o.variants=o.variants.filter((function(e){return i.contains(new Uu(e))}))),A(n,t(o),5);case 5:i=Ou(o.variants),a=r.next(),n.C(2)}}))}))}(t,(function(t){return p((function n(){var i,r,a,o,s,u,c,l;return O(n,(function(n){switch(n.o){case 1:i=Vn,r=[];for(var d=h(t.variants),f=d.next();!f.done;f=d.next())a=f.value,r.push(i.se(a));for(f=(d=h(t.textStreams)).next();!f.done;f=d.next())o=f.value,r.push(i.ed(o));return A(n,e.a.offline.trackSelectionCallback(r),2);case 2:for(s=n.A,u=new Set,c=new Set,f=(d=h(s)).next();!f.done;f=d.next())"variant"==(l=f.value).type&&u.add(l.id),"text"==l.type&&c.add(l.id);t.variants=t.variants.filter((function(e){return u.has(e.id)})),t.textStreams=t.textStreams.filter((function(e){return c.has(e.id)})),I(n)}}))}))})),2);case 2:(function(e){if(0==e.periods.length)throw new Me(2,4,4014);for(var t=(e=h(e.periods)).next();!t.done;t=e.next())Wu(t.value)})(t),I(i)}}))}))}(e,a,o),7);case 7:return A(r,s.init(),8);case 8:return Vu(e),A(r,function(e){var t=null;if(e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{Sa:n,ua:i},ua:e})}))})),t)return t;throw new Me(2,9,9013,"Could not find a cell that supports add-operations")}(s),9);case 9:return u=r.A,Vu(e),A(r,function(e,t,n,i,r,a){return p((function o(){var s,u,c,l,d,f,m,g,v,y;return O(o,(function(o){switch(o.o){case 1:return s=function(e,t,n){var i=null==t.expiration?1/0:t.expiration;return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.ra(),size:0,expiration:i,tracks:t=Nu(t.periods[0]),appMetadata:n}}(r,i,a),u=i.periods.some((function(e){return e.variants.some((function(e){return e.drmInfos&&e.drmInfos.length}))})),c=i.periods.some((function(e){return e.variants.some((function(e){return e.drmInfos.some((function(e){return e.initData&&e.initData.length}))}))})),d=null,(l=u&&!c)&&(f=n.a,d=qu.get(f.keySystem)),m=new Ko(e.b,(function(t,n){s.size=n,e.a.offline.progressCallback(s,t)}),(function(t,i){l&&e.a.offline.usePersistentLicense&&d==i&&Mt(n,"cenc",t)})),x(o,2),v=g=function(e,t,n,i,r,a,o){var s=new Pu,u=r.periods.map((function(i){return function(e,t,n,i,r,a){for(var o=h(a.variants),s=o.next();!s.done;s=o.next())Mu(i,s.value);for(s=(o=h(a.textStreams)).next();!s.done;s=o.next())i.a[s.value.id]=52;o=function(e){for(var t=new Set,n=h(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(n=(e=h(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}(a);var u=new Map;for(s=(o=h(o)).next();!s.done;s=o.next()){var c=Gu(e,t,n,i,r,s=s.value);u.set(s.id,c)}return a.variants.forEach((function(e){e.audio&&u.get(e.audio.id).variantIds.push(e.id),e.video&&u.get(e.video.id).variantIds.push(e.id)})),{startTime:a.startTime,streams:Array.from(u.values())}}(e,t,n,s,r,i)})),c=i.a,l=e.a.offline.usePersistentLicense;return c&&l&&(c.initData=[]),{originalManifestUri:a,duration:r.presentationTimeline.ra(),size:0,expiration:i.lc(),periods:u,sessionIds:l?Ut(i):[],drmInfo:c,appMetadata:o}}(e,m,t,n,i,r,a),A(o,function(e){return p((function t(){return O(t,(function(t){switch(t.o){case 1:return A(t,Promise.all(e.b.values()),2);case 2:return t.return(e.a.a)}}))}))}(m),4);case 4:if(v.size=o.A,g.expiration=n.lc(),y=Ut(n),g.sessionIds=e.a.offline.usePersistentLicense?y:[],u&&e.a.offline.usePersistentLicense&&!y.length)throw new Me(2,9,9007);return o.return(g);case 2:return P(o),A(o,m.destroy(),5);case 5:M(o,0)}}))}))}(e,u.ua,o,a,t,n),10);case 10:if(l=r.A,Vu(e),c)throw c;return A(r,u.ua.addManifests([l]),11);case 11:return d=r.A,Vu(e),f=new cs("manifest",u.path.Sa,u.path.ua,d[0]),r.return(Cu(f,l));case 4:return P(r),e.f=!1,e.c=[],A(r,s.destroy(),12);case 12:if(!o){r.C(13);break}return A(r,o.destroy(),13);case 13:M(r,0);break;case 3:if(m=N(r),!u){r.C(15);break}return A(r,u.ua.removeSegments(e.c,(function(){})),15);case 15:throw c||m}}))}))}(this,e,t||{},(function(){return p((function t(){var r,a;return O(t,(function(t){switch(t.o){case 1:return n&&"string"!=typeof n?(qn("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),r=n,t.return(new r)):A(t,br.create(e,i.b,i.a.manifest.retryParameters,n),2);case 2:return a=t.A,t.return(a)}}))}))})))},Du.prototype.store=Du.prototype.store,Du.prototype.ug=function(){return this.f},Du.prototype.getStoreInProgress=Du.prototype.ug,Du.prototype.remove=function(e){return Hu(this,function(e,t){return p((function n(){var i,r,a,o,s,u;return O(n,(function(n){switch(n.o){case 1:return zu(),null==(i=ls(t))||"manifest"!=i.a?n.return(Promise.reject(new Me(2,9,9004,t))):(r=i,a=new Zo,x(n,2),A(n,a.init(),4));case 4:return A(n,Qo(a,r.Sa(),r.ua()),5);case 5:return A(n,(o=n.A).getManifests([r.key()]),6);case 6:return s=n.A,u=s[0],A(n,Promise.all([Ku(e,u,a),Bu(e,o,r,u)]),2);case 2:return P(n),A(n,a.destroy(),8);case 8:M(n,0)}}))}))}(this,e))},Du.prototype.remove=Du.prototype.remove,Du.prototype.ih=function(){return Hu(this,function(e){return p((function t(){var n,i,r,a,o,s,u,c,l;return O(t,(function(t){switch(t.o){case 1:return zu(),n=e.b,i=e.a.drm,r=new Zo,a=!1,x(t,2),A(t,r.init(),4);case 4:for(o=[],function(e,t){e.a.forEach((function(e){!function(e){o.push(e)}(e.getEmeSessionCell())}))}(r),s=Promise.resolve(),u={},c=h(o),l=c.next();!l.done;u={dd:u.dd},l=c.next())u.dd=l.value,s=s.then(function(e){return function(){return p((function t(){var r,o;return O(t,(function(t){switch(t.o){case 1:return A(t,e.dd.getAll(),2);case 2:return r=t.A,A(t,vs(i,n,r),3);case 3:return o=t.A,A(t,e.dd.remove(o),4);case 4:o.length!=r.length&&(a=!0),I(t)}}))}))}}(u));return A(t,s,2);case 2:return P(t),A(t,r.destroy(),6);case 6:M(t,3);break;case 3:return t.return(!a)}}))}))}(this))},Du.prototype.removeEmeSessions=Du.prototype.ih,Du.prototype.list=function(){return Hu(this,p((function e(){var t,n,i;return O(e,(function(e){switch(e.o){case 1:return zu(),t=[],n=new Zo,x(e,2),A(e,n.init(),4);case 4:return i=Promise.resolve(),function(e,t){e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){t({Sa:n,ua:i},e)}))}))}(n,(function(e,n){i=i.then((function(){return p((function i(){return O(i,(function(i){switch(i.o){case 1:return A(i,n.getAllManifests(),2);case 2:i.A.forEach((function(n,i){var r=Cu(new cs("manifest",e.Sa,e.ua,i),n);t.push(r)})),I(i)}}))}))}))})),A(e,i,2);case 2:return P(e),A(e,n.destroy(),6);case 6:M(e,3);break;case 3:return e.return(t)}}))})))},Du.prototype.list=Du.prototype.list,Du.deleteAll=function(){return p((function e(){var t;return O(e,(function(e){switch(e.o){case 1:return t=new Zo,x(e,2),A(e,t.erase(),2);case 2:return P(e),A(e,t.destroy(),5);case 5:M(e,0)}}))}))};var qu=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function Xu(){for(var e=0;e<Ju.length;++e)try{Ju[e].Kf()}catch(e){W.ba("Error installing polyfill!",e)}}Fs.offline=Fu,V("shaka.polyfill.installAll",Xu);var Yu,$u,Ju=[];function Zu(e,t){for(var n={priority:t=t||0,Kf:e},i=0;i<Ju.length;i++)if(Ju[i].priority<t)return void Ju.splice(i,0,n);Ju.push(n)}function Qu(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function ec(e,t,n){"input"==e&&"range"===this.type&&(e="change"),HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function tc(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];return(n=e.apply(this,n)).abort=function(){},n}}function nc(e,t){W.debug("PatchedMediaKeysApple.requestMediaKeySystemAccess");try{var n=new ic(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function ic(e,t){if(W.debug("PatchedMediaKeysApple.MediaKeySystemAccess"),this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=h(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var a=!1,o=!1;if(r.audioCapabilities)for(var s=h(r.audioCapabilities),u=s.next();!u.done;u=s.next())if((u=u.value).contentType){a=!0;var c=u.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,c)&&(i.audioCapabilities.push(u),o=!0)}if(r.videoCapabilities)for(u=(r=h(r.videoCapabilities)).next();!u.done;u=r.next())(s=u.value).contentType&&(a=!0,u=s.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,u)&&(i.videoCapabilities.push(s),o=!0));a||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=o?i:null}if(i)return void(this.a=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function rc(e){W.debug("PatchedMediaKeysApple.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&oc(t,null),delete this.mediaKeys,(this.mediaKeys=e)?oc(e,this):Promise.resolve()}function ac(e){W.debug("PatchedMediaKeysApple.MediaKeys"),this.b=new WebKitMediaKeys(e),this.a=new et}function oc(e,t){if(e.a.Fb(),!t)return Promise.resolve();e.a.m(t,"webkitneedkey",uc);try{return Ga(t,HTMLMediaElement.HAVE_METADATA,e.a,(function(){t.webkitSetMediaKeys(e.b)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function sc(e){W.debug("PatchedMediaKeysApple.MediaKeySession"),X.call(this),this.b=null,this.g=e,this.c=this.a=null,this.f=new et,this.sessionId="",this.expiration=NaN,this.closed=new Re,this.keyStatuses=new lc}function uc(e){if(W.debug("PatchedMediaKeysApple.onWebkitNeedKey_",e),e=new Uint8Array(e.initData),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=wt(e=bt(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=e,this.dispatchEvent(t)}function cc(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new H("keystatuseschange"))}function lc(){this.size=0,this.a=void 0}function dc(e,t){W.debug("PatchedMediaKeysMs.requestMediaKeySystemAccess");try{var n=new hc(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function hc(e,t){W.debug("PatchedMediaKeysMs.MediaKeySystemAccess"),this.keySystem=e;for(var n=!1,i=0;i<t.length;++i){var r=t[i],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var s=0;s<r.audioCapabilities.length;++s){var u=r.audioCapabilities[s];if(u.contentType){o=!0;var c=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,c)&&(a.audioCapabilities.push(u),n=!0)}}if(r.videoCapabilities)for(s=0;s<r.videoCapabilities.length;++s)(u=r.videoCapabilities[s]).contentType&&(o=!0,c=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,c)&&(a.videoCapabilities.push(u),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(n=!1),n)return void(this.a=a)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function fc(e){W.debug("PatchedMediaKeysMs.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&mc(t,null),delete this.mediaKeys,(this.mediaKeys=e)?mc(e,this):Promise.resolve()}function pc(e){W.debug("PatchedMediaKeysMs.MediaKeys"),this.b=new MSMediaKeys(e),this.a=new et}function mc(e,t){if(e.a.Fb(),!t)return Promise.resolve();e.a.m(t,"msneedkey",vc);try{return Ga(t,HTMLMediaElement.HAVE_METADATA,e.a,(function(){t.msSetMediaKeys(e.b)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function gc(e){W.debug("PatchedMediaKeysMs.MediaKeySession"),X.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new et,this.sessionId="",this.expiration=NaN,this.closed=new Re,this.keyStatuses=new bc}function vc(e){if(W.debug("PatchedMediaKeysMs.onMsNeedKey_",e),e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=function(e){if(!e)return e;var t=new Hi(e);if(1>=t.data.length)return e;e=[];for(var n={},i=(t=h(t.data)).next();!i.done;n={Rc:n.Rc},i=t.next())n.Rc=i.value,e.some(function(e){return function(t){return It.Xa(t,e.Rc)}}(n))||e.push(n.Rc);return It.concat.apply(It,D(e))}(e.initData).buffer,this.dispatchEvent(t)}}function yc(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new H("keystatuseschange"))}function bc(){this.size=0,this.a=void 0}function Ec(){return W.debug("PatchedMediaKeysNop.requestMediaKeySystemAccess"),Promise.reject(Error("The key system specified is not supported."))}function wc(e){return W.debug("PatchedMediaKeysNop.setMediaKeys"),null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Tc(){throw new TypeError("Illegal constructor.")}function Sc(){throw new TypeError("Illegal constructor.")}V("shaka.polyfill.register",Zu),Zu((function(){Fl()}),-1),Zu((function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Qu),document.addEventListener("webkitfullscreenerror",Qu),document.addEventListener("mozfullscreenchange",Qu),document.addEventListener("mozfullscreenerror",Qu),document.addEventListener("MSFullscreenChange",Qu),document.addEventListener("MSFullscreenError",Qu)}})),Zu((function(){W.debug("IndexedDB.install");var t=!1;if(pt("CrKey"))W.debug("Removing IndexedDB from ChromeCast"),t=!0;else try{e.indexedDB&&(t=!1)}catch(e){W.debug("Removing IndexedDB due to an exception when accessing it"),t=!0}t&&delete e.indexedDB})),Zu((function(){W.debug("InputEvent.install"),pt("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(W.info("Patching input event support on IE."),HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=ec)})),Zu((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),Zu((function(){W.debug("mathRound.install")})),Zu((function(){W.debug("MediaSource.install");var t=ft();e.MediaSource?e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(W.info("Patching Chromecast MSE bugs."),function(){var e=MediaSource.isTypeSupported,t=/^dv(?:h[e1]|a[v1])\./;MediaSource.isTypeSupported=function(n){for(var i=n.split(/ *; */),r=i[0],a={},o=1;o<i.length;++o){var s=i[o].split("="),u=s[0];s=s[1].replace(/"(.*)"/,"$1"),a[u]=s}if(!(i=a.codecs))return e(n);var c=!1,l=!1;for(var d in n=i.split(",").filter((function(e){return t.test(e)&&(l=!0),/^(hev|hvc)1\.2/.test(e)&&(c=!0),!0})),l&&(c=!1),a.codecs=n.join(","),c&&(a.eotf="smpte2084"),a)r+="; "+d+'="'+a[d]+'"';return cast.__platform__.canDisplayType(r)}}()):t?(function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),12>=t?(W.info("Patching Safari 11 & 12 MSE bugs."),tc(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):(W.info("Patching Safari 13 MSE bugs."),tc())):pt("Tizen 2")||pt("Tizen 3")||pt("Tizen 4")?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=ut(t)[0]&&e(t)}}():W.info("Using native MSE as-is."):W.info("No MSE implementation available.")})),ic.prototype.createMediaKeys=function(){W.debug("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var e=new ac(this.keySystem);return Promise.resolve(e)},ic.prototype.getConfiguration=function(){return W.debug("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration"),this.a},ac.prototype.createSession=function(e){if(W.debug("PatchedMediaKeysApple.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new sc(this.b,e)},ac.prototype.setServerCertificate=function(e){return W.debug("PatchedMediaKeysApple.MediaKeys.setServerCertificate"),e&&new Uint8Array(e),Promise.resolve(!0)},z(sc,X),(i=sc.prototype).generateRequest=function(e,t){W.debug("PatchedMediaKeysApple.MediaKeySession.generateRequest"),this.a=new Re;try{this.b=this.g.createSession("video/mp4",new Uint8Array(t)),this.sessionId=this.b.sessionId||"",this.f.m(this.b,"webkitkeymessage",this.yh.bind(this)),this.f.m(this.b,"webkitkeyadded",this.wh.bind(this)),this.f.m(this.b,"webkitkeyerror",this.xh.bind(this)),cc(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},i.load=function(){return W.debug("PatchedMediaKeysApple.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){W.debug("PatchedMediaKeysApple.MediaKeySession.update"),this.c=new Re;try{this.b.update(new Uint8Array(e))}catch(e){this.c.reject(e)}return this.c},i.close=function(){W.debug("PatchedMediaKeysApple.MediaKeySession.close");try{this.b.close(),this.closed.resolve(),this.f.Fb()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return W.debug("PatchedMediaKeysApple.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},i.yh=function(e){W.debug("PatchedMediaKeysApple.onWebkitKeyMessage_",e),this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new H("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},i.wh=function(e){W.debug("PatchedMediaKeysApple.onWebkitKeyAdded_",e),this.c&&(cc(this,"usable"),this.c.resolve(),this.c=null)},i.xh=function(e){if(W.debug("PatchedMediaKeysApple.onWebkitKeyError_",e),(e=Error("EME PatchedMediaKeysApple key error")).errorCode=this.b.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.c)this.c.reject(e),this.c=null;else switch(this.b.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:cc(this,"output-not-allowed");break;default:cc(this,"internal-error")}},(i=lc.prototype).forEach=function(e){this.a&&e(this.a,Yu)},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=Yu;return!(!this.a||!It.Xa(new Uint8Array(e),new Uint8Array(t)))},i.entries=function(){},i.keys=function(){},i.values=function(){},Zu((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(W.info("Using Apple-prefixed EME"),Yu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=rc,e.MediaKeys=ac,e.MediaKeySystemAccess=ic,navigator.requestMediaKeySystemAccess=nc)})),hc.prototype.createMediaKeys=function(){W.debug("PatchedMediaKeysMs.MediaKeySystemAccess.createMediaKeys");var e=new pc(this.keySystem);return Promise.resolve(e)},hc.prototype.getConfiguration=function(){return W.debug("PatchedMediaKeysMs.MediaKeySystemAccess.getConfiguration"),this.a},pc.prototype.createSession=function(e){if(W.debug("PatchedMediaKeysMs.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new gc(this.b,e)},pc.prototype.setServerCertificate=function(){return W.debug("PatchedMediaKeysMs.MediaKeys.setServerCertificate"),Promise.resolve(!1)},z(gc,X),(i=gc.prototype).generateRequest=function(e,t){W.debug("PatchedMediaKeysMs.MediaKeySession.generateRequest"),this.a=new Re;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),this.f.m(this.c,"mskeymessage",this.Tg.bind(this)),this.f.m(this.c,"mskeyadded",this.Rg.bind(this)),this.f.m(this.c,"mskeyerror",this.Sg.bind(this)),yc(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},i.load=function(){return W.debug("PatchedMediaKeysMs.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){W.debug("PatchedMediaKeysMs.MediaKeySession.update"),this.b=new Re;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},i.close=function(){W.debug("PatchedMediaKeysMs.MediaKeySession.close");try{this.c.close(),this.closed.resolve(),this.f.Fb()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return W.debug("PatchedMediaKeysMs.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},i.Tg=function(e){W.debug("PatchedMediaKeysMs.onMsKeyMessage_",e),this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new H("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},i.Rg=function(e){W.debug("PatchedMediaKeysMs.onMsKeyAdded_",e),this.a?(W.debug("Simulating completion for a PR persistent license."),yc(this,"usable"),this.a.resolve(),this.a=null):this.b&&(yc(this,"usable"),this.b.resolve(),this.b=null)},i.Sg=function(e){if(W.debug("PatchedMediaKeysMs.onMsKeyError_",e),(e=Error("EME PatchedMediaKeysMs key error")).errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:yc(this,"output-not-allowed");break;default:yc(this,"internal-error")}},(i=bc.prototype).forEach=function(e){this.a&&e(this.a,$u)},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=$u;return!(!this.a||!It.Xa(new Uint8Array(e),new Uint8Array(t)))},i.entries=function(){},i.keys=function(){},i.values=function(){},Zu((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(W.info("Using ms-prefixed EME v20140218"),$u=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=fc,e.MediaKeys=pc,e.MediaKeySystemAccess=hc,navigator.requestMediaKeySystemAccess=dc)})),Tc.prototype.createSession=function(){},Tc.prototype.setServerCertificate=function(){},Sc.prototype.getConfiguration=function(){},Sc.prototype.createMediaKeys=function(){},Zu((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(W.info("EME not available."),navigator.requestMediaKeySystemAccess=Ec,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=wc,e.MediaKeys=Tc,e.MediaKeySystemAccess=Sc)}),-10);var Ac,Ic="";function kc(e){return Ic?Ic+e.charAt(0).toUpperCase()+e.slice(1):e}function xc(e,t){W.debug("PatchedMediaKeysWebkit.requestMediaKeySystemAccess");try{var n=new Nc(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Cc(e){W.debug("PatchedMediaKeysWebkit.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&Mc(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Mc(e,this),Promise.resolve()}function Nc(e,t){W.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess"),this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var a=0;a<t.length;++a){var o=t[a],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var c=0;c<o.audioCapabilities.length;++c){var l=o.audioCapabilities[c];if(l.contentType){u=!0;var d=l.contentType.split(";")[0];r.canPlayType(d,this.a)&&(s.audioCapabilities.push(l),i=!0)}}if(o.videoCapabilities)for(c=0;c<o.videoCapabilities.length;++c)(l=o.videoCapabilities[c]).contentType&&(u=!0,r.canPlayType(l.contentType,this.a)&&(s.videoCapabilities.push(l),i=!0));if(u||(i=r.canPlayType("video/mp4",this.a)||r.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Pc(e){W.debug("PatchedMediaKeysWebkit.MediaKeys"),this.g=e,this.b=null,this.a=new et,this.c=[],this.f={}}function Mc(e,t){e.b=t,e.a.Fb();var n=Ic;t&&(e.a.m(t,n+"needkey",e.Xg.bind(e)),e.a.m(t,n+"keymessage",e.Ch.bind(e)),e.a.m(t,n+"keyadded",e.Ah.bind(e)),e.a.m(t,n+"keyerror",e.Bh.bind(e)))}function Rc(e,t){var n=e.f[t];return n?(W.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):(n=e.c.shift())?(n.sessionId=t,e.f[t]=n,W.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):null}function Lc(e,t,n){W.debug("PatchedMediaKeysWebkit.MediaKeySession"),X.call(this),this.f=e,this.j=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new Re,this.keyStatuses=new Oc}function Uc(e,t,n){if(e.j)return Promise.reject(Error("The session is already initialized."));e.j=!0;try{if("persistent-license"==e.g)if(n)var i=new Uint8Array(wt("LOAD_SESSION|"+n));else{var r=wt("PERSISTENT|"),a=new Uint8Array(r.byteLength+t.byteLength);a.set(new Uint8Array(r),0),a.set(new Uint8Array(t),r.byteLength),i=a}else i=new Uint8Array(t)}catch(e){return Promise.reject(e)}e.b=new Re;var o=kc("generateKeyRequest");try{e.f[o](e.c,i)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);new Ce((function(){try{e.f[o](e.c,i)}catch(t){e.b.reject(t),e.b=null}})).T(.01)}return e.b}function _c(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new H("keystatuseschange"))}function Oc(){this.size=0,this.a=void 0}function Dc(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Fc(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function jc(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Kc(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Bc(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function Gc(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Vc(t,n,i){return new e.TextTrackCue(t,n,i)}function zc(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function Hc(){}Nc.prototype.createMediaKeys=function(){W.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var e=new Pc(this.a);return Promise.resolve(e)},Nc.prototype.getConfiguration=function(){return W.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration"),this.b},(i=Pc.prototype).createSession=function(e){if(W.debug("PatchedMediaKeysWebkit.MediaKeys.createSession"),"temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.b||document.createElement("video");return t.src||(t.src="about:blank"),e=new Lc(t,this.g,e),this.c.push(e),e},i.setServerCertificate=function(){return W.debug("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate"),Promise.resolve(!1)},i.Xg=function(e){W.debug("PatchedMediaKeysWebkit.onWebkitNeedKey_",e);var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",e.initData instanceof ArrayBuffer?t.initData=e.initData:t.initData=e.initData.buffer,this.b.dispatchEvent(t)},i.Ch=function(e){W.debug("PatchedMediaKeysWebkit.onWebkitKeyMessage_",e);var t=Rc(this,e.sessionId);t?(e=new H("message",{messageType:null==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),W.debug("PatchedMediaKeysWebkit.MediaKeySession.generated"),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e)):W.error("Session not found",e.sessionId)},i.Ah=function(e){W.debug("PatchedMediaKeysWebkit.onWebkitKeyAdded_",e),(e=Rc(this,e.sessionId))&&(W.debug("PatchedMediaKeysWebkit.MediaKeySession.ready"),_c(e,"usable"),e.a&&e.a.resolve(),e.a=null)},i.Bh=function(e){W.debug("PatchedMediaKeysWebkit.onWebkitKeyError_",e);var t=Rc(this,e.sessionId);t&&t.handleError(e)},z(Lc,X),(i=Lc.prototype).handleError=function(e){W.debug("PatchedMediaKeysWebkit.MediaKeySession.handleError",e);var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.b?(45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?_c(this,"output-restricted"):_c(this,1==t?"expired":"internal-error"))},i.je=function(e,t){if(this.a)this.a.then(this.je.bind(this,e,t)).catch(this.je.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var n=yt(t),i=JSON.parse(n);"oct"!=i.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=It.Za(i.keys[0].k),i=It.Za(i.keys[0].kid)}else n=new Uint8Array(t),i=null;var r=kc("addKey");try{this.f[r](this.c,n,i,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},i.generateRequest=function(e,t){return W.debug("PatchedMediaKeysWebkit.MediaKeySession.generateRequest"),Uc(this,t,null)},i.load=function(e){return W.debug("PatchedMediaKeysWebkit.MediaKeySession.load"),"persistent-license"==this.g?Uc(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){W.debug("PatchedMediaKeysWebkit.MediaKeySession.update",e);var t=new Re;return this.je(t,e),t},i.close=function(){if(W.debug("PatchedMediaKeysWebkit.MediaKeySession.close"),"persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=kc("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},i.remove=function(){return W.debug("PatchedMediaKeysWebkit.MediaKeySession.remove"),"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(i=Oc.prototype).forEach=function(e){this.a&&e(this.a,Ac)},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=Ac;return!(!this.a||!It.Xa(new Uint8Array(e),new Uint8Array(t)))},i.entries=function(){},i.keys=function(){},i.values=function(){},Zu((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)W.info("Using webkit-prefixed EME v0.1b"),Ic="webkit";else{if(!HTMLMediaElement.prototype.generateKeyRequest)return;W.info("Using nonprefixed EME v0.1b")}Ac=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=xc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Cc,e.MediaKeys=Pc,e.MediaKeySystemAccess=Nc}})),Zu((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(W.debug("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Fc,Object.defineProperty(t,"disablePictureInPicture",{get:Kc,set:Bc,enumerable:!0,configurable:!0}),document.exitPictureInPicture=jc,document.addEventListener("webkitpresentationmodechanged",Dc,!0))}})),Zu((function(){if(W.debug("VideoPlayPromise.install"),e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}})),Zu((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=Gc)}})),Zu((function(){if(e.VTTCue)W.info("Using native VTTCue.");else if(e.TextTrackCue){var t=TextTrackCue.length;if(3==t)W.info("Using VTTCue polyfill from 3 argument TextTrackCue."),e.VTTCue=Vc;else if(6==t)W.info("Using VTTCue polyfill from 6 argument TextTrackCue."),e.VTTCue=zc;else{try{var n=!!Vc(1,2,"")}catch(e){n=!1}n&&(W.info("Using VTTCue polyfill from 3 argument TextTrackCue."),e.VTTCue=Vc)}}else W.error("VTTCue not available.")})),V("shaka.text.TtmlTextParser",Hc),Hc.prototype.parseInit=function(){},Hc.prototype.parseInit=Hc.prototype.parseInit,Hc.prototype.parseMedia=function(e,t){var n=yt(e),i=[],r=new DOMParser,a=null;if(""==n)return i;try{a=r.parseFromString(n,"text/xml")}catch(e){throw new Me(2,2,2005,"Failed to parse TTML.")}if(a){if(n=a.getElementsByTagName("parsererror")[0])throw new Me(2,2,2005,n.textContent);if(!(r=a.getElementsByTagName("tt")[0]))throw new Me(2,2,2005,"TTML does not contain <tt> tag.");var o=Wi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=Wi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),u=Wi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),c=Wi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","tickRate");if(a=r.getAttribute("xml:space")||"default",n=r.getAttribute("tts:extent"),"default"!=a&&"preserve"!=a)throw new Me(2,2,2005,"Invalid xml:space value: "+a);a="default"==a,o=new gl(o,s,u,c),s=al(r.getElementsByTagName("metadata")[0]),u=al(r.getElementsByTagName("styling")[0]),c=al(r.getElementsByTagName("layout")[0]);for(var l=[],d=0;d<c.length;d++){var f,p,m=c[d],g=u,v=n,y=new Tn,b=m.getAttribute("xml:id");b?(y.id=b,b=null,v&&(b=Xc.exec(v)||$c.exec(v)),v=b?Number(b[1]):null,b=b?Number(b[2]):null,(f=dl(m,g,"extent"))&&null!=(f=(p=Xc.exec(f))||$c.exec(f))&&(y.width=null!=v?100*Number(f[1])/v:Number(f[1]),y.height=null!=b?100*Number(f[2])/b:Number(f[2]),y.widthUnits=p||null!=v?Sn:0,y.heightUnits=p||null!=b?Sn:0),(m=dl(m,g,"origin"))&&null!=(f=(p=Xc.exec(m))||$c.exec(m))&&(y.viewportAnchorX=null!=b?100*Number(f[1])/b:Number(f[1]),y.viewportAnchorY=null!=v?100*Number(f[2])/v:Number(f[2]),y.viewportAnchorUnits=p||null!=v?Sn:0)):(W.v("TtmlTextParser parser encountered a region with no id. Region will be ignored."),y=null),y&&l.push(y)}for(n=ol(r.getElementsByTagName("body")[0]),r=(n=h(n)).next();!r.done;r=n.next())(r=ul(r.value,t.periodStart,o,s,u,c,l,a,!1))&&i.push(r)}return i},Hc.prototype.parseMedia=Hc.prototype.parseMedia;var Wc,qc,Xc=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Yc=/^(\d+px|\d+em)$/,$c=/^(\d+)px (\d+)px$/,Jc=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Zc=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Qc=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,el=/^(\d*(?:\.\d*)?)f$/,tl=/^(\d*(?:\.\d*)?)t$/,nl=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,il={left:vn,center:"center",right:"end",start:vn,end:"end"},rl={left:"line-left",center:"center",right:"line-right"};function al(e){var t=[];if(!e)return t;for(var n=h(e.childNodes),i=n.next();!i.done;i=n.next())(i=i.value).nodeType==Node.ELEMENT_NODE&&"br"!==i.nodeName&&(i=al(i),t=t.concat(i));return t.length||t.push(e),t}function ol(e){if(!e)return[];for(var t=[],n=(e=h(e.childNodes)).next();!n.done;n=e.next())(n=n.value)instanceof Element&&(n.hasAttribute("begin")?t.push(n):t=t.concat(ol(n)));return t}function sl(e,t){for(var n="",i=h(e.childNodes),r=i.next();!r.done;r=i.next())"br"==(r=r.value).nodeName&&e.childNodes[0]!==r?n+="\n":r.childNodes&&0<r.childNodes.length?n+=sl(r,t):n+=t?r=(r=r.textContent.trim()).replace(/\s+/g," "):r.textContent;return n}function ul(e,t,n,i,r,a,o,s,u){if(u&&"br"==e.nodeName)return(e=new un(0,0,"")).spacer=!0,e;var c=/^[\s\n]*$/.test(e.textContent),l=e.nodeType==Node.ELEMENT_NODE&&!e.hasAttribute("begin")&&!e.hasAttribute("end");if(e.nodeType!=Node.ELEMENT_NODE||l&&c||l&&!u)return null;c=pl(e.getAttribute("begin"),n),l=pl(e.getAttribute("end"),n);var d=pl(e.getAttribute("dur"),n);if(null==l&&null!=d&&(l=c+d),!u&&(null==c||null==l))throw new Me(2,2,2001);if(c+=t,l+=t,d="",u=[],Array.from(e.childNodes).find((function(e){return e.nodeType===Node.TEXT_NODE&&/\S+/.test(e.textContent)})))d=sl(e,s);else for(var f=h(e.childNodes),p=f.next();!p.done;p=f.next())(p=ul(p.value,t,n,i,r,a,o,s,!0))&&(p.startTime=p.startTime||c,p.endTime=p.endTime||l,u.push(p));if((t=new un(c,l,d)).nestedCues=u,(a=fl(e,"region",a,"")[0])&&a.getAttribute("xml:id")){var m=a.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==m}))[0]}return function(e,t,n,i,r){"rtl"==ll(t,n,r,"direction")&&(e.direction="rtl");var a=ll(t,n,r,"writingMode");if("tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=pn),(a=ll(t,n,r,"textAlign"))?(e.positionAlign=rl[a],e.lineAlign=il[a],e.textAlign=dn[a.toUpperCase()]):e.textAlign="start",(a=ll(t,n,r,"displayAlign"))&&(e.displayAlign=fn[a.toUpperCase()]),(a=ll(t,n,r,"color"))&&(e.color=a),(a=ll(t,n,r,"backgroundColor"))&&(e.backgroundColor=a),(a=ll(t,n,r,"fontFamily"))&&(e.fontFamily=a),(a=ll(t,n,r,"fontWeight"))&&"bold"==a&&(e.fontWeight=700),(a=ll(t,n,r,"wrapOption"))&&"noWrap"==a&&(e.wrapLine=!1),(a=ll(t,n,r,"lineHeight"))&&a.match(Yc)&&(e.lineHeight=a),(a=ll(t,n,r,"fontSize"))&&a.match(Yc)&&(e.fontSize=a),(a=ll(t,n,r,"fontStyle"))&&(e.fontStyle=wn[a.toUpperCase()]),i){a=i.getAttribute("imageType")||i.getAttribute("imagetype");var o=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==a&&"Base64"==o&&i&&(e.backgroundImage="data:image/png;base64,"+i)}(n=dl(n,r,"textDecoration"))&&cl(e,n),(t=hl(t,r,"textDecoration"))&&cl(e,t)}(t,e,a,i=fl(e,"smpte:backgroundImage",i,"#")[0],r),t}function cl(e,t){for(var n=t.split(" "),i=0;i<n.length;i++)switch(n[i]){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ge(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ge(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ge(e.textDecoration,"overline")}}function ll(e,t,n,i){return(e=hl(e,n,i))?e:dl(t,n,i)}function dl(e,t,n){for(var i=al(e),r=0;r<i.length;r++){var a=Wi.getAttributeNS(i[r],"http://www.w3.org/ns/ttml#styling",n);if(a)return a}return(e=fl(e,"style",t,"")[0])?Wi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function hl(e,t,n){var i=Wi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n);if(i)return i;for(e=fl(e,"style",t,""),t=null,i=0;i<e.length;i++){var r=Wi.getAttributeNS(e[i],"http://www.w3.org/ns/ttml#styling",n);r&&(t=r)}return t}function fl(e,t,n,i){var r=[];if(!e||1>n.length)return r;var a=e;for(e=null;a&&!(e=a.getAttribute(t))&&(a=a.parentNode)instanceof Element;);if(t=e)for(e=(t=h(t=t.split(" "))).next();!e.done;e=t.next()){e=e.value;for(var o=(a=h(n)).next();!o.done;o=a.next())if(i+(o=o.value).getAttribute("xml:id")==e){r.push(o);break}}return r}function pl(e,t){var n=null;if(Jc.test(e)){n=Jc.exec(e);var i=Number(n[1]),r=Number(n[2]),a=Number(n[3]),o=Number(n[4]);n=(a+=(o+=(Number(n[5])||0)/t.b)/t.frameRate)+60*r+3600*i}else Zc.test(e)?n=ml(Zc,e):Qc.test(e)?n=ml(Qc,e):el.test(e)?(n=el.exec(e),n=Number(n[1])/t.frameRate):tl.test(e)?(n=tl.exec(e),n=Number(n[1])/t.a):nl.test(e)&&(n=ml(nl,e));return n}function ml(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function gl(e,t,n,i){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(i),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function vl(){this.a=new Hc}function yl(){}function bl(e,t,n){var i;if(i=/^align:(start|middle|center|end|left|right)$/.exec(t))t=i[1],e.textAlign="middle"==t?ln:dn[t.toUpperCase()];else if(i=/^vertical:(lr|rl)$/.exec(t))e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl";else if(i=/^size:([\d.]+)%$/.exec(t))e.size=Number(i[1]);else if(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center");else{if(!(i=/^region:(.*)$/.exec(t))){e:{if(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=yn[n[2].toUpperCase()]);else{if(!(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))){e=!1;break e}e.lineInterpretation=gn,e.line=Number(n[1]),n[2]&&(e.lineAlign=yn[n[2].toUpperCase()])}e=!0}return e}(t=function(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:(W.v("VTT parser could not find a region with id: ",t," The region will be ignored."),null)}(n,i[1]))&&(e.region=t)}return!0}function El(e){if(null==(e=jr(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function wl(){this.a=null}function Tl(e,t,n){var i,r,a;return(new ji).P("payl",Gi((function(e){i=yt(e)}))).P("iden",Gi((function(e){r=yt(e)}))).P("sttg",Gi((function(e){a=yt(e)}))).parse(e),i?function(e,t,n,i,r){if(e=new un(i,r,e),t&&(e.id=t),n)for(n=Kr(t=new Dr(n));n;)bl(e,n,[])||W.v("VTT parser encountered an invalid VTT setting: ",n," The setting will be ignored."),Fr(t),n=Kr(t);return e}(i,r,a,t,n):null}function Sl(e){return document.createElement(e)}function Al(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Il(){}function kl(){Wc?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Wc=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=xl):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function xl(e,t){var n=this;return p((function i(){var r;return O(i,(function(i){switch(i.o){case 1:return console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),A(i,Wc.call(n,e,t),2);case 2:return Ol(r=i.A)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Wc,i.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Cl,i.return(Cl.call(n,e,t)))}}))}))}function Cl(e,t){var n=this;return p((function i(){var r,a,o,s,u,c,l,d;return O(i,(function(i){switch(i.o){case 1:console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=_l(e),a=[];for(var f=h(t),p=f.next();!p.done;p=f.next())o=p.value,s=Nl(o.videoCapabilities,r),u=Nl(o.audioCapabilities,r),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!u.length||((c=Object.assign({},o)).videoCapabilities=s,c.audioCapabilities=u,a.push(c));if(!a.length)throw(l=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",l.code=DOMException.NOT_SUPPORTED_ERR,l;return A(i,Wc.call(n,e,a),2);case 2:return d=i.A,i.return(new Ul(d,r))}}))}))}function Nl(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function Pl(){}function Ml(){qc?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(qc=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Rl):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Rl(e){var t=this;return p((function n(){var i,r;return O(n,(function(n){switch(n.o){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),A(n,qc.call(t,e),2);case 2:return i=n.A,e.keySystemConfiguration?(r=i.keySystemAccess)&&Ol(r)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=qc,n.return(i)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Ll,n.return(Ll.call(t,e))):n.return(i)}}))}))}function Ll(e){var t=this;return p((function n(){var i,r,a,o,s,u,c,l,d;return O(n,(function(n){switch(n.o){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),i=null,e.keySystemConfiguration&&(r=e.keySystemConfiguration,a=r.keySystem,o=r.audio&&r.audio.encryptionScheme,s=r.video&&r.video.encryptionScheme,i=_l(a),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},o&&o!=i||s&&s!=i)?n.return(u):A(n,qc.call(t,e),2);case 2:if((c=n.A).keySystemAccess){c.keySystemAccess=new Ul(c.keySystemAccess,i),n.C(3);break}if(!e.keySystemConfiguration){n.C(3);break}var h=e.keySystemConfiguration,f=[],p=[];return h.audio&&f.push({robustness:h.audio.robustness||"",contentType:e.audio.contentType}),h.video&&p.push({robustness:h.video.robustness||"",contentType:e.video.contentType}),h={initDataTypes:h.initDataType?[h.initDataType]:[],distinctiveIdentifier:h.distinctiveIdentifier,persistentState:h.persistentState,sessionTypes:h.sessionTypes},f.length&&(h.audioCapabilities=f),p.length&&(h.videoCapabilities=p),l=h,d=c,A(n,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[l]),5);case 5:d.keySystemAccess=n.A;case 3:return n.return(c)}}))}))}function Ul(e,t){this.b=e,this.a=t,this.keySystem=e.keySystem}function _l(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Ol(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function Dl(){}function Fl(){kl(),Ml()}kn["application/ttml+xml"]=Hc,V("shaka.text.Mp4TtmlParser",vl),vl.prototype.parseInit=function(e){var t=!1;if((new ji).P("moov",Ki).P("trak",Ki).P("mdia",Ki).P("minf",Ki).P("stbl",Ki).za("stsd",Bi).P("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new Me(2,2,2007)},vl.prototype.parseInit=vl.prototype.parseInit,vl.prototype.parseMedia=function(e,t){var n=!1,i=[];if((new ji).P("mdat",Gi(function(e){n=!0,i=i.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!n)throw new Me(2,2,2007);return i},vl.prototype.parseMedia=vl.prototype.parseMedia,kn['application/mp4; codecs="stpp"']=vl,kn['application/mp4; codecs="stpp.ttml.im1t"']=vl,kn['application/mp4; codecs="stpp.TTML.im1t"']=vl,V("shaka.text.VttTextParser",yl),yl.prototype.parseInit=function(){},yl.prototype.parseInit=yl.prototype.parseInit,yl.prototype.parseMedia=function(e,t){var n=yt(e);if(n=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Me(2,2,2e3);var i=t.segmentStart;if(null==i&&(i=0,n[0].includes("X-TIMESTAMP-MAP"))){var r=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=n[0].match(/MPEGTS:(\d+)/m);if(r&&a){if(null==(i=El(new Dr(r[1]))))throw new Me(2,2,2e3);i=t.periodStart+(Number(a[1])/9e4-i)}}a=[];var o=n[0].split("\n");for(r=1;r<o.length;r++)if(/^Region:/.test(o[r])){var s=new Dr(o[r]),u=new Tn;Kr(s),Fr(s);for(var c=Kr(s);c;){var l;e:{var d=u,h=c;if(l=/^id=(.*)$/.exec(h))d.id=l[1];else if(l=/^width=(\d{1,2}|100)%$/.exec(h))d.width=Number(l[1]);else if(l=/^lines=(\d+)$/.exec(h))d.height=Number(l[1]),d.heightUnits=2;else if(l=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))d.regionAnchorX=Number(l[1]),d.regionAnchorY=Number(l[2]);else if(l=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))d.viewportAnchorX=Number(l[1]),d.viewportAnchorY=Number(l[2]);else{if(!/^scroll=up$/.exec(h)){l=!1;break e}d.scroll="up"}l=!0}l||W.v("VTT parser encountered an invalid VTTRegion setting: ",c," The setting will be ignored."),Fr(s),c=Kr(s)}a.push(u)}for(r=[],s=1;s<n.length;s++){if(l=o=n[s].split("\n"),d=i,o=a,1==l.length&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||"STYLE"==l[0])o=null;else{u=null,l[0].includes("--\x3e")||(u=l[0],l.splice(0,1)),h=El(c=new Dr(l[0]));var f=jr(c,/[ \t]+--\x3e[ \t]+/g),p=El(c);if(null==h||null==f||null==p)throw new Me(2,2,2001);for(l=new un(h+d,p+d,l.slice(1).join("\n").trim()),Fr(c),d=Kr(c);d;)bl(l,d,o)||W.v("VTT parser encountered an invalid VTT setting: ",d," The setting will be ignored."),Fr(c),d=Kr(c);null!=u&&(l.id=u),o=l}o&&r.push(o)}return r},yl.prototype.parseMedia=yl.prototype.parseMedia,kn["text/vtt"]=yl,kn['text/vtt; codecs="vtt"']=yl,V("shaka.text.Mp4VttParser",wl),wl.prototype.parseInit=function(e){var t=!1;if((new ji).P("moov",Ki).P("trak",Ki).P("mdia",Ki).za("mdhd",function(e){0==e.version?(e.reader.V(4),e.reader.V(4),this.a=e.reader.M(),e.reader.V(4)):(e.reader.V(8),e.reader.V(8),this.a=e.reader.M(),e.reader.V(8)),e.reader.V(4)}.bind(this)).P("minf",Ki).P("stbl",Ki).za("stsd",Bi).P("wvtt",(function(){t=!0})).parse(e),!this.a)throw new Me(2,2,2008);if(!t)throw new Me(2,2,2008)},wl.prototype.parseInit=wl.prototype.parseInit,wl.prototype.parseMedia=function(e,t){var n=this;if(!this.a)throw W.error("No init segment for MP4+VTT!"),new Me(2,2,2008);var i,r=0,a=[],o=[],s=!1,u=!1,c=!1,l=null;if((new ji).P("moof",Ki).P("traf",Ki).za("tfdt",(function(e){s=!0,r=0==e.version?e.reader.M():e.reader.cc()})).za("tfhd",(function(e){var t=e.flags;(e=e.reader).V(4),1&t&&e.V(8),2&t&&e.V(4),l=8&t?e.M():null})).za("trun",(function(e){u=!0;var t=e.version,n=e.flags,i=(e=e.reader).M();1&n&&e.V(4),4&n&&e.V(4);for(var r=[],o=0;o<i;o++){var s={duration:null,sampleSize:null,le:null};256&n&&(s.duration=e.M()),512&n&&(s.sampleSize=e.M()),1024&n&&e.V(4),2048&n&&(s.le=0==t?e.M():e.kf()),r.push(s)}a=r})).P("mdat",Gi((function(e){c=!0,i=e}))).parse(e),!c&&!s&&!u)throw new Me(2,2,2008);var d=r,h=new Oi(new DataView(i.buffer,i.byteOffset,i.byteLength),0);return a.forEach((function(e){var i=e.duration||l,a=e.le?r+e.le:d;d=a+(i||0);var s=0;do{var u=h.M();s+=u;var c=h.M(),f=null;"vttc"==(c=zi(c))?8<u&&(f=h.Eb(u-8)):("vtte"!=c&&W.error("Unknown box "+c+"! Skipping!"),h.V(u-8)),i?f&&o.push(Tl(f,t.periodStart+a/n.a,t.periodStart+d/n.a)):W.error("WVTT sample duration unknown, and no default found!")}while(e.sampleSize&&s<e.sampleSize)})),o.filter(Qt.jb)},wl.prototype.parseMedia=wl.prototype.parseMedia,kn['application/mp4; codecs="wvtt"']=wl,V("shaka.util.Dom.createHTMLElement",Sl),V("shaka.util.Dom.createVideoElement",(function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e})),V("shaka.util.Dom.asHTMLElement",(function(e){return e})),V("shaka.util.Dom.asHTMLMediaElement",(function(e){return e})),V("shaka.util.Dom.removeAllChildren",Al),V("EmeEncryptionSchemePolyfill",Il),Il.install=kl,V("McEncryptionSchemePolyfill",Pl),Pl.install=Ml,Ul.prototype.getConfiguration=function(){var e=this.b.getConfiguration();if(e.videoCapabilities)for(var t=h(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.a;if(e.audioCapabilities)for(n=(t=h(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.a;return e},Ul.prototype.createMediaKeys=function(){return this.b.createMediaKeys()},V("EncryptionSchemePolyfills",Dl),Dl.install=Fl,void 0!==n&&n.Rf&&(n.Rf=Dl);for(var jl={ach:{h:"Lwo",i:"Acholi"},ady:{h:"Адыгэбзэ",i:"Adyghe"},af:{h:"Afrikaans",i:"Afrikaans"},"af-NA":{h:"Afrikaans (Namibia)",i:"Afrikaans (Namibia)"},"af-ZA":{h:"Afrikaans (South Africa)",i:"Afrikaans (South Africa)"},ak:{h:"Tɕɥi",i:"Akan"},ar:{h:"العربية",i:"Arabic"},"ar-AR":{h:"العربية",i:"Arabic"},"ar-MA":{h:"العربية",i:"Arabic (Morocco)"},"ar-SA":{h:"العربية (السعودية)",i:"Arabic (Saudi Arabia)"},"ay-BO":{h:"Aymar aru",i:"Aymara"},az:{h:"Azərbaycan dili",i:"Azerbaijani"},"az-AZ":{h:"Azərbaycan dili",i:"Azerbaijani"},"be-BY":{h:"Беларуская",i:"Belarusian"},bg:{h:"Български",i:"Bulgarian"},"bg-BG":{h:"Български",i:"Bulgarian"},bn:{h:"বাংলা",i:"Bengali"},"bn-IN":{h:"বাংলা (ভারত)",i:"Bengali (India)"},"bn-BD":{h:"বাংলা(বাংলাদেশ)",i:"Bengali (Bangladesh)"},"bs-BA":{h:"Bosanski",i:"Bosnian"},ca:{h:"Català",i:"Catalan"},"ca-ES":{h:"Català",i:"Catalan"},cak:{h:"Maya Kaqchikel",i:"Kaqchikel"},"ck-US":{h:"ᏣᎳᎩ (tsalagi)",i:"Cherokee"},cs:{h:"Čeština",i:"Czech"},"cs-CZ":{h:"Čeština",i:"Czech"},cy:{h:"Cymraeg",i:"Welsh"},"cy-GB":{h:"Cymraeg",i:"Welsh"},da:{h:"Dansk",i:"Danish"},"da-DK":{h:"Dansk",i:"Danish"},de:{h:"Deutsch",i:"German"},"de-AT":{h:"Deutsch (Österreich)",i:"German (Austria)"},"de-DE":{h:"Deutsch (Deutschland)",i:"German (Germany)"},"de-CH":{h:"Deutsch (Schweiz)",i:"German (Switzerland)"},dsb:{h:"Dolnoserbšćina",i:"Lower Sorbian"},el:{h:"Ελληνικά",i:"Greek"},"el-GR":{h:"Ελληνικά",i:"Greek (Greece)"},en:{h:"English",i:"English"},"en-GB":{h:"English (UK)",i:"English (UK)"},"en-AU":{h:"English (Australia)",i:"English (Australia)"},"en-CA":{h:"English (Canada)",i:"English (Canada)"},"en-IE":{h:"English (Ireland)",i:"English (Ireland)"},"en-IN":{h:"English (India)",i:"English (India)"},"en-PI":{h:"English (Pirate)",i:"English (Pirate)"},"en-UD":{h:"English (Upside Down)",i:"English (Upside Down)"},"en-US":{h:"English (US)",i:"English (US)"},"en-ZA":{h:"English (South Africa)",i:"English (South Africa)"},"en@pirate":{h:"English (Pirate)",i:"English (Pirate)"},eo:{h:"Esperanto",i:"Esperanto"},"eo-EO":{h:"Esperanto",i:"Esperanto"},es:{h:"Español",i:"Spanish"},"es-AR":{h:"Español (Argentine)",i:"Spanish (Argentina)"},"es-419":{h:"Español (Latinoamérica)",i:"Spanish (Latin America)"},"es-CL":{h:"Español (Chile)",i:"Spanish (Chile)"},"es-CO":{h:"Español (Colombia)",i:"Spanish (Colombia)"},"es-EC":{h:"Español (Ecuador)",i:"Spanish (Ecuador)"},"es-ES":{h:"Español (España)",i:"Spanish (Spain)"},"es-LA":{h:"Español (Latinoamérica)",i:"Spanish (Latin America)"},"es-NI":{h:"Español (Nicaragua)",i:"Spanish (Nicaragua)"},"es-MX":{h:"Español (México)",i:"Spanish (Mexico)"},"es-US":{h:"Español (Estados Unidos)",i:"Spanish (United States)"},"es-VE":{h:"Español (Venezuela)",i:"Spanish (Venezuela)"},et:{h:"eesti keel",i:"Estonian"},"et-EE":{h:"Eesti (Estonia)",i:"Estonian (Estonia)"},eu:{h:"Euskara",i:"Basque"},"eu-ES":{h:"Euskara",i:"Basque"},fa:{h:"فارسی",i:"Persian"},"fa-IR":{h:"فارسی",i:"Persian"},"fb-LT":{h:"Leet Speak",i:"Leet"},ff:{h:"Fulah",i:"Fulah"},fi:{h:"Suomi",i:"Finnish"},"fi-FI":{h:"Suomi",i:"Finnish"},"fo-FO":{h:"Føroyskt",i:"Faroese"},fr:{h:"Français",i:"French"},"fr-CA":{h:"Français (Canada)",i:"French (Canada)"},"fr-FR":{h:"Français (France)",i:"French (France)"},"fr-BE":{h:"Français (Belgique)",i:"French (Belgium)"},"fr-CH":{h:"Français (Suisse)",i:"French (Switzerland)"},"fy-NL":{h:"Frysk",i:"Frisian (West)"},ga:{h:"Gaeilge",i:"Irish"},"ga-IE":{h:"Gaeilge (Gaelic)",i:"Irish (Gaelic)"},gl:{h:"Galego",i:"Galician"},"gl-ES":{h:"Galego",i:"Galician"},"gn-PY":{h:"Avañe'ẽ",i:"Guarani"},"gu-IN":{h:"ગુજરાતી",i:"Gujarati"},"gx-GR":{h:"Ἑλληνική ἀρχαία",i:"Classical Greek"},he:{h:"עברית‏",i:"Hebrew"},"he-IL":{h:"עברית‏",i:"Hebrew"},hi:{h:"हिन्दी",i:"Hindi"},"hi-IN":{h:"हिन्दी",i:"Hindi"},hr:{h:"Hrvatski",i:"Croatian"},"hr-HR":{h:"Hrvatski",i:"Croatian"},hsb:{h:"Hornjoserbšćina",i:"Upper Sorbian"},ht:{h:"Kreyòl",i:"Haitian Creole"},hu:{h:"Magyar",i:"Hungarian"},"hu-HU":{h:"Magyar",i:"Hungarian"},"hy-AM":{h:"Հայերեն",i:"Armenian"},id:{h:"Bahasa Indonesia",i:"Indonesian"},"id-ID":{h:"Bahasa Indonesia",i:"Indonesian"},is:{h:"Íslenska",i:"Icelandic"},"is-IS":{h:"Íslenska (Iceland)",i:"Icelandic (Iceland)"},it:{h:"Italiano",i:"Italian"},"it-IT":{h:"Italiano",i:"Italian"},ja:{h:"日本語",i:"Japanese"},"ja-JP":{h:"日本語",i:"Japanese"},"jv-ID":{h:"Basa Jawa",i:"Javanese"},"ka-GE":{h:"ქართული",i:"Georgian"},"kk-KZ":{h:"Қазақша",i:"Kazakh"},km:{h:"ភាសាខ្មែរ",i:"Khmer"},"km-KH":{h:"ភាសាខ្មែរ",i:"Khmer"},kab:{h:"Taqbaylit",i:"Kabyle"},kn:{h:"ಕನ್ನಡ",i:"Kannada"},"kn-IN":{h:"ಕನ್ನಡ (India)",i:"Kannada (India)"},ko:{h:"한국어",i:"Korean"},"ko-KR":{h:"한국어 (韩国)",i:"Korean (Korea)"},ku:{h:"Kurdî",i:"Kurdish"},"ku-TR":{h:"Kurdî",i:"Kurdish"},la:{h:"Latin",i:"Latin"},"la-VA":{h:"Latin",i:"Latin"},lb:{h:"Lëtzebuergesch",i:"Luxembourgish"},"li-NL":{h:"Lèmbörgs",i:"Limburgish"},lt:{h:"Lietuvių",i:"Lithuanian"},"lt-LT":{h:"Lietuvių",i:"Lithuanian"},lv:{h:"Latviešu",i:"Latvian"},"lv-LV":{h:"Latviešu",i:"Latvian"},mai:{h:"मैथिली, মৈথিলী",i:"Maithili"},"mg-MG":{h:"Malagasy",i:"Malagasy"},mk:{h:"Македонски",i:"Macedonian"},"mk-MK":{h:"Македонски (Македонски)",i:"Macedonian (Macedonian)"},ml:{h:"മലയാളം",i:"Malayalam"},"ml-IN":{h:"മലയാളം",i:"Malayalam"},"mn-MN":{h:"Монгол",i:"Mongolian"},mr:{h:"मराठी",i:"Marathi"},"mr-IN":{h:"मराठी",i:"Marathi"},ms:{h:"Bahasa Melayu",i:"Malay"},"ms-MY":{h:"Bahasa Melayu",i:"Malay"},mt:{h:"Malti",i:"Maltese"},"mt-MT":{h:"Malti",i:"Maltese"},my:{h:"ဗမာစကာ",i:"Burmese"},nb:{h:"Norsk (bokmål)",i:"Norwegian (bokmal)"},"nb-NO":{h:"Norsk (bokmål)",i:"Norwegian (bokmal)"},ne:{h:"नेपाली",i:"Nepali"},"ne-NP":{h:"नेपाली",i:"Nepali"},nl:{h:"Nederlands",i:"Dutch"},"nl-BE":{h:"Nederlands (België)",i:"Dutch (Belgium)"},"nl-NL":{h:"Nederlands (Nederland)",i:"Dutch (Netherlands)"},"nn-NO":{h:"Norsk (nynorsk)",i:"Norwegian (nynorsk)"},no:{h:"Norsk",i:"Norwegian"},oc:{h:"Occitan",i:"Occitan"},"or-IN":{h:"ଓଡ଼ିଆ",i:"Oriya"},pa:{h:"ਪੰਜਾਬੀ",i:"Punjabi"},"pa-IN":{h:"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",i:"Punjabi (India)"},pl:{h:"Polski",i:"Polish"},"pl-PL":{h:"Polski",i:"Polish"},"ps-AF":{h:"پښتو",i:"Pashto"},pt:{h:"Português",i:"Portuguese"},"pt-BR":{h:"Português (Brasil)",i:"Portuguese (Brazil)"},"pt-PT":{h:"Português (Portugal)",i:"Portuguese (Portugal)"},"qu-PE":{h:"Qhichwa",i:"Quechua"},"rm-CH":{h:"Rumantsch",i:"Romansh"},ro:{h:"Română",i:"Romanian"},"ro-RO":{h:"Română",i:"Romanian"},ru:{h:"Русский",i:"Russian"},"ru-RU":{h:"Русский",i:"Russian"},"sa-IN":{h:"संस्कृतम्",i:"Sanskrit"},"se-NO":{h:"Davvisámegiella",i:"Northern Sámi"},"si-LK":{h:"පළාත",i:"Sinhala (Sri Lanka)"},sk:{h:"Slovenčina",i:"Slovak"},"sk-SK":{h:"Slovenčina (Slovakia)",i:"Slovak (Slovakia)"},sl:{h:"Slovenščina",i:"Slovenian"},"sl-SI":{h:"Slovenščina",i:"Slovenian"},"so-SO":{h:"Soomaaliga",i:"Somali"},sq:{h:"Shqip",i:"Albanian"},"sq-AL":{h:"Shqip",i:"Albanian"},sr:{h:"Српски",i:"Serbian"},"sr-RS":{h:"Српски (Serbia)",i:"Serbian (Serbia)"},su:{h:"Basa Sunda",i:"Sundanese"},sv:{h:"Svenska",i:"Swedish"},"sv-SE":{h:"Svenska",i:"Swedish"},sw:{h:"Kiswahili",i:"Swahili"},"sw-KE":{h:"Kiswahili",i:"Swahili (Kenya)"},ta:{h:"தமிழ்",i:"Tamil"},"ta-IN":{h:"தமிழ்",i:"Tamil"},te:{h:"తెలుగు",i:"Telugu"},"te-IN":{h:"తెలుగు",i:"Telugu"},tg:{h:"забо́ни тоҷикӣ́",i:"Tajik"},"tg-TJ":{h:"тоҷикӣ",i:"Tajik"},th:{h:"ภาษาไทย",i:"Thai"},"th-TH":{h:"ภาษาไทย (ประเทศไทย)",i:"Thai (Thailand)"},tl:{h:"Filipino",i:"Filipino"},"tl-PH":{h:"Filipino",i:"Filipino"},tlh:{h:"tlhIngan-Hol",i:"Klingon"},tr:{h:"Türkçe",i:"Turkish"},"tr-TR":{h:"Türkçe",i:"Turkish"},"tt-RU":{h:"татарча",i:"Tatar"},uk:{h:"Українська",i:"Ukrainian"},"uk-UA":{h:"Українська",i:"Ukrainian"},ur:{h:"اردو",i:"Urdu"},"ur-PK":{h:"اردو",i:"Urdu"},uz:{h:"O'zbek",i:"Uzbek"},"uz-UZ":{h:"O'zbek",i:"Uzbek"},vi:{h:"Tiếng Việt",i:"Vietnamese"},"vi-VN":{h:"Tiếng Việt",i:"Vietnamese"},"xh-ZA":{h:"isiXhosa",i:"Xhosa"},yi:{h:"ייִדיש",i:"Yiddish"},"yi-DE":{h:"ייִדיש (German)",i:"Yiddish (German)"},zh:{h:"中文",i:"Chinese"},"zh-HANS":{h:"中文简体",i:"Chinese Simplified"},"zh-HANT":{h:"中文繁體",i:"Chinese Traditional"},"zh-CN":{h:"中文（中国）",i:"Chinese Simplified (China)"},"zh-HK":{h:"中文（香港）",i:"Chinese Traditional (Hong Kong)"},"zh-SG":{h:"中文（新加坡）",i:"Chinese Simplified (Singapore)"},"zh-TW":{h:"中文（台灣）",i:"Chinese Traditional (Taiwan)"},"zu-ZA":{h:"isiZulu",i:"Zulu"}},Kl=h(Object.keys(jl)),Bl=Kl.next();!Bl.done;Bl=Kl.next()){var Gl=Bl.value;jl[Gl.toLowerCase()]=jl[Gl]}function Vl(e,t,n,i,r,a,o){function s(e){return"variant"==e.type?e.audioRoles?e.audioRoles.join(", "):void 0:e.roles.join(", ")}var u=e.filter((function(e){return 1==e.active}))[0],c=Yl(t,"shaka-back-to-overflow-button");Ql(t),t.appendChild(c),c=new Map;for(var l=h(e),d=l.next();!d.done;d=l.next())d=d.value,c.has(d.language)||c.set(d.language,new Set),c.get(d.language).add(s(d));for(c=new Set,u=u?u.language+": "+s(u):"",l={},d=(e=h(e)).next();!d.done;l={gc:l.gc},d=e.next()){l.gc=d.value,d=l.gc.language;var f=s(l.gc),p=d+": "+f;if(!c.has(p)){c.add(p);var m=Sl("button");m.addEventListener("click",function(e){return function(){n(e.gc)}}(l));var g=Sl("span");switch(m.appendChild(g),g.textContent=zl(d,a),o){case Sh:f?g.textContent=f:(W.ba("Track #"+l.gc.id+" does not have a role, but the UI is configured to only show role."),g.textContent="?");break;case Ah:f&&(g.textContent+=": "+f)}i&&p==u&&(m.appendChild(Jl()),g.classList.add("shaka-chosen-item"),m.setAttribute("aria-selected","true"),r.textContent=g.textContent),t.appendChild(m)}}}function zl(e,t){if(!e&&!t)return"";switch(e){case"mul":return t.resolve("MULTIPLE_LANGUAGES");case"und":return t.resolve("UNDETERMINED_LANGUAGE");case"zxx":return t.resolve("NOT_APPLICABLE")}var n=te(e);return e in jl?jl[e].h:n in jl?jl[n].h+" ("+e+")":t.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function Hl(e,t){this.parent=e,this.controls=t,this.eventManager=new et,this.localization=this.controls.Ka,this.player=this.controls.$a(),this.video=this.controls.qc()}function Wl(e,t,n,i){Hl.call(this,e,t);var r=this;this.b=Sl("div"),this.b.classList.add("shaka-range-container"),this.b.classList.add.apply(this.b.classList,D(n)),this.c=!1,this.a=document.createElement("input"),this.a.classList.add("shaka-range-element"),this.a.classList.add.apply(this.a.classList,D(i)),this.a.type="range",this.a.step="any",this.a.min="0",this.a.max="1",this.a.value="0",this.b.appendChild(this.a),this.parent.appendChild(this.b),this.eventManager.m(this.a,"mousedown",(function(){r.c=!0,r.l()})),this.eventManager.m(this.a,"touchstart",(function(e){r.c=!0,Xl(r,e),r.l()})),this.eventManager.m(this.a,"input",(function(){r.g()})),this.eventManager.m(this.a,"touchmove",(function(e){Xl(r,e),r.g()})),this.eventManager.m(this.a,"touchend",(function(e){r.c=!1,Xl(r,e),r.j()})),this.eventManager.m(this.a,"mouseup",(function(){r.c=!1,r.j()}))}function ql(e,t){e.c||(e.a.value=t)}function Xl(e,t){t.preventDefault();var n=t.changedTouches[0],i=e.a.getBoundingClientRect(),r=parseFloat(e.a.min),a=parseFloat(e.a.max);(n=r+(a-r)/i.width*(n.clientX-i.left))<r?n=r:n>a&&(n=a),e.a.value=n}function Yl(e,t){var n=e.getElementsByClassName(t);return n.length?n[0]:null}function $l(e){e&&(e=Yl(e,"shaka-chosen-item"))&&e.parentElement.focus()}function Jl(){var e=Sl("i");return e.classList.add("material-icons"),e.classList.add("shaka-chosen-item"),e.textContent="done",e.setAttribute("aria-hidden","true"),e}function Zl(e,t){e&&(t?(e.classList.add("shaka-displayed"),e.classList.remove("shaka-hidden")):(e.classList.add("shaka-hidden"),e.classList.remove("shaka-displayed")))}function Ql(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ed(e,t){Wl.call(this,e,t,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var n=this;this.s=this.controls.g,this.f=new Ce((function(){n.video.currentTime=parseFloat(n.a.value)})),this.eventManager.m(this.localization,"locale-updated",(function(){return nd(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){return nd(n)})),ql(this,this.video.currentTime),td(this),nd(this)}function td(e){var t=e.s.seekBarColors,n=parseFloat(e.a.value),i=e.video.buffered.length,r=i?e.video.buffered.start(0):0,a=i?e.video.buffered.end(i-1):0,o=e.player.fc(),s=o.end-o.start,u=o.end;e.a.min=o.start,e.a.max=u,e.player.Y()&&5>s?Zl(e.b,!1):(Zl(e.b,!0),0==i?e.b.style.background=t.base:(i=(Math.max(r,o.start)-o.start)/s||0,a=(Math.min(a,o.end)-o.start)/s||0,n=(Math.min(Math.max(n,o.start),o.end)-o.start)/s||0,e.b.style.background="linear-gradient("+["to right",(e.s.showUnbufferedStart?t.base:t.played)+" "+100*i+"%",t.played+" "+100*i+"%",t.played+" "+100*n+"%",t.buffered+" "+100*n+"%",t.buffered+" "+100*a+"%",t.base+" "+100*a+"%"].join()+")"))}function nd(e){e.a.setAttribute("aria-label",e.localization.resolve("SEEK"))}function id(t,n,i,r){var a=this;X.call(this),this.O=!0,this.g=r,this.l=new Ei(i,t,this.g.castReceiverAppId),this.Ia=!0,this.c=this.l.qc(),this.B=i,this.s=this.l.$a(),this.wa=t,this.f=n,this.j=null,this.Z=!1,this.H=[],this.Wa=[],this.Ma=!1,this.K=new Ce((function(){a.f.style.cursor="none",a.Ma=!1,od(a)})),this.X=new Ce((function(){a.a.removeAttribute("shown"),a.u.T(2)})),this.u=new Ce((function(){for(var e=h(a.H),t=e.next();!t.done;t=e.next())Zl(t.value,!1)})),this.ya=new Ce((function(){cd(a)&&dd(a)})),this.w=null,this.Ja=[],this.Ka=function(){var e=new ae("en");return e.aa("ar",new Map([["AUTO_QUALITY","تلقائي"],["BACK","رجوع"],["CAPTIONS","الترجمة والشرح"],["CAST","إرسال..."],["ENTER_PICTURE_IN_PICTURE",'الدخول في وضع "نافذة ضمن نافذة"'],["EXIT_FULL_SCREEN","إنهاء وضع ملء الشاشة"],["EXIT_PICTURE_IN_PICTURE",'الخروج من وضع "نافذة ضمن نافذة"'],["FAST_FORWARD","تقديم سريع"],["FULL_SCREEN","ملء الشاشة"],["LANGUAGE","اللغة"],["LIVE","مباشر"],["MORE_SETTINGS","مزيد من الإعدادات"],["MULTIPLE_LANGUAGES","لغات متعددة"],["MUTE","كتم الصوت"],["NOT_APPLICABLE","غير سارٍ"],["OFF","إيقاف"],["ON","تشغيل"],["PAUSE","إيقاف مؤقت"],["PICTURE_IN_PICTURE","نافذة ضمن النافذة"],["PLAY","التشغيل"],["RESOLUTION","درجة الدقة"],["REWIND","إرجاع"],["SEEK","البحث بالتمرير"],["SKIP_TO_LIVE","الانتقال إلى بث مباشر"],["UNDETERMINED_LANGUAGE","غير محدد"],["UNMUTE","إعادة الصوت"],["UNRECOGNIZED_LANGUAGE","غير معروف"],["VOLUME","مستوى الصوت"]])),e.aa("de",new Map([["AUTO_QUALITY","Automatisch"],["BACK","Zurück"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["RESOLUTION","Auflösung"],["REWIND","Zurückspulen"],["SEEK","Suche"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstärke"]])),e.aa("en",new Map([["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.aa("en-GB",new Map([["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),e.aa("es",new Map([["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Enviar..."],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rápidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["MORE_SETTINGS","Más opciones"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","No"],["ON","Sí"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["RESOLUTION","Resolución"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_TO_LIVE","Ir al vídeo en directo"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.aa("es-419",new Map([["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Transmitir..."],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["MORE_SETTINGS","Más opciones de configuración"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["RESOLUTION","Resolución"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_TO_LIVE","Adelantar hasta la transmisión en vivo"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.aa("fr",new Map([["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster…"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein écran"],["EXIT_PICTURE_IN_PICTURE","Quitter le mode PIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein écran"],["LANGUAGE","Langue"],["LIVE","En direct"],["MORE_SETTINGS","Plus de paramètres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Désactivée"],["ON","Activée"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["RESOLUTION","Résolution"],["REWIND","Retour arrière"],["SEEK","Chercher"],["SKIP_TO_LIVE","Accéder à la partie la plus récente du direct"],["UNDETERMINED_LANGUAGE","Langue indéterminée"],["UNMUTE","Réactiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),e.aa("it",new Map([["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Più lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),e.aa("ja",new Map([["AUTO_QUALITY","自動"],["BACK","戻る"],["CAPTIONS","字幕"],["CAST","キャスト..."],["ENTER_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを開始"],["EXIT_FULL_SCREEN","全画面表示を終了"],["EXIT_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを終了"],["FAST_FORWARD","早送り"],["FULL_SCREEN","全画面表示"],["LANGUAGE","言語"],["LIVE","ライブ"],["MORE_SETTINGS","詳細設定"],["MULTIPLE_LANGUAGES","多言語"],["MUTE","ミュート"],["NOT_APPLICABLE","該当なし"],["OFF","オフ"],["ON","オン"],["PAUSE","一時停止"],["PICTURE_IN_PICTURE","ピクチャー イン ピクチャー"],["PLAY","再生"],["RESOLUTION","解像度"],["REWIND","巻き戻し"],["SEEK","シーク再生"],["SKIP_TO_LIVE","ライブ配信までスキップ"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","ミュートを解除"],["UNRECOGNIZED_LANGUAGE","不明"],["VOLUME","音量"]])),e.aa("ko",new Map([["AUTO_QUALITY","자동"],["BACK","뒤로"],["CAPTIONS","자막"],["CAST","전송..."],["ENTER_PICTURE_IN_PICTURE","PIP 모드 시작"],["EXIT_FULL_SCREEN","전체화면 닫기"],["EXIT_PICTURE_IN_PICTURE","PIP 모드 종료"],["FAST_FORWARD","빨리 감기"],["FULL_SCREEN","전체화면"],["LANGUAGE","언어"],["LIVE","실시간"],["MORE_SETTINGS","설정 더보기"],["MULTIPLE_LANGUAGES","여러 언어"],["MUTE","음소거"],["NOT_APPLICABLE","해당 사항 없음"],["OFF","사용 안함"],["ON","사용"],["PAUSE","일시중지"],["PICTURE_IN_PICTURE","PIP 모드"],["PLAY","재생"],["RESOLUTION","해상도"],["REWIND","되감기"],["SEEK","찾기"],["SKIP_TO_LIVE","라이브 동영상으로 건너뛰기"],["UNDETERMINED_LANGUAGE","미정"],["UNMUTE","음소거 해제"],["UNRECOGNIZED_LANGUAGE","알 수 없음"],["VOLUME","볼륨"]])),e.aa("nl",new Map([["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),e.aa("pl",new Map([["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyłaj..."],["ENTER_PICTURE_IN_PICTURE","Włącz tryb obrazu w obrazie"],["EXIT_FULL_SCREEN","Zamknij pełny ekran"],["EXIT_PICTURE_IN_PICTURE","Wyłącz tryb obrazu w obrazie"],["FAST_FORWARD","Przewiń do przodu"],["FULL_SCREEN","Pełny ekran"],["LANGUAGE","Język"],["LIVE","Na żywo"],["MORE_SETTINGS","Więcej ustawień"],["MULTIPLE_LANGUAGES","Wiele języków"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyłączone"],["ON","Włączone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w obrazie"],["PLAY","Odtwórz"],["RESOLUTION","Rozdzielczość"],["REWIND","Przewiń do tyłu"],["SEEK","Szukaj"],["SKIP_TO_LIVE","Przejdź do transmisji na żywo"],["UNDETERMINED_LANGUAGE","Nie określono"],["UNMUTE","Wyłącz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Głośność"]])),e.aa("pt-BR",new Map([["CAPTIONS","Legendas"],["CAST","Transmitir..."],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["MORE_SETTINGS","Mais definições"],["MUTE","Desativar som"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["REWIND","Retroceder"],["SEEK","Procurar"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","Não reconhecido"],["VOLUME","Volume"]])),e.aa("pt-PT",new Map([["AUTO_QUALITY","Automático"],["BACK","Anterior"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_PICTURE_IN_PICTURE","Entrar no modo ecrã no ecrã"],["EXIT_FULL_SCREEN","Sair do modo de ecrã inteiro"],["EXIT_PICTURE_IN_PICTURE","Sair do modo ecrã no ecrã"],["FAST_FORWARD","Avançar"],["FULL_SCREEN","Ecrã inteiro"],["LANGUAGE","Idioma"],["LIVE","Em direto"],["MORE_SETTINGS","Mais definições"],["MULTIPLE_LANGUAGES","Vários idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","Não aplicável"],["OFF","Desligado"],["ON","Ligado"],["PAUSE","Colocar em pausa"],["PICTURE_IN_PICTURE","Ecrã no ecrã"],["PLAY","Reproduzir"],["RESOLUTION","Resolução"],["REWIND","Rebobinar"],["SEEK","Procurar"],["SKIP_TO_LIVE","Avançar para o direto"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Reativar o som"],["UNRECOGNIZED_LANGUAGE","Não reconhecido"],["VOLUME","Volume"]])),e.aa("ru",new Map([["AUTO_QUALITY","Авто"],["BACK","Назад"],["CAPTIONS","Титры"],["CAST","Транслировать..."],["ENTER_PICTURE_IN_PICTURE",'Перейти в режим "Картинка в картинке"'],["EXIT_FULL_SCREEN","Обычный режим"],["EXIT_PICTURE_IN_PICTURE",'Выйти из режима "Картинка в картинке"'],["FAST_FORWARD","Перемотка вперед"],["FULL_SCREEN","Полноэкранный режим"],["LANGUAGE","Язык"],["LIVE","Прямой эфир"],["MORE_SETTINGS","Дополнительные настройки"],["MULTIPLE_LANGUAGES","Несколько языков"],["MUTE","Отключить звук"],["NOT_APPLICABLE","Неприменимо"],["OFF","Включить"],["ON","Отключить"],["PAUSE","Пауза"],["PICTURE_IN_PICTURE","Картинка в картинке"],["PLAY","Воспроизвести"],["RESOLUTION","Разрешение"],["REWIND","Перемотать назад"],["SEEK","Перемотка"],["SKIP_TO_LIVE","Пропустить и перейти к прямой трансляции"],["UNDETERMINED_LANGUAGE","Не указано"],["UNMUTE","Включить звук"],["UNRECOGNIZED_LANGUAGE","Не распознано"],["VOLUME","Громкость"]])),e.aa("th",new Map([["AUTO_QUALITY","อัตโนมัติ"],["BACK","กลับ"],["CAPTIONS","คำบรรยาย"],["CAST","แคสต์..."],["ENTER_PICTURE_IN_PICTURE","เข้าสู่การแสดงภาพซ้อนภาพ"],["EXIT_FULL_SCREEN","ออกจากการแสดงแบบเต็มหน้าจอ"],["EXIT_PICTURE_IN_PICTURE","ออกจากการแสดงภาพซ้อนภาพ"],["FAST_FORWARD","กรอไปข้างหน้า"],["FULL_SCREEN","เต็มหน้าจอ"],["LANGUAGE","ภาษา"],["LIVE","สด"],["MORE_SETTINGS","การตั้งค่าเพิ่มเติม"],["MULTIPLE_LANGUAGES","หลายภาษา"],["MUTE","ปิดเสียง"],["NOT_APPLICABLE","ไม่เกี่ยวข้อง"],["OFF","ปิด"],["ON","เปิด"],["PAUSE","หยุดชั่วคราว"],["PICTURE_IN_PICTURE","การแสดงภาพซ้อนภาพ"],["PLAY","เล่น"],["RESOLUTION","ความละเอียด"],["REWIND","กรอกลับ"],["SEEK","ค้นหา"],["SKIP_TO_LIVE","ข้ามไปที่การถ่ายทอดสด"],["UNDETERMINED_LANGUAGE","ไม่กำหนด"],["UNMUTE","เปิดเสียง"],["UNRECOGNIZED_LANGUAGE","ที่ไม่รู้จัก"],["VOLUME","ระดับเสียง"]])),e.aa("tr",new Map([["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazılar"],["CAST","Yayınla..."],["ENTER_PICTURE_IN_PICTURE","Pencere içinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan çık"],["EXIT_PICTURE_IN_PICTURE","Pencere İçinde Pencereden Çık"],["FAST_FORWARD","İleri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canlı"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden çok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geçerli değil"],["OFF","Kapalı"],["ON","Açık"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere İçinde Pencere"],["PLAY","Oynat"],["RESOLUTION","Çözünürlük"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_TO_LIVE","Canlı yayına atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi aç"],["UNRECOGNIZED_LANGUAGE","Tanınmayan"],["VOLUME","Ses"]])),e.aa("zh",new Map([["AUTO_QUALITY","自动"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投射…"],["ENTER_PICTURE_IN_PICTURE","进入“画中画”模式"],["EXIT_FULL_SCREEN","退出全屏模式"],["EXIT_PICTURE_IN_PICTURE","退出“画中画”模式"],["FAST_FORWARD","快进"],["FULL_SCREEN","全屏"],["LANGUAGE","语言"],["LIVE","已发布"],["MORE_SETTINGS","更多设置"],["MULTIPLE_LANGUAGES","多种语言"],["MUTE","静音"],["NOT_APPLICABLE","不适用"],["OFF","关闭"],["ON","开启"],["PAUSE","暂停"],["PICTURE_IN_PICTURE","画中画"],["PLAY","播放"],["RESOLUTION","分辨率"],["REWIND","快退"],["SEEK","进度"],["SKIP_TO_LIVE","跳转到直播状态"],["UNDETERMINED_LANGUAGE","未确定"],["UNMUTE","取消静音"],["UNRECOGNIZED_LANGUAGE","无法识别"],["VOLUME","音量"]])),e.aa("zh-TW",new Map([["AUTO_QUALITY","自動"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投放..."],["ENTER_PICTURE_IN_PICTURE","進入子母畫面"],["EXIT_FULL_SCREEN","退出全螢幕模式"],["EXIT_PICTURE_IN_PICTURE","離開子母畫面"],["FAST_FORWARD","快轉"],["FULL_SCREEN","全螢幕"],["LANGUAGE","語言"],["LIVE","直播"],["MORE_SETTINGS","顯示更多設定"],["MULTIPLE_LANGUAGES","多種語言"],["MUTE","靜音"],["NOT_APPLICABLE","不適用"],["OFF","關閉"],["ON","開啟"],["PAUSE","暫停"],["PICTURE_IN_PICTURE","子母畫面"],["PLAY","播放"],["RESOLUTION","解析度"],["REWIND","倒轉"],["SEEK","搜尋"],["SKIP_TO_LIVE","直接跳至直播影片"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","取消靜音"],["UNRECOGNIZED_LANGUAGE","無法辨識"],["VOLUME","音量"]])),e.Ae(navigator.languages||[]),e}(),this.b=new et,this.configure(this.g),function(t){t.b.m(t.s,"buffering",(function(){t.O&&Zl(t.G,t.s.Tb())})),t.O&&Zl(t.G,t.s.Tb()),t.b.m(e,"keydown",(function(n){t.ka.add(n.key);var i=t.Hc();"Tab"==n.key&&(t.a.classList.add("shaka-keyboard-navigation"),od(t),t.b.m(e,"mousedown",t.rb.bind(t))),"Escape"==n.key&&t.u.gb(),i&&t.ka.has("Tab")&&function(e,t){var n=e.H.filter((function(e){return e.classList.contains("shaka-displayed")}))[0];if(n.childNodes.length){for(var i=n.firstElementChild;i&&i.classList.contains("shaka-hidden");)i=i.nextElementSibling;for(n=n.lastElementChild;n&&n.classList.contains("shaka-hidden");)n=n.previousElementSibling;var r=document.activeElement;e.ka.has("Shift")?r==i&&(t.preventDefault(),n.focus()):r==n&&(t.preventDefault(),i.focus())}}(t,n)})),t.b.m(e,"click",(function(){return t.sc()})),t.b.m(t.a,"dblclick",(function(){t.g.doubleClickForFullscreen&&t.me()})),t.b.m(t.c,"play",t.L.bind(t)),t.b.m(t.c,"pause",t.L.bind(t)),t.b.m(t.c,"ended",t.L.bind(t)),t.b.m(t.f,"mousemove",t.ia.bind(t)),t.b.m(t.f,"touchmove",t.ia.bind(t),{passive:!0}),t.b.m(t.f,"touchend",t.ia.bind(t),{passive:!0}),t.b.m(t.f,"mouseleave",t.sb.bind(t)),t.b.m(t.l,"caststatuschanged",(function(){ud(t)})),t.b.m(t.f,"keyup",(function(e){var n=document.activeElement,i=!(!n||!n.classList)&&n.classList.contains("shaka-volume-bar"),r=n&&n.classList&&n.classList.contains("shaka-seek-bar");if(t.a.contains(n)&&t.ia(e),t.ka.delete(e.key),t.g.enableKeyboardPlaybackControls)switch(e.key){case"ArrowLeft":i||ld(t,t.c.currentTime-5);break;case"ArrowRight":i||ld(t,t.c.currentTime+5);break;case"Home":ld(t,t.s.fc().start);break;case"End":ld(t,t.s.fc().end);break;case" ":r&&sd(t)}})),screen.orientation&&t.b.m(screen.orientation,"change",(function(){t.c&&0!=t.c.readyState&&!t.l.ha()&&t.g.enableFullscreenOnRotation&&(screen.orientation.type.includes("landscape")&&!document.fullscreenElement?t.f.requestFullscreen({navigationUI:"hide"}):screen.orientation.type.includes("portrait")&&document.fullscreenElement&&document.exitFullscreen())}))}(this),this.ka=new Set,ud(this),this.ya.Ua(.125)}V("shaka.ui.Element",Hl),Hl.prototype.destroy=function(){return this.eventManager.release(),this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null,Promise.resolve()},Hl.prototype.destroy=Hl.prototype.destroy,E(Wl,Hl),V("shaka.ui.RangeElement",Wl),Wl.prototype.l=function(){},Wl.prototype.g=function(){},Wl.prototype.j=function(){},V("shaka.ui.Utils.getFirstDescendantWithClassName",(function(e,t){return Yl(e,t)})),V("shaka.ui.Utils.setDisplay",Zl),V("shaka.ui.Utils.removeAllChildren",Ql),E(ed,Wl),V("shaka.ui.SeekBar",ed),ed.prototype.destroy=function(){var e=this;return p((function t(){return O(t,(function(t){if(1===t.o)return e.f&&(e.f.stop(),e.f=null),A(t,Wl.prototype.destroy.call(e),0)}))}))},ed.prototype.l=function(){this.controls.fe(!0),this.video.pause()},ed.prototype.g=function(){this.video.duration&&(td(this),this.f.T(.125))},ed.prototype.j=function(){this.f.gb(),this.controls.fe(!1),this.video.play()},z(id,X),V("shaka.ui.Controls",id);var rd=new Map;function ad(e,t){rd.set(e,t)}function od(e){var t=e.c.paused&&!e.Z,n=e.a.classList.contains("shaka-keyboard-navigation");t||e.Ma||n||function(e){return e.Wa.some((function(e){return e.matches(":hover")}))}(e)?(dd(e),e.a.setAttribute("shown","true"),e.X.stop()):e.X.T(e.g.fadeDelay)}function sd(e){e.O&&e.c.duration&&(e.s.ye(),e.c.paused?e.c.play():e.c.pause())}function ud(e){var t=e.l.ha();e.dispatchEvent(new H("caststatuschanged",{Ig:t})),t?e.a.setAttribute("casting","true"):e.a.removeAttribute("casting")}function cd(e){return!!e.O&&(null!=e.a.getAttribute("shown")||null!=e.a.getAttribute("casting"))}function ld(e,t){e.c.currentTime=t,cd(e)&&dd(e)}function dd(e){if(e.j)if(ql(e.j,e.c.currentTime),td(e.j),e.j.b.classList.contains("shaka-hidden")){var t=h(e.H);for(n=t.next();!n.done;n=t.next())n.value.classList.add("shaka-low-position")}else for(var n=(t=h(e.H)).next();!n.done;n=t.next())n.value.classList.remove("shaka-low-position");e.dispatchEvent(new H("timeandseekrangeupdated"))}function hd(e,t){Hl.call(this,e,t);var n=this;this.g=this.controls.g,this.f=this.controls.a,this.c=[],this.b=Sl("button"),this.b.classList.add("shaka-overflow-menu-button"),this.b.classList.add("shaka-no-propagation"),this.b.classList.add("material-icons"),this.b.textContent="more_vert",this.parent.appendChild(this.b),this.a=Sl("div"),this.a.classList.add("shaka-overflow-menu"),this.a.classList.add("shaka-no-propagation"),this.a.classList.add("shaka-show-controls-on-mouse-over"),this.a.classList.add("shaka-settings-menu"),this.f.appendChild(this.a),function(e){for(var t=0;t<e.g.overflowMenuButtons.length;t++){var n=e.g.overflowMenuButtons[t];gd.get(n)?(n=gd.get(n),e.c.push(n.create(e.a,e.controls))):W.ba("Unrecognized overflow menu element requested:",n)}}(this);for(var i=this.controls.f.getElementsByClassName("shaka-back-to-overflow-button"),r=0;r<i.length;r++)this.eventManager.m(i[r],"click",(function(){n.controls.sc(),Zl(n.a,!0),n.a.childNodes.length&&n.a.childNodes[0].focus(),od(n.controls)}));this.eventManager.m(this.localization,"locale-updated",(function(){pd(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){pd(n)})),this.eventManager.m(this.controls,"submenuopen",(function(){Zl(n.a,!1)})),this.eventManager.m(this.a,"touchstart",(function(e){n.controls.tf(Date.now()),e.stopPropagation()})),this.eventManager.m(this.b,"click",(function(){!function(e){if(e.controls.Hc())e.controls.sc();else{Zl(e.a,!0),od(e.controls);var t=function(e){return 0==e.classList.contains("shaka-hidden")};(function(e,t){for(var n=h(e),i=n.next();!i.done;i=n.next())if(t(i.value))return!0;return!1})(e.a.childNodes,t)&&J(e.a.childNodes,t)[0].focus()}}(n)})),this.eventManager.m(this.f,"touchstart",(function(e){n.a.classList.contains("shaka-displayed")&&(Zl(n.a,!1),e.preventDefault())})),pd(this)}function fd(e,t){gd.set(e,t)}function pd(e){e.b.setAttribute("aria-label",e.localization.resolve("MORE_SETTINGS"))}function md(){}id.prototype.destroy=function(){var e=this;return p((function t(){return O(t,(function(t){switch(t.o){case 1:if(e.b&&(e.b.release(),e.b=null),e.K&&(e.K.stop(),e.K=null),e.X&&(e.X.stop(),e.X=null),e.u&&(e.u.stop(),e.u=null),e.ya&&(e.ya.stop(),e.ya=null),e.a&&(e.f.removeChild(e.a),e.a=null),!e.l){t.C(2);break}return A(t,e.l.destroy(),3);case 3:e.l=null;case 2:if(!e.wa){t.C(4);break}return A(t,e.wa.destroy(),5);case 5:e.wa=null;case 4:return e.s=null,e.B=null,e.c=null,e.Ka=null,e.ka.clear(),A(t,Promise.all(e.Ja.map((function(e){return e.destroy()}))),6);case 6:if(e.Ja=[],e.j)return A(t,e.j.destroy(),0);t.C(0)}}))}))},id.prototype.destroy=id.prototype.destroy,id.registerElement=ad,id.prototype.Jf=function(e){this.Ia=e,ud(this)},id.prototype.allowCast=id.prototype.Jf,id.prototype.Gg=function(){this.L()},id.prototype.loadComplete=id.prototype.Gg,id.prototype.configure=function(e){this.g=e,this.l.Be(e.castReceiverAppId),this.j&&(this.j.destroy(),this.j=null),this.La&&(this.La.destroy(),this.La=null),this.a?(Al(this.a),this.f.removeChild(this.G)):function(e){e.a=Sl("div"),e.a.classList.add("shaka-controls-container"),e.f.appendChild(e.a),e.b.m(e.a,"touchstart",(function(t){e.c.duration&&(cd(e)?e.w=Date.now():(e.ia(t),t.preventDefault()))}),{passive:!1}),e.b.m(e.a,"click",(function(){e.O&&(e.Hc()?e.u.gb():sd(e))}))}(this),function(e){e.f.classList.add("shaka-video-container"),e.B.classList.add("shaka-video");var t=Sl("div");t.classList.add("shaka-skim-container"),t.classList.add("shaka-fade-out-on-mouse-out"),e.a.appendChild(t),e.g.addBigPlayButton&&((t=Sl("div")).classList.add("shaka-play-button-container"),e.a.appendChild(t),e.La=new Id(t,e)),e.G=Sl("div"),e.G.classList.add("shaka-spinner-container"),e.f.appendChild(e.G);var n=Sl("div");if(n.classList.add("shaka-spinner"),e.G.appendChild(n),(t=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("class","shaka-spinner-svg"),t.setAttribute("viewBox","0 0 30 30"),n.appendChild(t),(n=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("class","shaka-spinner-path"),n.setAttribute("cx","15"),n.setAttribute("cy","15"),n.setAttribute("r","14.5"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-miterlimit","10"),t.appendChild(n),function(e){e.na=Sl("div"),e.na.classList.add("shaka-bottom-controls"),e.a.appendChild(e.na),e.J=Sl("div"),e.J.classList.add("shaka-controls-button-panel"),e.J.classList.add("shaka-no-propagation"),e.J.classList.add("shaka-show-controls-on-mouse-over"),e.na.appendChild(e.J),e.b.m(e.J,"click",(function(){e.sc()}));for(var t=0;t<e.g.controlPanelElements.length;t++){var n=e.g.controlPanelElements[t];rd.get(n)?(n=rd.get(n),e.Ja.push(n.create(e.J,e))):W.ba("Unrecognized control panel element requested:",n)}}(e),e.H=Array.from(e.f.getElementsByClassName("shaka-settings-menu")),e.g.addSeekBar)e.j=new ed(e.na,e);else for(n=(t=h(e.H)).next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");e.Wa=Array.from(e.f.getElementsByClassName("shaka-show-controls-on-mouse-over"))}(this),this.L();for(var t=(e=h(this.f.getElementsByClassName("shaka-no-propagation"))).next();!t.done;t=e.next()){t=t.value;var n=function(e){return e.stopPropagation()};this.b.m(t,"click",n),this.b.m(t,"dblclick",n)}},id.prototype.configure=id.prototype.configure,id.prototype.be=function(e){(this.O=e)?(Zl(this.a,!0),Zl(this.G,this.s.Tb()),this.B.tabIndex=-1,this.B.controls=!1):(Zl(this.a,!1),Zl(this.G,!1)),this.L()},id.prototype.setEnabledShakaControls=id.prototype.be,id.prototype.fe=function(e){this.Z=e},id.prototype.setSeeking=id.prototype.fe,id.prototype.sf=function(e){this.B.controls=e,this.B.tabIndex=e?0:-1,e&&this.be(!1)},id.prototype.setEnabledNativeControls=id.prototype.sf,id.prototype.Wf=function(){return this.l},id.prototype.getCastProxy=id.prototype.Wf,id.prototype.hg=function(){return this.Ka},id.prototype.getLocalization=id.prototype.hg,id.prototype.me=function(){var e=this;return p((function t(){var n;return O(t,(function(t){switch(t.o){case 1:if(document.fullscreenElement){document.exitFullscreen(),t.C(0);break}if(k(t,3),!document.pictureInPictureElement){t.C(5);break}return A(t,document.exitPictureInPicture(),5);case 5:C(t,4);break;case 3:n=N(t),e.dispatchEvent(new H("error",{detail:n}));case 4:return A(t,e.f.requestFullscreen({navigationUI:"hide"}),0)}}))}))},id.prototype.toggleFullScreen=id.prototype.me,id.prototype.yg=function(){return this.f},id.prototype.getVideoContainer=id.prototype.yg,id.prototype.qc=function(){return this.c},id.prototype.getVideo=id.prototype.qc,id.prototype.gg=function(){return this.B},id.prototype.getLocalVideo=id.prototype.gg,id.prototype.$a=function(){return this.s},id.prototype.getPlayer=id.prototype.$a,id.prototype.fg=function(){return this.wa},id.prototype.getLocalPlayer=id.prototype.fg,id.prototype.Zf=function(){return this.a},id.prototype.getControlsContainer=id.prototype.Zf,id.prototype.Xf=function(){return this.g},id.prototype.getConfig=id.prototype.Xf,id.prototype.Eg=function(){return this.Z},id.prototype.isSeeking=id.prototype.Eg,id.prototype.Cg=function(){return this.Ia},id.prototype.isCastAllowed=id.prototype.Cg,id.prototype.Ke=function(){return this.j?parseFloat(this.j.a.value):this.c.currentTime},id.prototype.getDisplayTime=id.prototype.Ke,id.prototype.tf=function(e){this.w=e},id.prototype.setLastTouchEventTime=id.prototype.tf,id.prototype.Hc=function(){return this.H.some((function(e){return e.classList.contains("shaka-displayed")}))},id.prototype.anySettingsMenusAreOpen=id.prototype.Hc,id.prototype.sc=function(){this.u.gb()},id.prototype.hideSettingsMenus=id.prototype.sc,id.prototype.ia=function(e){"mousemove"==e.type&&(this.a.classList.remove("shaka-keyboard-navigation"),od(this)),"touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"keyup"==e.type?this.w=Date.now():this.w+1e3<Date.now()&&(this.w=null),this.w&&"mousemove"==e.type||(this.f.style.cursor="",this.Ma=!0,this.u.stop(),cd(this)||(dd(this),od(this)),this.K.stop(),"touchend"!=e.type&&"keyup"!=e.type&&this.w||this.K.T(3))},id.prototype.sb=function(){this.w||this.K.gb()},id.prototype.L=function(){this.c.ended&&!this.c.paused&&this.c.pause(),od(this)},id.prototype.rb=function(){this.b.xa(e,"mousedown")},E(hd,Hl),V("shaka.ui.OverflowMenu",hd),hd.prototype.destroy=function(){var e=this;return p((function t(){return O(t,(function(t){switch(t.o){case 1:return e.f=null,A(t,Promise.all(e.c.map((function(e){return e.destroy()}))),2);case 2:return e.c=[],A(t,Hl.prototype.destroy.call(e),0)}}))}))},hd.registerElement=fd,md.prototype.create=function(e,t){return new hd(e,t)},ad("overflow_menu",new md);var gd=new Map;function vd(e,t,n){Hl.call(this,e,t);var i=this;!function(e,t){e.button=Sl("button"),e.f=Sl("i"),e.f.classList.add("material-icons"),e.f.textContent=t,e.button.appendChild(e.f);var n=Sl("label");n.classList.add("shaka-overflow-button-label"),e.l=Sl("span"),n.appendChild(e.l),e.b=Sl("span"),e.b.classList.add("shaka-current-selection-span"),n.appendChild(e.b),e.button.appendChild(n),e.parent.appendChild(e.button)}(this,n),function(e){e.a=Sl("div"),e.a.classList.add("shaka-no-propagation"),e.a.classList.add("shaka-show-controls-on-mouse-over"),e.a.classList.add("shaka-settings-menu"),e.c=Sl("button"),e.c.classList.add("shaka-back-to-overflow-button"),e.a.appendChild(e.c);var t=Sl("i");t.classList.add("material-icons"),t.textContent="arrow_back",e.c.appendChild(t),e.j=Sl("span"),e.c.appendChild(e.j),e.controls.a.appendChild(e.a)}(this),this.eventManager.m(this.button,"click",(function(){i.controls.dispatchEvent(new H("submenuopen")),Zl(i.a,!0),$l(i.a)}))}function yd(e,t){vd.call(this,e,t,"language");var n=this;this.button.classList.add("shaka-language-button"),this.a.classList.add("shaka-audio-languages"),this.eventManager.m(this.localization,"locale-updated",(function(){Ed(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){Ed(n)})),this.eventManager.m(this.player,"trackschanged",(function(){var e=0<n.player.Rb().length;Zl(n.button,e),bd(n)})),this.eventManager.m(this.player,"variantchanged",(function(){bd(n)})),Ed(this),bd(this)}function bd(e){Vl(e.player.Rb(),e.a,(function(t){e.player.bd(t.language,t.roles[0])}),!0,e.b,e.localization,e.controls.g.trackLabelFormat),$l(e.a),e.controls.dispatchEvent(new H("languageselectionupdated"))}function Ed(e){e.c.setAttribute("aria-label",e.localization.resolve("BACK")),e.button.setAttribute("aria-label",e.localization.resolve("LANGUAGE")),e.l.textContent=e.localization.resolve("LANGUAGE"),e.j.textContent=e.localization.resolve("LANGUAGE")}function wd(){}function Td(e,t){Hl.call(this,e,t);var n=this;this.button=Sl("button"),this.parent.appendChild(this.button),this.eventManager.m(this.localization,"locale-updated",(function(){Ad(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){Ad(n)})),this.eventManager.m(this.video,"play",(function(){Ad(n)})),this.eventManager.m(this.video,"pause",(function(){Ad(n)})),this.eventManager.m(this.button,"click",(function(){Sd(n)?n.video.play():n.video.pause()}))}function Sd(e){return e.video.paused&&!e.controls.Z}function Ad(e){e.button.setAttribute("aria-label",e.localization.resolve(Sd(e)?"PLAY":"PAUSE"))}function Id(e,t){Td.call(this,e,t);var n=this;this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),kd(this),Ad(this),this.eventManager.m(this.video,"play",(function(){kd(n)})),this.eventManager.m(this.video,"pause",(function(){kd(n)}))}function kd(e){Sd(e)?e.button.setAttribute("icon","play"):e.button.setAttribute("icon","pause")}function xd(e,t){Hl.call(this,e,t);var n=this;this.b=this.controls.l,this.a=Sl("button"),this.a.classList.add("shaka-cast-button"),this.a.setAttribute("aria-pressed","false"),this.c=Sl("i"),this.c.classList.add("material-icons"),this.c.textContent="cast",this.a.appendChild(this.c);var i=Sl("label");i.classList.add("shaka-overflow-button-label"),this.g=Sl("span"),i.appendChild(this.g),this.f=Sl("span"),this.f.classList.add("shaka-current-selection-span"),i.appendChild(this.f),this.a.appendChild(i),this.parent.appendChild(this.a),Pd(this),Cd(this),this.eventManager.m(this.localization,"locale-updated",(function(){Pd(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){Pd(n)})),this.eventManager.m(this.a,"click",(function(){!function(e){p((function t(){var n;return O(t,(function(t){switch(t.o){case 1:if(e.b.ha()){e.b.xf(),t.C(0);break}return k(t,3),e.a.disabled=!0,A(t,e.b.cast(),5);case 5:e.a.disabled=!1,C(t,0);break;case 3:n=N(t),e.a.disabled=!1,8004!=n.code&&e.controls.dispatchEvent(new H("error",{detail:n})),I(t)}}))}))}(n)})),this.eventManager.m(this.controls,"caststatuschanged",(function(){Cd(n)}))}function Cd(e){var t=e.b.xe()&&e.controls.Ia,n=e.b.ha();Zl(e.a,t),e.c.textContent=n?"cast_connected":"cast",t&&(n?e.a.setAttribute("aria-pressed","true"):e.a.setAttribute("aria-pressed","false")),Nd(e)}function Nd(e){e.f.textContent=e.b.ha()?e.b.ad():e.localization.resolve("OFF")}function Pd(e){e.a.setAttribute("aria-label",e.localization.resolve("CAST")),e.g.textContent=e.localization.resolve("CAST"),Nd(e)}function Md(){}function Rd(e,t){Hl.call(this,e,t);var n=this;this.a=Sl("button"),this.a.classList.add("material-icons"),this.a.classList.add("shaka-fast-forward-button"),this.a.textContent="fast_forward",this.parent.appendChild(this.a),Ld(this),this.eventManager.m(this.localization,"locale-updated",(function(){Ld(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){Ld(n)})),this.eventManager.m(this.a,"click",(function(){if(n.video.duration){var e=n.player.xd();n.player.pe(0>e||4<e?1:2*e)}}))}function Ld(e){e.a.setAttribute("aria-label",e.localization.resolve("FAST_FORWARD"))}function Ud(){}function _d(e,t){Hl.call(this,e,t);var n=this;this.a=Sl("button"),this.a.classList.add("shaka-fullscreen-button"),this.a.classList.add("material-icons"),document.fullscreenEnabled||this.a.classList.add("shaka-hidden"),this.a.textContent="fullscreen",this.parent.appendChild(this.a),Od(this),this.eventManager.m(this.localization,"locale-updated",(function(){Od(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){Od(n)})),this.eventManager.m(this.a,"click",(function(){n.controls.me()})),this.eventManager.m(document,"fullscreenchange",(function(){n.a.textContent=document.fullscreenElement?"fullscreen_exit":"fullscreen",Od(n)}))}function Od(e){e.a.setAttribute("aria-label",e.localization.resolve(document.fullscreenElement?"EXIT_FULL_SCREEN":"FULL_SCREEN"))}function Dd(){}function Fd(e,t){Hl.call(this,e,t);var n=this;this.a=Sl("button"),this.a.classList.add("shaka-mute-button"),this.a.classList.add("material-icons"),this.a.textContent="volume_up",this.parent.appendChild(this.a),jd(this),this.eventManager.m(this.localization,"locale-updated",(function(){jd(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){jd(n)})),this.eventManager.m(this.a,"click",(function(){n.video.muted=!n.video.muted})),this.eventManager.m(this.video,"volumechange",(function(){jd(n),n.a.textContent=n.video.muted?"volume_off":"volume_up"}))}function jd(e){e.a.setAttribute("aria-label",e.localization.resolve(e.video.muted?"UNMUTE":"MUTE"))}function Kd(){}function Bd(e,t){Hl.call(this,e,t);var n=this;this.g=this.controls.B,this.a=Sl("button"),this.a.classList.add("shaka-pip-button"),this.c=Sl("i"),this.c.classList.add("material-icons"),this.c.textContent="picture_in_picture_alt",this.a.appendChild(this.c);var i=Sl("label");i.classList.add("shaka-overflow-button-label"),this.f=Sl("span"),this.f.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),i.appendChild(this.f),this.b=Sl("span"),this.b.classList.add("shaka-current-selection-span"),i.appendChild(this.b),this.a.appendChild(i),Gd(this),this.parent.appendChild(this.a),document.pictureInPictureEnabled&&!this.video.disablePictureInPicture||Zl(this.a,!1),this.eventManager.m(this.localization,"locale-updated",(function(){Gd(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){Gd(n)})),this.eventManager.m(this.a,"click",(function(){!function(e){p((function t(){var n;return O(t,(function(t){switch(t.o){case 1:return k(t,2),document.pictureInPictureElement?A(t,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),A(t,e.video.requestPictureInPicture(),5));case 5:C(t,0);break;case 2:n=N(t),e.controls.dispatchEvent(new H("error",{detail:n})),I(t)}}))}))}(n)})),this.eventManager.m(this.g,"enterpictureinpicture",(function(){n.c.textContent="branding_watermark",n.a.setAttribute("aria-label",n.localization.resolve("EXIT_PICTURE_IN_PICTURE")),n.b.textContent=n.localization.resolve("ON")})),this.eventManager.m(this.g,"leavepictureinpicture",(function(){n.c.textContent="picture_in_picture_alt",n.a.setAttribute("aria-label",n.localization.resolve("ENTER_PICTURE_IN_PICTURE")),n.b.textContent=n.localization.resolve("OFF")})),this.eventManager.m(this.controls,"caststatuschanged",(function(e){e.newStatus?document.pictureInPictureEnabled&&!n.video.disablePictureInPicture&&Zl(n.a,!1):document.pictureInPictureEnabled&&!n.video.disablePictureInPicture&&Zl(n.a,!0)})),this.eventManager.m(this.player,"trackschanged",(function(){!function(e){p((function t(){return O(t,(function(t){if(1===t.o){if(document.pictureInPictureEnabled&&!e.video.disablePictureInPicture)if(e.player&&e.player.Qe()){if(Zl(e.a,!1),document.pictureInPictureElement)return A(t,document.exitPictureInPicture(),0)}else Zl(e.a,!0);else Zl(e.a,!1);t.C(0)}}))}))}(n)}))}function Gd(e){e.f.textContent=e.localization.resolve("PICTURE_IN_PICTURE"),e.a.setAttribute("aria-label",e.localization.resolve(document.pictureInPictureElement?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE")),e.b.textContent=e.localization.resolve(document.pictureInPictureElement?"ON":"OFF")}function Vd(){}function zd(e,t){Hl.call(this,e,t);var n=this;this.a=Sl("button"),this.a.classList.add("shaka-current-time"),Hd(this,"0:00"),this.parent.appendChild(this.a),this.eventManager.m(this.a,"click",(function(){n.player.Y()&&(n.video.currentTime=n.player.fc().end)})),this.eventManager.m(this.controls,"timeandseekrangeupdated",(function(){var e=n.controls.Z,t=n.controls.Ke(),i=n.video.duration,r=n.player.fc(),a=r.end-r.start;n.player.Y()?(i=3600<=a,1<=(t=Math.max(0,Math.floor(r.end-t)))||e?(Hd(n,"- "+Wd(t,i)),n.a.disabled=!1):(Hd(n,n.localization.resolve("LIVE")),n.a.disabled=!0)):(t=Wd(t,e=3600<=i),i&&(t+=" / "+Wd(i,e)),Hd(n,t),n.a.disabled=!0)})),this.eventManager.m(this.player,"trackschanged",(function(){n.player.Y()&&n.a.setAttribute("aria-label",n.localization.resolve("SKIP_TO_LIVE"))}))}function Hd(e,t){t!=e.a.textContent&&(e.a.textContent=t)}function Wd(e,t){var n=Math.floor(e/3600),i=Math.floor(e/60%60),r=Math.floor(e%60);return 10>r&&(r="0"+r),r=i+":"+r,t&&(10>i&&(r="0"+r),r=n+":"+r),r}function qd(){}function Xd(e,t){vd.call(this,e,t,"settings");var n=this;this.button.classList.add("shaka-resolution-button"),this.a.classList.add("shaka-resolutions"),this.eventManager.m(this.localization,"locale-updated",(function(){$d(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){$d(n)})),this.eventManager.m(this.player,"variantchanged",(function(){Yd(n)})),this.eventManager.m(this.player,"trackschanged",(function(){Yd(n)})),this.eventManager.m(this.player,"abrstatuschanged",(function(){Yd(n)})),Yd(this),$d(this)}function Yd(e){var t=e.player.Rb();if(t.length&&!t[0].height)Zl(e.a,!1),Zl(e.button,!1);else{Zl(e.button,!0),t.sort((function(e,t){return t.height-e.height}));var n=t.find((function(e){return e.active}));n&&(t=t.filter((function(e){return e.language==n.language&&e.channelsCount==n.channelsCount}))),t=t.filter((function(e,n){return t.findIndex((function(t){return t.height==e.height}))==n}));var i=Yl(e.a,"shaka-back-to-overflow-button");Ql(e.a),e.a.appendChild(i);var r=e.player.getConfiguration().abr.enabled;t.forEach((function(t){var i=Sl("button");i.classList.add("explicit-resolution"),e.eventManager.m(i,"click",e.s.bind(e,t));var a=Sl("span");a.textContent=t.height+"p",i.appendChild(a),r||t!=n||(i.setAttribute("aria-selected","true"),i.appendChild(Jl()),a.classList.add("shaka-chosen-item"),e.b.textContent=a.textContent),e.a.appendChild(i)})),(i=Sl("button")).classList.add("shaka-enable-abr-button"),e.eventManager.m(i,"click",function(){this.player.configure({abr:{enabled:!0}}),Yd(this)}.bind(e)),e.g=Sl("span"),e.g.classList.add("shaka-auto-span"),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),i.appendChild(e.g),r&&(i.setAttribute("aria-selected","true"),i.appendChild(Jl()),e.g.classList.add("shaka-chosen-item"),e.b.textContent=e.localization.resolve("AUTO_QUALITY")),e.a.appendChild(i),$l(e.a),e.controls.dispatchEvent(new H("resolutionselectionupdated"))}}function $d(e){e.button.setAttribute("aria-label",e.localization.resolve("RESOLUTION")),e.c.setAttribute("aria-label",e.localization.resolve("RESOLUTION")),e.j.textContent=e.localization.resolve("RESOLUTION"),e.l.textContent=e.localization.resolve("RESOLUTION"),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),e.player.getConfiguration().abr.enabled&&(e.b.textContent=e.localization.resolve("AUTO_QUALITY"))}function Jd(){}function Zd(e,t){Hl.call(this,e,t);var n=this;this.a=Sl("button"),this.a.classList.add("material-icons"),this.a.classList.add("shaka-rewind-button"),this.a.textContent="fast_rewind",this.parent.appendChild(this.a),Qd(this),this.eventManager.m(this.localization,"locale-updated",(function(){Qd(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){Qd(n)})),this.eventManager.m(this.a,"click",(function(){if(n.video.duration){var e=n.player.xd();n.player.pe(0<e||-4>e?-1:2*e)}}))}function Qd(e){e.a.setAttribute("aria-label",e.localization.resolve("REWIND"))}function eh(){}function th(e,t){Td.call(this,e,t);var n=this;this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons"),nh(this),Ad(this),this.eventManager.m(this.video,"play",(function(){nh(n)})),this.eventManager.m(this.video,"pause",(function(){nh(n)}))}function nh(e){e.button.textContent=Sd(e)?"play_arrow":"pause"}function ih(){}function rh(e,t){Hl.call(this,e,t);var n=Sl("div");n.classList.add("shaka-spacer"),n.setAttribute("aria-hidden",!0),this.parent.appendChild(n)}function ah(){}function oh(e,t){var n=this;this.f=!1,this.c=[],this.s=e,this.l=t,this.a=Sl("div"),this.a.classList.add("shaka-text-container"),this.l.appendChild(this.a),this.j=new Ce((function(){sh(n)})).Ua(.25),this.b=new Map,this.g=new Blob}function sh(e){function t(t){return e.c.includes(t)&&e.f&&t.startTime<=n&&t.endTime>=n}for(var n=e.s.currentTime,i=h(e.b.keys()),r=i.next();!r.done;r=i.next())if(!t(r=r.value)){var a=e.b.get(r);e.a.removeChild(a),e.b.delete(r)}for(i=new Set(e.b.values()),a=(r=h(Array.from(e.a.childNodes))).next();!a.done;a=r.next())a=a.value,i.has(a)||e.a.removeChild(a);for(i=e.c.filter((function(n){return t(n)&&!e.b.has(n)})).sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})),r=(i=h(i)).next();!r.done;r=i.next())ch(e,e.a,r.value)}function uh(e,t,n){var i=Sl("span");return n.spacer?i.style.display="block":lh(e,i,n,!0),t.appendChild(i),i}function ch(e,t,n){if(n&&n.nestedCues&&n.nestedCues.length){var i=Sl("p");i.style.width="100%",lh(e,i,n,!1);for(var r=0;r<n.nestedCues.length;r++)uh(e,i,n.nestedCues[r]);t.appendChild(i),e.b.set(n,i)}else e.b.set(n,uh(e,t,n))}function lh(e,t,n,i){var r=t.style;if(r.whiteSpace="pre-line",t.textContent=n.payload,i&&(r.backgroundColor=n.backgroundColor),r.color=n.color,r.direction=n.direction,n.backgroundImage){var a=n.backgroundImage;t="image/png";var o=0;a=a.split(",")[1],t=t||"",o=o||512;for(var s=(a=atob(a))?a.length:0,u=[],c=0;c<s;c+=o){for(var l=a.slice(c,c+o),d=l?l.length:0,h=Array(d),f=0;f<d;f++)h[f]=l.charCodeAt(f);l=new Uint8Array(h),u.push(l)}e.g=new Blob(u,{type:t}),e=URL.createObjectURL(e.g),r.backgroundImage="url('"+e+"')",r.backgroundRepeat="no-repeat",r.backgroundSize="contain",r.backgroundPosition="center",""==n.backgroundColor&&(r.backgroundColor="transparent")}n.backgroundImage&&n.region&&(e=Sn,t=n.region.widthUnits==e?"%":"px",r.height=n.region.height+(n.region.heightUnits==e?"%":"px"),r.width=n.region.width+t,e=n.region.viewportAnchorUnits==e?"%":"px",r.top=n.region.viewportAnchorY+e,r.left=n.region.viewportAnchorX+e,r.position="absolute"),r.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end",n&&n.nestedCues&&n.nestedCues.length&&(r.alignItems="center",n.textAlign&&(n.textAlign===ln?r.alignItems="center":"left"===n.textAlign?r.alignItems="flex-start":"right"===n.textAlign&&(r.alignItems="flex-end")),r.display="flex",r.flexDirection="column",r.margin="0"),i&&(r.maxWidth="100%"),r.fontFamily=n.fontFamily,r.fontWeight=n.fontWeight.toString(),r.fontSize=n.fontSize,r.fontStyle=n.fontStyle,n.line?1==n.lineInterpretation&&(r.position="absolute",n.writingMode==mn?n.lineAlign==vn?r.top=n.line+"%":"end"==n.lineAlign&&(r.bottom=n.line+"%"):"vertical-lr"==n.writingMode?n.lineAlign==vn?r.left=n.line+"%":"end"==n.lineAlign&&(r.right=n.line+"%"):n.lineAlign==vn?r.right=n.line+"%":"end"==n.lineAlign&&(r.left=n.line+"%")):n.region&&n.region.id&&!i&&(i=Sn,e=n.region.widthUnits==i?"%":"px",t=n.region.viewportAnchorUnits==i?"%":"px",r.height=n.region.height+(n.region.heightUnits==i?"%":"px"),r.width=n.region.width+e,r.position="absolute",r.top=n.region.viewportAnchorY+t,r.left=n.region.viewportAnchorX+t),r.lineHeight=n.lineHeight,n.position&&(n.writingMode==mn?r.paddingLeft=n.position:r.paddingTop=n.position),"line-left"==n.positionAlign?r.cssFloat="left":"line-right"==n.positionAlign&&(r.cssFloat="right"),r.textAlign=n.textAlign,r.textDecoration=n.textDecoration.join(" "),r.writingMode=n.writingMode,n.size&&(n.writingMode==mn?r.width=n.size+"%":r.height=n.size+"%")}function dh(e,t){vd.call(this,e,t,"closed_caption");var n=this;this.button.classList.add("shaka-caption-button"),this.a.classList.add("shaka-text-languages"),this.player&&this.player.bb()?this.button.setAttribute("aria-pressed","true"):this.button.setAttribute("aria-pressed","false"),function(e){var t=Sl("button");t.setAttribute("aria-selected","true"),e.a.appendChild(t),t.appendChild(Jl()),e.g=Sl("span"),e.g.classList.add("shaka-auto-span"),t.appendChild(e.g)}(this),this.eventManager.m(this.localization,"locale-updated",(function(){ph(n),fh(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){ph(n),fh(n)})),this.eventManager.m(this.player,"texttrackvisibility",(function(){hh(n),n.player.bb()&&mh(n)})),this.eventManager.m(this.player,"textchanged",(function(){fh(n)})),this.eventManager.m(this.player,"trackschanged",(function(){mh(n)})),hh(this),ph(this),fh(this)}function hh(e){e.player.bb()?(e.f.classList.add("shaka-captions-on"),e.f.classList.remove("shaka-captions-off"),e.button.setAttribute("aria-pressed","true")):(e.f.classList.add("shaka-captions-off"),e.f.classList.remove("shaka-captions-on"),e.button.setAttribute("aria-pressed","false")),e.controls.dispatchEvent(new H("captionselectionupdated"))}function fh(e){var t=e.player.ib();Vl(t,e.a,(function(t){return function(e,t){return p((function n(){return O(n,(function(n){switch(n.o){case 1:return A(n,e.player.ie(!0),2);case 2:e.player&&e.player.cd(t.language,t.roles[0]),I(n)}}))}))}(e,t)}),e.player.bb(),e.b,e.localization,e.controls.g.trackLabelFormat),(t=Sl("button")).classList.add("shaka-turn-captions-off-button"),e.eventManager.m(t,"click",(function(){e.player.ie(!1).catch((function(){})),fh(e)})),t.appendChild(e.g),e.a.appendChild(t),e.player.bb()||(t.setAttribute("aria-selected","true"),t.appendChild(Jl()),e.g.classList.add("shaka-chosen-item"),e.b.textContent=e.localization.resolve("OFF")),$l(e.a),e.controls.dispatchEvent(new H("captionselectionupdated"))}function ph(e){e.button.setAttribute("aria-label",e.localization.resolve("CAPTIONS")),e.c.setAttribute("aria-label",e.localization.resolve("BACK")),e.l.textContent=e.localization.resolve("CAPTIONS"),e.j.textContent=e.localization.resolve("CAPTIONS"),e.g.textContent=e.localization.resolve("OFF")}function mh(e){var t=0<e.player.ib().length;Zl(e.button,t),fh(e)}function gh(){}function vh(e,t,n){this.c=e,this.b=yh(),t.dataset.shakaPlayerContainer="",t.ui=this,this.Se()&&t.classList.add("shaka-mobile"),this.a=new id(e,t,n,this.b),this.configure({}),n.controls||e.configure("textDisplayFactory",(function(){return new oh(n,t)})),t.ui=this,n.ui=this}function yh(){return{controlPanelElements:"time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:["captions","quality","language","picture_in_picture","cast"],addSeekBar:!0,addBigPlayButton:!0,castReceiverAppId:"",clearBufferOnQualityChange:!0,showUnbufferedStart:!0,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:Th,fadeDelay:0,doubleClickForFullscreen:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0}}function bh(){return p((function e(){var t,n,i,r,a,o,s;return O(e,(function(e){switch(e.o){case 1:if(Xu(),!js())return W.error("Shaka Player does not support this browser. Please see https://tinyurl.com/y7s4j9tr for the list of supported browsers."),Eh("shaka-ui-load-failed"),e.return();if(t=document.querySelectorAll("[data-shaka-player-container]"),!(n=document.querySelectorAll("[data-shaka-player]")).length&&!t.length){e.C(2);break}if(n.length&&!t.length){for(var u=0;u<n.length;u++)(i=n[u]).ui||(r=document.createElement("div"),i.parentElement.replaceChild(r,i),r.appendChild(i),wh(r,i));e.C(2);break}a=0;case 4:if(!(a<t.length)){e.C(2);break}if((o=t[a]).ui){e.C(5);break}for(s=null,u=0;u<n.length;u++)if(n[u].parentElement==o){s=n[u];break}return s||((s=document.createElement("video")).setAttribute("playsinline",""),o.appendChild(s)),A(e,wh(o,s),5);case 5:a++,e.C(4);break;case 2:Eh("shaka-ui-loaded"),I(e)}}))}))}function Eh(e){var t=document.createEvent("CustomEvent");t.initCustomEvent(e,!1,!1,null),document.dispatchEvent(t)}function wh(e,t){return p((function n(){var i,r,a,o,s,u,c,l,d;return O(n,(function(n){switch(n.o){case 1:i=new _s(t),r=new vh(i,e,t),a="",e.dataset&&e.dataset.shakaPlayerCastReceiverId?a=e.dataset.shakaPlayerCastReceiverId:t.dataset&&t.dataset.shakaPlayerCastReceiverId&&(a=t.dataset.shakaPlayerCastReceiverId),a.length&&r.configure({castReceiverAppId:a}),t.controls&&r.a.sf(!0),(o=t.getAttribute("src"))&&((s=document.createElement("source")).setAttribute("src",o),t.appendChild(s),t.removeAttribute("src")),u=h(t.querySelectorAll("source")),c=u.next();case 2:if(c.done){n.C(0);break}return l=c.value,k(n,5),A(n,r.a.$a().load(l.getAttribute("src")),7);case 7:n.C(0);break;case 5:d=N(n),W.error("Error auto-loading asset",d);case 3:c=u.next(),n.C(2)}}))}))}E(vd,Hl),V("shaka.ui.SettingsMenu",vd),E(yd,vd),V("shaka.ui.AudioLanguageSelection",yd),wd.prototype.create=function(e,t){return new yd(e,t)},fd("language",new wd),E(Td,Hl),V("shaka.ui.PlayButton",Td),E(Id,Td),V("shaka.ui.BigPlayButton",Id),E(xd,Hl),V("shaka.ui.CastButton",xd),Md.prototype.create=function(e,t){return new xd(e,t)},fd("cast",new Md),E(Rd,Hl),V("shaka.ui.FastForwardButton",Rd),Ud.prototype.create=function(e,t){return new Rd(e,t)},ad("fast_forward",new Ud),E(_d,Hl),V("shaka.ui.FullscreenButton",_d),Dd.prototype.create=function(e,t){return new _d(e,t)},ad("fullscreen",new Dd),E(Fd,Hl),V("shaka.ui.MuteButton",Fd),Kd.prototype.create=function(e,t){return new Fd(e,t)},ad("mute",new Kd),E(Bd,Hl),V("shaka.ui.PipButton",Bd),Vd.prototype.create=function(e,t){return new Bd(e,t)},fd("picture_in_picture",new Vd),E(zd,Hl),V("shaka.ui.PresentationTimeTracker",zd),qd.prototype.create=function(e,t){return new zd(e,t)},ad("time_and_duration",new qd),E(Xd,vd),V("shaka.ui.ResolutionSelection",Xd),Xd.prototype.s=function(e){this.player.configure({abr:{enabled:!1}}),this.player.pf(e,this.controls.g.clearBufferOnQualityChange)},Jd.prototype.create=function(e,t){return new Xd(e,t)},fd("quality",new Jd),E(Zd,Hl),V("shaka.ui.RewindButton",Zd),eh.prototype.create=function(e,t){return new Zd(e,t)},ad("rewind",new eh),E(th,Td),V("shaka.ui.SmallPlayButton",th),ih.prototype.create=function(e,t){return new th(e,t)},ad("play_pause",new ih),E(rh,Hl),V("shaka.ui.Spacer",rh),ah.prototype.create=function(e,t){return new rh(e,t)},ad("spacer",new ah),V("shaka.ui.TextDisplayer",oh),oh.prototype.append=function(e){for(var t={},n=(e=h(e)).next();!n.done;t={cue:t.cue},n=e.next())t.cue=n.value,this.c.some(function(e){return function(t){return t.payload==e.cue.payload&&t.startTime==e.cue.startTime&&t.endTime==e.cue.endTime}}(t))||this.c.push(t.cue)},oh.prototype.append=oh.prototype.append,oh.prototype.destroy=function(){this.l.removeChild(this.a),this.a=null,this.f=!1,this.c=[],this.j&&this.j.stop(),this.b.clear()},oh.prototype.destroy=oh.prototype.destroy,oh.prototype.remove=function(e,t){return!!this.a&&(this.c=this.c.filter((function(n){return n.startTime<e||n.endTime>=t})),sh(this),!0)},oh.prototype.remove=oh.prototype.remove,oh.prototype.isTextVisible=function(){return this.f},oh.prototype.isTextVisible=oh.prototype.isTextVisible,oh.prototype.setTextVisibility=function(e){this.f=e},oh.prototype.setTextVisibility=oh.prototype.setTextVisibility,E(dh,vd),V("shaka.ui.TextSelection",dh),gh.prototype.create=function(e,t){return new dh(e,t)},fd("captions",new gh),V("shaka.ui.Overlay",vh),vh.prototype.destroy=function(){var e=this;return p((function t(){return O(t,(function(t){switch(t.o){case 1:if(!e.a){t.C(2);break}return A(t,e.a.destroy(),3);case 3:e.a=null;case 2:if(!e.c){t.C(0);break}return A(t,e.c.destroy(),5);case 5:e.c=null,I(t)}}))}))},vh.prototype.destroy=vh.prototype.destroy,vh.prototype.Se=function(){return!!/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)||ht()&&1<navigator.maxTouchPoints},vh.prototype.isMobile=vh.prototype.Se,vh.prototype.getConfiguration=function(){var e=yh();return Is(e,this.b,yh(),{},""),e},vh.prototype.getConfiguration=vh.prototype.getConfiguration,vh.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=ks(e,t)),Is(this.b,e,yh(),{},""),this.b.castReceiverAppId&&!this.b.overflowMenuButtons.includes("cast")&&this.b.overflowMenuButtons.push("cast"),this.a.configure(this.b),this.a.dispatchEvent(new H("uiupdated"))},vh.prototype.configure=vh.prototype.configure,vh.prototype.$a=function(){return qn("ui.Overlay.getPlayer()","Please use getControls().getPlayer() instead."),this.a.$a()},vh.prototype.getPlayer=vh.prototype.$a,vh.prototype.Yf=function(){return this.a},vh.prototype.getControls=vh.prototype.Yf,vh.prototype.sh=function(e){this.a.be(e)},vh.prototype.setEnabled=vh.prototype.sh;var Th=0,Sh=1,Ah=2;function Ih(e,t){Wl.call(this,e,t,["shaka-volume-bar-container"],["shaka-volume-bar"]);var n=this;this.f=this.controls.g,this.eventManager.m(this.video,"volumechange",(function(){return kh(n)})),this.eventManager.m(this.localization,"locale-updated",(function(){return xh(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){return xh(n)})),kh(this),xh(this)}function kh(e){e.video.muted?ql(e,0):ql(e,e.video.volume);var t=e.f.volumeBarColors,n=["to right"];n.push(t.level+100*parseFloat(e.a.value)+"%"),n.push(t.base+100*parseFloat(e.a.value)+"%"),n.push(t.base+"100%"),e.b.style.background="linear-gradient("+n.join(",")+")"}function xh(e){e.a.setAttribute("aria-label",e.localization.resolve("VOLUME"))}function Ch(){}V("shaka.ui.TrackLabelFormat",{LANGUAGE:Th,ROLE:Sh,LANGUAGE_ROLE:Ah}),"complete"==document.readyState?Promise.resolve().then(bh):e.addEventListener("load",bh),E(Ih,Wl),V("shaka.ui.VolumeBar",Ih),Ih.prototype.g=function(){this.video.volume=parseFloat(this.a.value),this.video.muted=0==this.video.volume},Ch.prototype.create=function(e,t){return new Ih(e,t)},ad("volume",new Ch)}.call(t,e,e,void 0),"undefined"!=typeof exports)for(var n in t.shaka)exports[n]=t.shaka[n];else"undefined"!=typeof define&&define.amd?define((function(){return t.shaka})):e.shaka=t.shaka}();